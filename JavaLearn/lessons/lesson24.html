<html><head><title>Lession 24  LinkedBlockingQueue //</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px; white-space: pre-wrap; transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }button { background: #03dac6; color: #121212; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lession 24  LinkedBlockingQueue //</h1><pre># KhÃ¡i niá»‡m  
	LinkedBlockingQueue lÃ  má»™t trong cÃ¡c lá»›p thuá»™c gÃ³i java.util.concurrent. NÃ³ Ä‘áº¡i diá»‡n cho má»™t hÃ ng Ä‘á»£i thread-safe Ä‘Æ°á»£c cÃ i Ä‘áº·t theo kiá»ƒu blocking queue(hÃ ng Ä‘á»£i cháº·n luá»“ng). Äiá»u nÃ y cÃ³ nghÄ©a lÃ  nÃ³ há»— trá»£ Ä‘á»“ng bá»™ hÃ³a khi nhiá»u luá»“ng thá»±c hiá»‡n thÃªm hoáº·c láº¥y pháº§n tá»­ tá»« hÃ ng Ä‘á»£i 
	
	
# Äáº·c Ä‘iá»ƒm chÃ­nh 
	## Thread-safe 
		- LinkedBlockingQueue sá»­ dá»¥ng cÆ¡ cháº¿ khÃ³a riÃªng biá»‡t cho cÃ¡c thao tÃ¡c thÃªm(put, offer) vÃ  láº¥y(take hoáº·c poll ) Ä‘á»ƒ Ä‘áº£m báº£o sá»± an toÃ n khi cÃ³ nhiá»u luá»“ng hoáº¡t Ä‘á»™ng cÃ¹ng lÃºc 
		
	## KÃ­ch thÆ°á»›c tÃ¹y chá»n : 
		Báº¡n cÃ³ thá»ƒ Ä‘áº·t kÃ­ch thÆ°á»›c tá»‘i Ä‘a cá»§a queue khi khá»Ÿi táº¡o. 
		Náº¿u khÃ´ng chá»‰ Ä‘á»‹nh kÃ­ch thÆ°á»›c, queue sáº½ cÃ³ kÃ­ch thÆ°á»›c máº·c Ä‘á»‹nh lÃ  MAX_VALUE 
		
	## Há»— trá»£ cÃ¡c thao tÃ¡c blocking 
		PhÆ°Æ¡ng thá»©c put sáº½ cháº·n luá»“ng náº¿u queue Ä‘áº§y cho Ä‘áº¿n khi cÃ³ chá»— trá»‘ng
		PhÆ°Æ¡ng thá»©c take sáº½ cháº·n luá»“ng náº¿u queue rá»—ng cho Ä‘áº¿n khi cÃ³ pháº§n tá»­ 
		
	## Cáº¥u trÃºc bÃªn trong  
		LinkedBlockingQueue sá»­ dá»¥ng má»™t danh sÃ¡ch liÃªn káº¿t(linked list Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c pháº§n tá»­ )
		Äiá»u nÃ y giÃºp cho queue cÃ³ hiá»‡u suáº¥t tá»‘t hÆ¡n vá»›i cÃ¡c thao tÃ¡c thÃªm vÃ  láº¥y pháº§n tá»­  
		
	## PhÃ¢n tÃ¡ch khÃ³a : 
		LinkedBlockingQueue sá»­ dá»¥ng hai khÃ³a riÃªng biá»‡t cho thao tÃ¡c thÃªm vÃ  láº¥y. Äiá»u nÃ y cho phÃ©p má»™t luá»“ng thÃªm vÃ  má»™t luá»“ng khÃ¡c láº¥y pháº§n tá»­ Ä‘á»“ng thá»i. 
		
	

# Khá»Ÿi táº¡o  
	## Constructor 
		
		// Khá»Ÿi táº¡o máº·c Ä‘á»‹nh khÃ´ng giá»›i háº¡n kÃ­ch thÆ°á»›c 
			LinkecBlockingQueue<E> queue = new LinkecBlockingQueue<>();
				
				-> KÃ­ch thÆ°á»›c tá»‘i Ä‘a Ä‘Æ°á»£c tham chiáº¿u vá»›i biáº¿n Integer.MAX_VALUE 
		
		// Khá»Ÿi táº¡o vá»›i kÃ­ch thÆ°á»›c giá»›i háº¡n tÃ¹y chá»‰nh  , vÃ­ dá»¥ lÃ  100 cháº³ng háº¡n 
			LinkedBlockingQueue<E> queue = new LinkedBlockingQueue<>(100);





# CÃ¡c phÆ°Æ¡ng thá»©c quan trá»ng cá»§a LinkedBlockingQueue


	## ThÃªm pháº§n tá»­ 
		.add(E e)                  : ThÃªm pháº§n tá»­ náº¿u cÃ²n chá»—, Náº¿u queue Ä‘áº§y, nÃ©m ngoáº¡i lá»‡ IllegalStateException 
		.offer(E e)                : ThÃªm pháº§n tá»­ náº¿u cÃ²n chá»—, tráº£ vá» false náº¿u Queue Ä‘áº§y  
		.offer(E e , timeout)      : cháº·n trong khoáº£ng thá»i gian timeout. Náº¿u váº«n Ä‘áº§y tráº£ vá» false 
		.put(E e)                  : Cháº·n luá»“ng náº¿u queue Ä‘áº§y cho Ä‘áº¿n khi cÃ³ chá»— trá»‘ng 


	## Láº¥y pháº§n tá»­ 
		.poll()           : Láº¥y vÃ  loáº¡i bá» pháº§n tá»­ Ä‘áº§u tiÃªn. Tráº£ vá» null náº¿u queue rá»—ng  
		.poll(timeout)    : Cháº·n trong má»™t khoáº£ng thá»i gian. Náº¿u váº«n rá»—ng tráº£ vá» null 
		.take()           : Cháº·n luá»“ng náº¿u queue rá»—ng cho Ä‘áº¿n khi cÃ³ pháº§n tá»­ 
		.peek()           : Láº¥y pháº§n tá»­ Ä‘áº§u tiÃªn mÃ  khÃ´ng xÃ³a nÃ³. Tráº£ vá» null náº¿u queue rá»—ng 


	## ThÃ´ng tin vá» queue 
		.size()                 : Tráº£ vá» sá»‘ lÆ°á»£ng pháº§n tá»­ hiá»‡n cÃ³ trong queue
		.remainingCapacity()    : Tráº£ vá» sá»‘ lÆ°á»£ng chá»— trá»‘ng cÃ²n láº¡i trong queue 



# 4. VÃ­ dá»¥ minh há»a 

	## VÃ­ dá»¥ khá»Ÿi táº¡o Ä‘Æ¡n giáº£n 
	
	
					LinkedBlockingQueue<Integer> queue = new LinkedBlockingQueue<>(3); // KÃ­ch thÆ°á»›c tá»‘i Ä‘a lÃ  3
					try {
						queue.put(1); // ThÃªm pháº§n tá»­ 1
						queue.put(2); // ThÃªm pháº§n tá»­ 2
						queue.put(3); // ThÃªm pháº§n tá»­ 3
						System.out.println("Queue: " + queue);
			
						// Thá»­ thÃªm pháº§n tá»­ khi queue Ä‘áº§y (sáº½ bá»‹ cháº·n)
						System.out.println("Trying to add 4...");
						queue.put(4); // Chá» Ä‘áº¿n khi cÃ³ chá»— trá»‘ng
					} catch (InterruptedException e) {
						e.printStackTrace();
					}
	


	## VÃ­ dá»¥ vá»›i bÃ i toÃ n Producer-Consumer vá»›i LinkecBlockingQueue
			Má»™t luá»“ng producer thÃªm pháº§n tá»­ vÃ o queue.
			Má»™t luá»“ng consumer láº¥y pháº§n tá»­ tá»« queue.


		
			import java.util.concurrent.LinkedBlockingQueue;
			
			public class ProducerConsumerExample {
				public static void main(String[] args) {
					LinkedBlockingQueue<Integer> queue = new LinkedBlockingQueue<>(3);
			
					// Luá»“ng producer
					Thread producer = new Thread(() -> {
						try {
							for (int i = 1; i <= 5; i++) {
								System.out.println("Producer: Adding " + i);
								queue.put(i); // Cháº·n náº¿u queue Ä‘áº§y
								System.out.println("Producer: " + i + " added");
							}
						} catch (InterruptedException e) {
							Thread.currentThread().interrupt();
						}
					});
			
					// Luá»“ng consumer
					Thread consumer = new Thread(() -> {
						try {
							while (true) {
								Thread.sleep(1000); // Giáº£ láº­p xá»­ lÃ½ lÃ¢u
								Integer item = queue.take(); // Cháº·n náº¿u queue rá»—ng
								System.out.println("Consumer: Consumed " + item);
							}
						} catch (InterruptedException e) {
							Thread.currentThread().interrupt();
						}
					});
			
					producer.start();
					consumer.start();
				}
			}




# 5. So sÃ¡nh ArrayBlockingQueue vÃ  LinkedBlockingQueue

	Äáº·c Ä‘iá»ƒm						ArrayBlockingQueue								LinkedBlockingQueue
	Cáº¥u trÃºc dá»¯ liá»‡u				Sá»­ dá»¥ng máº£ng cá»‘ Ä‘á»‹nh							Sá»­ dá»¥ng danh sÃ¡ch liÃªn káº¿t
	KÃ­ch thÆ°á»›c						Báº¯t buá»™c pháº£i Ä‘áº·t kÃ­ch thÆ°á»›c khi khá»Ÿi táº¡o		CÃ³ thá»ƒ Ä‘áº·t hoáº·c khÃ´ng Ä‘áº·t kÃ­ch thÆ°á»›c
	Hiá»‡u suáº¥t						Hiá»‡u suáº¥t cao hÆ¡n vá»›i kÃ­ch thÆ°á»›c nhá»			Hiá»‡u suáº¥t tá»‘t hÆ¡n khi lÃ m viá»‡c vá»›i kÃ­ch thÆ°á»›c lá»›n
	




# 6. Khi nÃ o nÃªn sá»­ dá»¥ng LinkedBlockingQueue
	
	- Khi cáº§n má»™t queue cÃ³ kÃ­ch thÆ°á»›c linh hoáº¡t 
	- Khi muá»‘n xá»­ lÃ½ cÃ´ng viá»‡c trong cÃ¡c há»‡ thá»‘ng Ä‘a luá»“ng mÃ  producer vÃ  consumer hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p 
	- Khi queue cÃ³ thá»ƒ chá»©a nhiá»u pháº§n tá»­ mÃ  báº¡n khÃ´ng muá»‘n giá»›i háº¡n cá»©ng 

</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';document.body.className = mode; localStorage.setItem('theme', mode);syncTheme();}function applyTheme() {let savedTheme = localStorage.getItem('theme') || 'dark-mode';document.body.className = savedTheme;syncTheme();}function syncTheme() {let preElement = document.querySelector('pre');if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {let contentHeight = document.body.scrollHeight;let windowHeight = window.innerHeight;if (contentHeight > windowHeight * 1.2) {document.getElementById('backBottom').style.display = 'block';} else {document.getElementById('backBottom').style.display = 'none';}}</script></body></html>