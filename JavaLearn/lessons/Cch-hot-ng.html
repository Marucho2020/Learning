<html><head><title>CÃ¡ch hoáº¡t Ä‘á»™ng</title></head><body><h1>CÃ¡ch hoáº¡t Ä‘á»™ng</h1><pre>				
	Khi má»™t servlet implement SingleThreadModel, server cÃ³ hai cÃ¡ch xá»­ lÃ½ request:

	Táº¡o má»™t instance servlet má»›i cho má»—i request.
	DÃ¹ng má»™t pool servlet instance Ä‘á»ƒ xá»­ lÃ½ nhiá»u request song song.
	ğŸ’¡ LÃ½ do: Servlet báº£n cháº¥t lÃ  Ä‘a luá»“ng (multi-threaded), náº¿u nhiá»u request Ä‘áº¿n cÃ¹ng lÃºc, cÃ³ thá»ƒ gÃ¢y ra váº¥n Ä‘á» race condition náº¿u servlet cÃ³ biáº¿n instance chung


	## ğŸ“Œ VÃ­ dá»¥: Servlet khÃ´ng thread-safe 
		@WebServlet("/unsafe")
		public class UnsafeServlet extends HttpServlet {
			private int counter = 0;  // Biáº¿n instance dÃ¹ng chung
		
			protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
				counter++;  // CÃ³ thá»ƒ bá»‹ ghi Ä‘Ã¨ bá»Ÿi nhiá»u luá»“ng khÃ¡c nhau!
				resp.getWriter().println("Counter: " + counter);
			}
		}
		
			âš  Lá»—i cÃ³ thá»ƒ xáº£y ra: 
			Náº¿u 2 request cháº¡y song song, biáº¿n counter cÃ³ thá»ƒ bá»‹ ghi Ä‘Ã¨ khÃ´ng mong muá»‘n, dáº«n Ä‘áº¿n bug dá»¯ liá»‡u.
			
			
			
	## 		ğŸ“Œ DÃ¹ng SingleThreadModel Ä‘á»ƒ trÃ¡nh lá»—i trÃªn 
			@WebServlet("/safe")
			public class SafeServlet extends HttpServlet implements SingleThreadModel {
				private int counter = 0;  // Biáº¿n instance khÃ´ng bá»‹ truy cáº­p Ä‘á»“ng thá»i
			
				protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
					counter++;  
					resp.getWriter().println("Counter: " + counter);
				}
			}

			ğŸš€ LÃºc nÃ y, má»—i request cÃ³ má»™t instance servlet riÃªng, trÃ¡nh Ä‘Æ°á»£c lá»—i Ä‘á»“ng bá»™ hÃ³a.
			
			
</pre></body></html>