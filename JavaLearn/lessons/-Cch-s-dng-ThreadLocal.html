<html><head><title>ðŸ”¹ CÃ¡ch sá»­ dá»¥ng ThreadLocal</title></head><body><h1>ðŸ”¹ CÃ¡ch sá»­ dá»¥ng ThreadLocal</h1><pre>
		## ðŸ“Œ DÃ¹ng ThreadLocal Ä‘á»ƒ lÆ°u biáº¿n user cho tá»«ng request

			public class UserContext {
				private static final ThreadLocal<String> currentUser = ThreadLocal.withInitial(() -> "Guest");
			
				public static void setUser(String user) {
					currentUser.set(user);
				}
			
				public static String getUser() {
					return currentUser.get();
				}
			
				public static void clear() {
					currentUser.remove(); // Giáº£i phÃ³ng tÃ i nguyÃªn trÃ¡nh memory leak
				}
			}


		## ðŸ“Œ CÃ¡ch sá»­ dá»¥ng ThreadLocal trong servlet 
			@WebServlet("/threadlocal")
			public class ThreadLocalServlet extends HttpServlet {
				protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
					String user = req.getParameter("user");
					UserContext.setUser(user); // LÆ°u user vÃ o ThreadLocal
			
					resp.getWriter().println("Current User: " + UserContext.getUser());
			
					UserContext.clear(); // XÃ³a sau khi dÃ¹ng Ä‘á»ƒ trÃ¡nh memory leak
				}
			}
			

</pre></body></html>