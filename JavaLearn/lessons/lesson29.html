<html><head><title>Lession 29  String Pool //</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px; white-space: pre-wrap; transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 3em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 2em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lession 29  String Pool //</h1><pre># KhÃ¡i niá»‡m 
	String Pool (cÃ²n gá»i lÃ  String Intern Pool) lÃ  má»™t vÃ¹ng nhá»› Ä‘áº·c biá»‡t trong heap memory cá»§a JVM , nÆ¡i lÆ°u trá»¯ cÃ¡c chuá»—i báº¥t biáº¿n(immutable)
	
	Khi báº¡n khai bÃ¡o má»™t chuá»—i báº±ng string literal (Chuá»—i trá»±c tiáº¿p trong dáº¥u ""), Java sáº½ kiá»ƒm tra xem chuá»—i Ä‘Ã³ cÃ³ tá»“n táº¡i trong String Pool hay chÆ°a 
	
		- Náº¿u cÃ³, nÃ³ sáº½ tÃ¡i sá»­ dá»¥ng chuá»—i cÅ© Ä‘á»ƒ tiáº¿t kiá»‡m bá»™ nhá»› 
		- Náº¿u chÆ°a, Java sáº½ táº¡o chuá»—i má»›i vÃ  Ä‘Æ°a nÃ³ vÃ o String Pool 
		
		
	- Tá»©c lÃ  khi táº¡o chuá»—i báº±ng string literal(chuá»—i gÃ¡n trá»±c tiáº¿p vÃ o biáº¿n trong dáº¥u "") , thÃ¬ lÃºc nÃ y chuá»—i khÃ´ng Ä‘Æ°á»£c khá»Ÿi táº¡o trong bá»™ nhá»› heap giá»‘ng cÃ¡c object bÃ¬nh thÆ°á»ng mÃ  Ä‘Æ°á»£c thÃªm vÃ o má»™t há»“ bÆ¡i(pool) Ä‘á»ƒ cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng láº¡i cho nhá»¯ng vá»‹ trÃ­ khÃ¡c trong chÆ°Æ¡ng trÃ¬nh muá»‘n tÃ¡i sá»­ dá»¥ng táº¡i Ä‘á»ƒ tiáº¿t kiá»‡m bá»™ nhá»› . LÃºc nÃ y náº¿u 2 biáº¿n string Ä‘Æ°á»£c khá»Ÿi táº¡o báº±ng string literal cÃ³ cÃ¹ng chuá»—i string thÃ¬ so sÃ¡nh == vá»›i chÃºng sáº½ tráº£ vá» true. CÃ²n khi khá»Ÿi táº¡o báº±ng tá»« khÃ³a new String("XXX") thÃ¬ nÃ³ khÃ´ng Ä‘Æ°á»£c thÃªm vÃ o pool mÃ  táº¡o nhÆ° má»™t object bÃ¬nh thÆ°á»ng vÃ  khÃ´ng thá»ƒ sá»­ dá»¥ng == Ä‘á»ƒ so sÃ¡nh mÃ  pháº£i dÃ¹ng equals() 

	- Hoáº·c cÃ³ thá»ƒ sá»­ dá»¥ng phÆ°Æ¡ng thá»©c str.intern() : Ä‘á»ƒ Ä‘Æ°a chuá»—i string nÃ y vÃ o pool , khi Ä‘Ã³ nÃ³ sáº½ Ä‘Æ°á»£c lÆ°u á»Ÿ há»“ bÆ¡i string chá»© k Ä‘Æ°á»£c lÆ°u á»Ÿ heap ná»¯a 
		
		
	### VÃ­ dá»¥  
	public static void main(String[] args) {
        String s1 = "hello"; // Táº¡o chuá»—i "hello" trong String Pool
        String s2 = "hello"; // s2 trá» Ä‘áº¿n cÃ¹ng má»™t chuá»—i trong String Pool

        System.out.println(s1 == s2); // true (CÃ¹ng tham chiáº¿u Ä‘áº¿n má»™t Ä‘á»‘i tÆ°á»£ng)
    }
	
	!!! LÆ°u Ã½ : Khi dÃ¹ng toÃ¡n tá»­ ==, Java sáº½ kiá»ƒm tra xem hai biáº¿n cÃ³ cÃ¹ng tham chiáº¿u Ä‘áº¿n cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng trong bá»™ nhá»› hay khÃ´ng 

# Táº¡o chuá»—i báº±ng tá»« khÃ³a new(KhÃ´ng dÃ¹ng String pool) 
	Khi dÃ¹ng new String() . Java luÃ´n luÃ´n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i trÃªn heap, ngay cáº£ khi chuá»—i Ä‘Ã£ tá»“n táº¡i trong String Pool 
	
	public class StringHeapExample {
		public static void main(String[] args) {
			String s1 = "hello";          // Chuá»—i "hello" trong String Pool
			String s2 = new String("hello"); // LuÃ´n táº¡o Ä‘á»‘i tÆ°á»£ng má»›i trÃªn Heap
	
			System.out.println(s1 == s2); // false (s1 vÃ  s2 tham chiáº¿u hai Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau)
		}
	}
	
	!!! S1 trá» Ä‘áº¿n chuá»—i trong String Pool , cÃ²n s2 lÃ  má»™t Ä‘á»‘i tÆ°á»£ng riÃªng biá»‡t trÃªn heap 


# str.intern() - ÄÆ°a chuá»—i vÃ o String Pool 
		
	## PhÆ°Æ¡ng thá»©c str.intern() sáº½ : 
		Kiá»ƒm tra chuá»—i Ä‘Ã£ tá»“n táº¡i trong String Pool chÆ°a 
		
			### Náº¿u cÃ³ : Tráº£ vá» tham chiáº¿u Ä‘áº¿n chuá»—i String Pool , LÃºc nÃ y cÃ¡c String cÃ¹ng tham chiáº¿u Ä‘áº¿n 1 vá»‹ trÃ­ trong string pool sáº½ cÃ³ vÃ¹ng nhá»› giá»‘ng nhau vÃ  so sÃ¡nh == Ä‘Æ°á»£c 
			
			### Náº¿u khÃ´ng : ThÃªm chuá»—i Ä‘Ã³ vÃ o String Pool vÃ  tráº£ vá» tham chiáº¿u Ä‘Ã³  
			
			
			
	### VÃ­ dá»¥  
	
		public class StringInternExample {
			public static void main(String[] args) {
				String s1 = new String("hello");  // Táº¡o Ä‘á»‘i tÆ°á»£ng má»›i trÃªn heap
				String s2 = s1.intern();          // ÄÆ°a vÃ o String Pool
		
				System.out.println(s1 == s2); // false (s1 váº«n lÃ  Ä‘á»‘i tÆ°á»£ng riÃªng trÃªn heap)
				System.out.println(s2 == "hello"); // true (s2 giá» trá» Ä‘áº¿n String Pool)
			}
		}



# á»¨ng dá»¥ng cá»§a intern() trong tá»‘i Æ°u bá»™ nhá»› 
	Náº¿u báº¡n cÃ³ nhiá»u chuá»—i giá»‘ng nhau mÃ  Ä‘Æ°á»£c táº¡o báº±ng new String(), chÃºng sáº½ chiáº¿m nhiá»u bá»™ nhá»› khÃ´ng cáº§n thiáº¿t. intern() giÃºp tiáº¿t kiá»‡m bá»™ nhá»› báº±ng cÃ¡ch chia sáº» tham chiáº¿u trong String Pool 
	
	public class StringOptimization {
		public static void main(String[] args) {
			String[] words = new String[1000];
	
			for (int i = 0; i < 1000; i++) {
				words[i] = new String("optimize").intern(); // Chá»‰ cÃ³ 1 Ä‘á»‘i tÆ°á»£ng trong String Pool
			}
	
			System.out.println(words[0] == words[999]); // true
		}
	}
	Káº¿t quáº£: Táº¥t cáº£ 1000 chuá»—i "optimize" sáº½ dÃ¹ng chung má»™t vÃ¹ng nhá»› trong String Pool, thay vÃ¬ 1000 Ä‘á»‘i tÆ°á»£ng riÃªng láº».


#  So sÃ¡nh == vs. equals() vá»›i String

			ToÃ¡n tá»­					Chá»©c nÄƒng									VÃ­ dá»¥							Káº¿t quáº£
			==					So sÃ¡nh Ä‘á»‹a chá»‰ bá»™ nhá»› (tham chiáº¿u)			"abc" == "abc"						âœ… true
			==					So sÃ¡nh Ä‘á»‹a chá»‰ khÃ¡c nhau					new String("abc") == "abc"			âŒ false
			equals()			So sÃ¡nh giÃ¡ trá»‹ cá»§a chuá»—i					new String("abc").equals("abc")		âœ… true

	
	
	
	
	public class StringComparison {
		public static void main(String[] args) {
			String s1 = new String("Java");
			String s2 = "Java";
			String s3 = s1.intern();
	
			System.out.println(s1 == s2); // false (s1 trÃªn heap, s2 trong String Pool)
			System.out.println(s3 == s2); // true (s3 vÃ  s2 Ä‘á»u trong String Pool)
			System.out.println(s1.equals(s2)); // true (cÃ¹ng ná»™i dung)
		}
	}

# 	Khi nÃ o nÃªn dÃ¹ng intern()?
	
âœ… NÃªn dÃ¹ng khi:

Xá»­ lÃ½ nhiá»u chuá»—i trÃ¹ng láº·p Ä‘á»ƒ tiáº¿t kiá»‡m bá»™ nhá»›.
Khi muá»‘n kiá»ƒm tra == thay vÃ¬ equals() mÃ  khÃ´ng sá»£ sai.
Khi dÃ¹ng chuá»—i lÃ m key trong HashMap, Set, HashTable (tá»‘i Æ°u hiá»‡u suáº¥t).
âŒ KhÃ´ng nÃªn dÃ¹ng khi:

Khi khÃ´ng cáº§n tá»‘i Æ°u bá»™ nhá»› quÃ¡ má»©c.
Khi táº¡o nhiá»u chuá»—i cÃ³ ná»™i dung khÃ¡c nhau (vÃ¬ intern() cÅ©ng tá»‘n CPU Ä‘á»ƒ kiá»ƒm tra vÃ  thÃªm vÃ o String Pool).
	
</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';document.body.className = mode; localStorage.setItem('theme', mode);syncTheme();}function applyTheme() {let savedTheme = localStorage.getItem('theme') || 'dark-mode';document.body.className = savedTheme;syncTheme();}function syncTheme() {let preElement = document.querySelector('pre');if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {let contentHeight = document.body.scrollHeight;let windowHeight = window.innerHeight;if (contentHeight > windowHeight * 1.2) {document.getElementById('backBottom').style.display = 'block';} else {document.getElementById('backBottom').style.display = 'none';}}</script></body></html>