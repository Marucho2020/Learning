<html><head><title>Lession 22  ArrayBlockingQueue //</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px; white-space: pre-wrap; transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 3em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 2em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lession 22  ArrayBlockingQueue //</h1><pre># 1. KhÃ¡i niá»‡m  
	Array BlockingQueue lÃ  má»™t trong nhá»¯ng cÃ i Ä‘áº·t phá»• biáº¿n cá»§a BlockingQueue trong Java. NÃ³ ráº¥t quan trá»ng trong viá»‡c quáº£n lÃ½ luá»“ng dá»¯ liá»‡u trong cÃ¡c á»©ng dá»¥ng Ä‘a luá»“ng, Ä‘áº·c biá»‡t khi lÃ m viá»‡c vá»›i bÃ i toÃ¡n Producer-Comsumer(NhÃ  sáº£n xuáº¥t vÃ  ngÆ°á»i tiÃªu dÃ¹ng )
	
	ArrayBlockingQueue lÃ  má»™t hÃ n Ä‘á»£i(queue) tuáº§n tá»±, cÃ³ kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh Ä‘Æ°á»£c cÃ i Ä‘áº·t dá»±a trÃªn máº£ng array. Khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng ArrayBlockingQueue, báº¡n pháº£i chá»‰ Ä‘á»‹nh dung lÆ°á»£ng tá»‘i Ä‘a cá»§a nÃ³ ngay tá»« Ä‘áº§u. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  nÃ³ khÃ´ng thá»ƒ má»Ÿ rá»™ng hoáº·c thu háº¹p kÃ­ch thÆ°á»›c sau khi Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi táº¡o. 
	
# 2. Äáº·c Ä‘iá»ƒm cá»§a ArrayBlockingQueue 
	## 1. KÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh : 
	Dung lÆ°á»£ng cá»§a hÃ ng Ä‘á»£i Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh khi táº¡o, vÃ  khÃ´ng thá»ƒ thay Ä‘á»•i sau Ä‘Ã³. 
	
	#Há»— trá»£ Ä‘á»“ng bá»™ hÃ³a 
		- HÃ ng Ä‘á»£i sá»­ dá»¥ng cÆ¡ cháº¿ khÃ³a(lock) Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n khi truy cáº­p trong mÃ´i trÆ°á»ng Ä‘a luá»“ng 
		- Khi má»™t luá»“ng thá»±c hiá»‡n thao tÃ¡c thÃªm(put) hoáº·c láº¥y (take), cÃ¡c luá»“ng khÃ¡c sáº½ bá»‹ cháº·n cho Ä‘áº¿n khi thao tÃ¡c hoÃ n táº¥t. 
		
	## FIFO 
		- CÃ¡c pháº§n tá»­ Ä‘Æ°á»£c xá»­ lÃ½ theo thá»© tá»± chÃºng Ä‘Æ°á»£c thÃªm vÃ o hÃ ng Ä‘á»£i 
		
	# Hai khÃ³a : (Two-lock queue)
		ArrayBlockingQueue sá»­ dá»¥ng hai loáº¡i khÃ³a Ä‘á»ƒ Ä‘Ã´ng bá»™ hÃ³a:
			Má»™t cho thao tÃ¡c thÃªm pháº§n tá»­(enqueue)
			Má»™t cho thao tÃ¡c láº¥y pháº§n tá»­(dequeue)
	# Há»— trá»£ cháº·n (Blocking )
		- Náº¿u hÃ ng Ä‘á»£i Ä‘áº§y, cÃ¡c luá»“ng cá»‘ gáº¯ng thÃªm pháº§n tá»­ sáº½ bá»‹ cháº·n cho Ä‘áº¿n khi cÃ³ khÃ´ng gian trá»‘ng. 
		- Náº¿u hÃ ng Ä‘á»£i rá»—ng, cÃ¡c luá»“ng cá»‘ gáº¯ng láº¥y pháº§n tá»­ sáº½ bá»‹ cháº·n cho Ä‘áº¿n khi cÃ³ pháº§n tá»­ Ä‘Æ°á»£c thÃªm vÃ o 


# 3.CÃ¡c phÆ°Æ¡ng thá»©c quan trá»ng cá»§a ArrayBlockingQueue 

	offer(E e)               : Cá»‘ gáº¯ng thÃªm pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i, náº¿u thÃ nh cÃ´ng tráº£ vá» true, false náº¿u hÃ ng Ä‘á»£i Ä‘Ã£ Ä‘áº§y 
	put(E e)                 : ThÃªm pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i, Náº¿u hÃ ng Ä‘á»£i Ä‘áº§y, luá»“ng sáº½ bá»‹ cháº·n cho Ä‘áº¿n khi cÃ³ khÃ´ng gian trá»‘ng 
	poll()                   : Láº¥y pháº§n tá»­ Ä‘áº§u tiÃªn ra khá»i hÃ ng Ä‘á»£i, nhÆ°ng khÃ´ng cháº·n , tráº£ vá» null náº¿u hÃ ng Ä‘á»£i rá»—ng 
	take                     : Láº¥y pháº§n tá»­ Ä‘áº§u tiÃªn ra khá»i hÃ ng Ä‘á»£i, náº¿u hÃ ng Ä‘á»£i rá»—ng, luá»“ng sáº½ bá»‹ cháº·n cho Ä‘áº¿n khi cÃ³ pháº§n tá»­ 
	remainingCapacity()      : Tráº£ vá» sá»‘ lÆ°á»£ng pháº§n tá»­ kiá»ƒu int cÃ³ thá»ƒ thÃªm vÃ o hÃ ng Ä‘á»£i 
	contais(Object o)        : Kiá»ƒm tra xem má»™t pháº§n tá»­ cÃ³ tá»“n táº¡i trong hÃ ng Ä‘á»£i hay khÃ´ng 
	
	
# 4. VÃ­ dá»¥ sá»­ dá»¥ng ArrayBlockingQueue 
	1. BÃ i toÃ¡n Producer-Comsumer Example 
					import java.util.concurrent.ArrayBlockingQueue;
					import java.util.concurrent.BlockingQueue;
					
					// NhÃ  sáº£n xuáº¥t
					class Producer implements Runnable {
						private BlockingQueue<Integer> queue;
					
						public Producer(BlockingQueue<Integer> queue) {
							this.queue = queue;
						}
					
						@Override
						public void run() {
							try {
								for (int i = 1; i <= 10; i++) {
									System.out.println("Producer: Producing item " + i);
									queue.put(i); // ThÃªm pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i (cháº·n náº¿u Ä‘áº§y)
									Thread.sleep(500); // Giáº£ láº­p thá»i gian sáº£n xuáº¥t
								}
							} catch (InterruptedException e) {
								Thread.currentThread().interrupt();
							}
						}
					}
					
					// NgÆ°á»i tiÃªu dÃ¹ng
					class Consumer implements Runnable {
						private BlockingQueue<Integer> queue;
					
						public Consumer(BlockingQueue<Integer> queue) {
							this.queue = queue;
						}
					
						@Override
						public void run() {
							try {
								while (true) {
									Integer item = queue.take(); // Láº¥y pháº§n tá»­ tá»« hÃ ng Ä‘á»£i (cháº·n náº¿u rá»—ng)
									System.out.println("Consumer: Consuming item " + item);
									Thread.sleep(1000); // Giáº£ láº­p thá»i gian tiÃªu thá»¥
								}
							} catch (InterruptedException e) {
								Thread.currentThread().interrupt();
							}
						}
					}
					
					public class ArrayBlockingQueueExample {
						public static void main(String[] args) {
							// Táº¡o hÃ ng Ä‘á»£i cÃ³ kÃ­ch thÆ°á»›c tá»‘i Ä‘a lÃ  5
							BlockingQueue<Integer> queue = new ArrayBlockingQueue<>(5);
					
							Thread producerThread = new Thread(new Producer(queue));
							Thread consumerThread = new Thread(new Consumer(queue));
					
							producerThread.start();
							consumerThread.start();
						}
					}

			// Giáº£i thÃ­ch vÃ­ dá»¥:
				HÃ ng Ä‘á»£i cÃ³ kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh lÃ  5:
				
				Náº¿u nhÃ  sáº£n xuáº¥t cá»‘ gáº¯ng thÃªm pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i khi Ä‘áº§y, nÃ³ sáº½ bá»‹ cháº·n.
				Náº¿u ngÆ°á»i tiÃªu dÃ¹ng cá»‘ gáº¯ng láº¥y pháº§n tá»­ khi hÃ ng Ä‘á»£i rá»—ng, nÃ³ sáº½ bá»‹ cháº·n.
				Sá»± Ä‘á»“ng bá»™ hÃ³a tá»± Ä‘á»™ng:
				
				ArrayBlockingQueue quáº£n lÃ½ viá»‡c Ä‘á»“ng bá»™ hÃ³a giá»¯a nhÃ  sáº£n xuáº¥t vÃ  ngÆ°á»i tiÃªu dÃ¹ng, nÃªn báº¡n khÃ´ng cáº§n pháº£i sá»­ dá»¥ng tá»« khÃ³a synchronized thá»§ cÃ´ng.
				Káº¿t quáº£ Ä‘áº§u ra:
				
				NhÃ  sáº£n xuáº¥t thÃªm pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i, ngÆ°á»i tiÃªu dÃ¹ng láº¥y pháº§n tá»­ tá»« hÃ ng Ä‘á»£i theo thá»© tá»± FIFO.


# Æ¯u Ä‘iá»ƒm cá»§a ArrayBlockingQueue 
	#1. An toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng : 
		KhÃ´ng cáº§n xá»­ lÃ½ thá»­ cÃ´ng viá»‡c Ä‘á»“ng bá»™ hÃ³a giá»¯a cÃ¡c luá»“ng 
	# Äá»“ng bá»™ hÃ³a hiá»‡u quáº£ 
		Sá»­ dá»¥ng cÆ¡ cháº¿ khÃ³a tá»‘i Æ°u hÃ³a giÃºp giáº£m chi phÃ­ Ä‘á»“ng bá»™ 
	
	# ÄÆ¡n giáº£n vÃ  dá»… sá»­ dá»¥ng :
		API rÃµ rÃ ng vÃ  phÃ¹ há»£p cho nhiá»u bÃ i toÃ¡n trong láº­p trÃ¬nh Ä‘a luá»“ng 

	# Háº¡n cháº¿ tÃ i nguyÃªn 
		Giá»›i háº¡n dung lÆ°á»£ng giÃºp trÃ¡nh cÃ¡c váº¥n Ä‘á» nhÆ° sá»­ dá»¥ng quÃ¡ nhiá»u bá»™ nhá»› 
		
		
BÃ i táº­p thá»±c hÃ nh

BÃ i táº­p 1:
Táº¡o má»™t ArrayBlockingQueue vá»›i kÃ­ch thÆ°á»›c lÃ  3.
Viáº¿t chÆ°Æ¡ng trÃ¬nh Ä‘á»ƒ thÃªm 10 sá»‘ nguyÃªn vÃ o hÃ ng Ä‘á»£i báº±ng má»™t luá»“ng vÃ  láº¥y chÃºng ra báº±ng má»™t luá»“ng khÃ¡c.

BÃ i táº­p 2:
Thay Ä‘á»•i chÆ°Æ¡ng trÃ¬nh vÃ­ dá»¥ trÃªn Ä‘á»ƒ nhÃ  sáº£n xuáº¥t vÃ  ngÆ°á»i tiÃªu dÃ¹ng cÃ³ tá»‘c Ä‘á»™ khÃ¡c nhau. Quan sÃ¡t káº¿t quáº£ vÃ  giáº£i thÃ­ch táº¡i sao viá»‡c Ä‘á»“ng bá»™ hÃ³a váº«n Ä‘áº£m báº£o Ä‘Ãºng thá»© tá»±.

BÃ i táº­p 3:
Sá»­ dá»¥ng ArrayBlockingQueue Ä‘á»ƒ quáº£n lÃ½ cÃ¡c yÃªu cáº§u Ä‘áº¿n má»™t mÃ¡y chá»§ (nhÆ° HTTP requests) vÃ  phÃ¢n phá»‘i chÃºng cho má»™t nhÃ³m luá»“ng xá»­ lÃ½ (thread pool).		
		
		
		public static void main(String[] args){
			System.out.print(args.length);
		}
		
		
		
		
		
</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';document.body.className = mode; localStorage.setItem('theme', mode);syncTheme();}function applyTheme() {let savedTheme = localStorage.getItem('theme') || 'dark-mode';document.body.className = savedTheme;syncTheme();}function syncTheme() {let preElement = document.querySelector('pre');if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {let contentHeight = document.body.scrollHeight;let windowHeight = window.innerHeight;if (contentHeight > windowHeight * 1.2) {document.getElementById('backBottom').style.display = 'block';} else {document.getElementById('backBottom').style.display = 'none';}}</script></body></html>