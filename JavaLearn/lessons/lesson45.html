<html><head><title>Lession 45  Remote Interface & Remote Object //</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px; white-space: pre-wrap; transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }button { background: #03dac6; color: #121212; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lession 45  Remote Interface & Remote Object //</h1><pre>
//------------- Remote Interface -----------------//


# KhÃ¡i niá»‡m 
	- Remote Interface lÃ  má»™t interface trong Java mÃ  cÃ¡c object cÃ³ thá»ƒ gá»i tá»« xa .
	- ÄÃ³ng vai trÃ² há»£p Ä‘á»“ng(contract) giá»¯a Client vÃ  Server 
	- Má»i phÆ°Æ¡ng thá»©c trong Remote Interface pháº£i nÃ©m Remote Exception Ä‘á»ƒ xá»­ lÃ½ lá»—i máº¡ng. 
	- Remote Interface pháº£i káº¿ thá»«a java.rmi.Remote Ä‘á»ƒ trá»Ÿ thÃ nh má»™t Remote Object há»£p lá»‡. 
	
# CÃ¡ch táº¡o Remote Interface 


				import java.rmi.Remote;
				import java.rmi.RemoteException;
				
				// Remote Interface pháº£i káº¿ thá»«a Remote
				public interface Calculator extends Remote {
					int add(int a, int b) throws RemoteException;
					int subtract(int a, int b) throws RemoteException;
				}


			ğŸ“Œ Giáº£i thÃ­ch 
				Káº¿ thá»«a Remote -> Biáº¿n Interface nÃ y thÃ nh Remote Interface 
				CÃ¡c method nÃ©m Remote Exception -> vÃ¬ phÆ°Æ¡ng thá»©c gá»i tá»« xa cÃ³ thá»ƒ bá»‹ lá»—i máº¡ng. 
				
//-------------- Remote Object ------------------------/

# KhÃ¡i niá»‡m 
		- RemoteObject lÃ  Class thá»±c sá»± triá»ƒn khai Remote Interface 
		- NÃ³ cung cáº¥p thá»±c thi(implementaion) cho cÃ¡c phÆ°Æ¡ng thá»©c tá»« xa 
		- Pháº£i káº¿ thá»«a UnicastRemoteObject Ä‘á»ƒ cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i tá»« xa 
		
# CÃ¡ch táº¡o Remote Object  
					import java.rmi.server.UnicastRemoteObject;
					import java.rmi.RemoteException;
					
					// Lá»›p Remote Object pháº£i káº¿ thá»«a UnicastRemoteObject vÃ  implement Remote Interface
					public class CalculatorImpl extends UnicastRemoteObject implements Calculator {
					
						// Constructor pháº£i throw RemoteException
						public CalculatorImpl() throws RemoteException {
							super();
						}
					
						// Triá»ƒn khai phÆ°Æ¡ng thá»©c tá»« xa
						@Override
						public int add(int a, int b) throws RemoteException {
							return a + b;
						}
					
						@Override
						public int subtract(int a, int b) throws RemoteException {
							return a - b;
						}
					}
							


				ğŸ“Œ Giáº£i thÃ­ch  
					- Káº¿ thá»«a UnicastRemoteObject -> GiÃºp Object cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p tá»« xa 
					- Constructor pháº£i throws RemoteException -> Äáº£m báº£o xá»­ lá»¹ lá»—i máº¡ng khi táº¡o object 
					- Triá»ƒn khai cÃ¡c phÆ°Æ¡ng thá»©c tá»« Remote Interface -> Cung cáº¥p logic thá»±c táº¿ 
						



//---------------- RMI Registry ----------------------
# KhÃ¡i niá»‡m 
	- RMI Registry lÃ  má»™t dá»‹ch vá»¥ giÃºp Ä‘Äƒng kÃ½ vÃ  tÃ¬m kiáº¿m RemoteObject 
	- Server pháº£i Ä‘Äƒng kÃ½ RemoteObject vÃ o RMI Registry Ä‘á»ƒ Client cÃ³ thá»ƒ tÃ¬m tháº¥y
	
	

# CÃ¡ch Ä‘Äƒng kÃ½ Remote Obejct vÃ o RMI Registry 
	
				import java.rmi.registry.LocateRegistry;
				import java.rmi.registry.Registry;
				
				public class CalculatorServer {
					public static void main(String[] args) {
						try {
							// Táº¡o má»™t instance cá»§a Remote Object
							CalculatorImpl calculator = new CalculatorImpl();
				
							// Táº¡o RMI Registry trÃªn cá»•ng 1099
							Registry registry = LocateRegistry.createRegistry(1099);
				
							// ÄÄƒng kÃ½ Remote Object vá»›i tÃªn "CalculatorService"
							registry.rebind("CalculatorService", calculator);
				
							System.out.println("Calculator Server is running...");
						} catch (Exception e) {
							e.printStackTrace();
						}
					}
				}
				

			ğŸ“Œ Giáº£i thÃ­ch
				- LocateRegistry.createRegistry(1099) -> Táº¡o RMI Registry trÃªn cá»•ng 1099
				- registry.rebind("CalculatorService" , calculator) -> ÄÄƒng kÃ½ Remote Object vá»›i tÃªn CalculatorService
				- BÃ¢y giá», Client cÃ³ thá»ƒ tÃ¬m vÃ  gá»i CalculatorService tá»« xa 
				
				
		
//------------------ Client gá»i Remote Object -------------------------------

# VÃ­ dá»¥ Client káº¿t ná»‘i vÃ  gá»i phÆ°Æ¡ng thá»©c tá»« xa 

			import java.rmi.registry.LocateRegistry;
			import java.rmi.registry.Registry;
			
			public class CalculatorClient {
				public static void main(String[] args) {
					try {
						// Káº¿t ná»‘i Ä‘áº¿n RMI Registry trÃªn Server
						Registry registry = LocateRegistry.getRegistry("localhost", 1099);
			
						// TÃ¬m Remote Object vá»›i tÃªn "CalculatorService"
						Calculator calculator = (Calculator) registry.lookup("CalculatorService");
			
						// Gá»i phÆ°Æ¡ng thá»©c tá»« xa
						int result = calculator.add(10, 20);
						System.out.println("Result: " + result);
					} catch (Exception e) {
						e.printStackTrace();
					}
				}
			}
				
				
			ğŸ“Œ Giáº£i thÃ­ch
				- LocateRegistry.getRegistry("localhost" , 1099) -> Káº¿t ná»‘i Ä‘áº¿n RMI Registry 
				- registry.lookup(CalculatorService)		-> TÃ¬m kiáº¿m RemoteObject theo tÃªn
				- Gá»i calculator.add(10,20) -> Gá»i phÆ°Æ¡ng thá»©c tá»« xa trÃªn Server 
				
				
				

# TÃ³m táº¯t láº¡i cÃ¡c bÆ°á»›c  				

âœ… BÆ°á»›c 1: Táº¡o Remote Interface
âœ… BÆ°á»›c 2: Táº¡o Remote Objec
âœ… BÆ°á»›c 3: ÄÄƒng kÃ½ Remote Object vÃ o RMI Registry
âœ… BÆ°á»›c 4: Client tÃ¬m kiáº¿m vÃ  gá»i Remote Object		



# CÃ¡c cÃ¢u há»i thÆ°á»ng gáº·p 
â“ 	 1. Remote Interface báº¯t buá»™c pháº£i káº¿ thá»«a Remote khÃ´ng?
	âœ… CÃ³, náº¿u khÃ´ng káº¿ thá»«a Remote, nÃ³ khÃ´ng thá»ƒ hoáº¡t Ä‘á»™ng nhÆ° má»™t Remote Object.
	
â“ 2. Táº¡i sao Remote Object pháº£i káº¿ thá»«a UnicastRemoteObject?
	âœ… VÃ¬ UnicastRemoteObject giÃºp Java tá»± Ä‘á»™ng táº¡o Stub vÃ  Skeleton Ä‘á»ƒ giao tiáº¿p tá»« xa.
	
â“ 3. Táº¡i sao phÆ°Æ¡ng thá»©c trong Remote Interface pháº£i throw	
	âœ… VÃ¬ gá»i phÆ°Æ¡ng thá»©c tá»« xa cÃ³ thá»ƒ bá»‹ lá»—i máº¡ng, máº¥t káº¿t ná»‘i, nÃªn pháº£i xá»­ lÃ½ ngoáº¡i lá»‡.
	
â“ 4. Client vÃ  Server cÃ³ thá»ƒ cháº¡y trÃªn hai mÃ¡y khÃ¡c nhau khÃ´ng?	
	âœ… ÄÆ°á»£c! Chá»‰ cáº§n Server má»Ÿ cá»•ng 1099 vÃ  Client nháº­p Ä‘Ãºng IP cá»§a Server.


# So sÃ¡nh giá»¯a Java RMI vÃ  Rest API 
TiÃªu chÃ­							Java RMI															REST API
MÃ´ hÃ¬nh						RPC (Remote Procedure Call)										RESTful (Stateless, Resource-Oriented)
Giao thá»©c					RMI dá»±a trÃªn Java Object Serialization vÃ  TCP/IP				HTTP (GET, POST, PUT, DELETE)
NgÃ´n ngá»¯ há»— trá»£				Chá»‰ hoáº¡t Ä‘á»™ng vá»›i Java											Äa ná»n táº£ng (Java, Python, JS, C#...)
Kiáº¿n trÃºc					Client - Server vá»›i RMI Registry								RESTful API (Client - Server)
Truyá»n dá»¯ liá»‡u				DÃ¹ng Java Object Serialization (Stub/Skeleton)					JSON, XML
TÃ­nh linh hoáº¡t				Cháº·t cháº½, yÃªu cáº§u cáº£ Client vÃ  Server pháº£i dÃ¹ng Java			Linh hoáº¡t, cÃ³ thá»ƒ tÃ­ch há»£p vá»›i nhiá»u ná»n táº£ng
Hiá»‡u suáº¥t					Nhanh hÆ¡n trong mÃ´i trÆ°á»ng Java									CÃ³ thá»ƒ bá»‹ cháº­m do HTTP overhead
Báº£o máº­t						Cáº§n cáº¥u hÃ¬nh Security Manager vÃ  Policy							DÃ¹ng HTTPS, OAuth, JWT dá»… triá»ƒn khai hÆ¡n	


ğŸ† 3. Khi nÃ o nÃªn dÃ¹ng Java RMI vÃ  REST API?
TÃ¬nh huá»‘ng								Chá»n Java RMI		Chá»n REST API
á»¨ng dá»¥ng Java ná»™i bá»™						âœ…					âŒ
Há»‡ thá»‘ng Microservices						âŒ					âœ…
Giao tiáº¿p giá»¯a cÃ¡c á»©ng dá»¥ng Java			âœ…					âŒ
API cho Web/Mobile							âŒ					âœ…
á»¨ng dá»¥ng Ä‘Ã²i há»i hiá»‡u suáº¥t cao				âœ…					âŒ
Há»‡ thá»‘ng phÃ¢n tÃ¡n Ä‘a ná»n táº£ng				âŒ					âœ…




//-------------------------- Stub vÃ  Reflection API 

# KhÃ¡i niá»‡m 
	Java RMI (Remote Method Invocation) sá»­ dá»¥ng Stub (Client Proxy) vÃ  Reflection API Ä‘á»ƒ thá»±c hiá»‡n gá»i phÆ°Æ¡ng thá»©c tá»« xa má»™t cÃ¡ch trong suá»‘t 
	
		- Stub : ÄÃ³ng vai trÃ² trung gian giÃºp Client gá»­i yÃªu cáº§u Ä‘áº¿n Server 
		- Reflection API : GiÃºp Server gá»i phÆ°Æ¡ng thá»©c trÃªn Object tháº­t mÃ  khÃ´ng cáº§n Skeleton (tá»« Java 1.2 trá»Ÿ Ä‘i)
		
	## Stub (Client Proxy)
		LÃ  má»™t Ä‘á»‘i tÆ°á»£ng Ä‘áº¡i diá»‡n cho Server á»Ÿ phÃ­a Client. Khi Client gá»i má»™t phÆ°Æ¡ng thá»©c tá»« xa, nÃ³ thá»±c cháº¥t lÃ  Ä‘ang gá»i Stub, Stub sáº½ : 
			- ÄÃ³ng gÃ³i(Marshalling) dá»¯ liá»‡u vÃ o luá»“ng byte 
			- Gá»­i dá»¯ liá»‡u Server qua máº¡ng 
			- Nháº­n pháº£n há»“i tá»« server, giáº£i mÃ£(Unmarshalling) vÃ  tráº£ káº¿t quáº£ cho Client
			
		Stub giÃºp Client gá»i phÆ°Æ¡ng thá»©c tá»« xa mÃ  khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n máº¡ng vÃ  dá»¯ liá»‡u truyá»n táº£i  
		
# Reflection API thay tháº¿ Skeleton nhÆ° tháº¿ nÃ o ? 
	
	- Skeleton chá»©a mÃ£ sinh sáºµn Ä‘á»ƒ nháº­n yÃªu cáº§u vÃ  gá»i phÆ°Æ¡ng thá»©c tá»« xa 
	- Java 1.2 thay tháº¿ Skeleton báº±ng Reflection API, giÃºp Server tá»± Ä‘á»™ng gá»i Ä‘Ãºng phÆ°Æ¡ng thá»©c mÃ  khÃ´ng cáº§n Skeleton 
	- Reflection API giÃºp Server cÃ³ thá»ƒ gá»i báº¥t ká»³ phÆ°Æ¡ng thá»©c nÃ o cá»§a Object mÃ  khÃ´ng cáº§n mÃ£ sinh sáºµn  
	
# VÃ­ dá»¥ vá» Java RMI vá»›i Stub & Reflection API 	
		

	##ğŸ“Œ BÆ°á»›c 1 : Táº¡o Remote Interface 
	
		public interface Calculator extends Remote {
			int add(int a, int b) throws RemoteException;
		}
		
		###  Äiá»ƒm quan trá»ng: 
			Giao diá»‡n pháº£i káº¿ thá»«a Remote Ä‘á»ƒ trá»Ÿ thÃ nh Remote Interface.
			PhÆ°Æ¡ng thá»©c pháº£i khai bÃ¡o throws RemoteException Ä‘á»ƒ xá»­ lÃ½ lá»—i máº¡ng




	##ğŸ“Œ BÆ°á»›c 2: CÃ i Ä‘áº·t Remote Object trÃªn Server 
		
			import java.rmi.server.UnicastRemoteObject;
			import java.rmi.RemoteException;
			
			public class CalculatorImpl extends UnicastRemoteObject implements Calculator {
				protected CalculatorImpl() throws RemoteException {
					super();
				}
			
				public int add(int a, int b) throws RemoteException {
					return a + b;
				}
			}
			
			
			
				###  Äiá»ƒm quan trá»ng: 
					Káº¿ thá»«a UnicastRemoteObject, giÃºp tá»± Ä‘á»™ng táº¡o Stub cho Client.
					KhÃ´ng cáº§n Skeleton vÃ¬ Server sáº½ sá»­ dá»¥ng Reflection API Ä‘á»ƒ gá»i add().
					




	## ğŸ“Œ BÆ°á»›c 3: Táº¡o Server vÃ  ÄÄƒng kÃ½ Object vá»›i RMI Registry
		

			import java.rmi.registry.LocateRegistry;
			import java.rmi.registry.Registry;
			
			public class Server {
				public static void main(String[] args) {
					try {
						Calculator calculator = new CalculatorImpl();
						Registry registry = LocateRegistry.createRegistry(1099);
						registry.rebind("CalculatorService", calculator);
						System.out.println("Server is running...");
					} catch (Exception e) {
						e.printStackTrace();
					}
				}
			}

			### ğŸ“Œ Äiá»ƒm quan trá»ng  
			
				Táº¡o Ä‘á»‘i tÆ°á»£ng tá»« xa (CalculatorImpl).
				ÄÄƒng kÃ½ nÃ³ vÃ o RMI Registry vá»›i tÃªn "CalculatorService"


			
	
	## ğŸ“Œ BÆ°á»›c 4: Táº¡o Client Ä‘á»ƒ gá»i phÆ°Æ¡ng thá»©c tá»« xa 
			
				import java.rmi.registry.LocateRegistry;
				import java.rmi.registry.Registry;
				
				public class Client {
					public static void main(String[] args) {
						try {
							Registry registry = LocateRegistry.getRegistry("localhost", 1099);
							Calculator stub = (Calculator) registry.lookup("CalculatorService");
							int result = stub.add(5, 3);
							System.out.println("Káº¿t quáº£: " + result);
						} catch (Exception e) {
							e.printStackTrace();
						}
					}
				}

	
	
			## ğŸ“ŒÄiá»ƒm quan trá»ng:
			
				Láº¥y Stub tá»« RMI Registry vÃ  gá»i add().
				Stub tá»± Ä‘á»™ng gá»­i yÃªu cáº§u Ä‘áº¿n Server mÃ  Client khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n káº¿t ná»‘i máº¡ng.

	
	
	
# 	ğŸ¯ 4. Stub & Reflection API Hoáº¡t Äá»™ng NhÆ° Tháº¿ NÃ o?

	## ğŸ”¹ Khi Client gá»i stub.add(5,3), quÃ¡ trÃ¬nh diá»…n ra nhÆ° sau:
			1./ Client gá»i stub.add(5,3) trÃªn Stub.
			2./ Stub sá»­ dá»¥ng Reflection API Ä‘á»ƒ mÃ£ hÃ³a (Marshalling) dá»¯ liá»‡u vÃ  gá»­i Ä‘áº¿n Server.
			3./ Server nháº­n yÃªu cáº§u, dÃ¹ng Reflection API Ä‘á»ƒ xÃ¡c Ä‘á»‹nh phÆ°Æ¡ng thá»©c add() trÃªn Object thá»±c táº¿.
			4./ Server thá»±c thi CalculatorImpl.add(5,3), tráº£ vá» káº¿t quáº£.
			5./ Stub giáº£i mÃ£ (Unmarshalling) vÃ  tráº£ káº¿t quáº£ vá» Client.

	ğŸ“Œ Reflection API giÃºp Server gá»i phÆ°Æ¡ng thá»©c Ä‘á»™ng mÃ  khÃ´ng cáº§n Skeleton!
	
	
</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';document.body.className = mode; localStorage.setItem('theme', mode);syncTheme();}function applyTheme() {let savedTheme = localStorage.getItem('theme') || 'dark-mode';document.body.className = savedTheme;syncTheme();}function syncTheme() {let preElement = document.querySelector('pre');if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {let contentHeight = document.body.scrollHeight;let windowHeight = window.innerHeight;if (contentHeight > windowHeight * 1.2) {document.getElementById('backBottom').style.display = 'block';} else {document.getElementById('backBottom').style.display = 'none';}}</script></body></html>