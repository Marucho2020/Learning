<html><head><title>📌 Ví dụ cơ bản : Marshalling & Unmarshalling trong Java RMI</title></head><body><h1>📌 Ví dụ cơ bản : Marshalling & Unmarshalling trong Java RMI</h1><pre>
	## Bước 1 : Tạo Remote Interface
		
		import java.rmi.Remote;
		import java.rmi.RemoteException;
		
		// Remote Interface
		public interface AIService extends Remote {
			String analyzeText(String text) throws RemoteException;
		}

		### 📌 Giải thích:
			✅ extends Remote → Đánh dấu Interface là một dịch vụ từ xa.
			✅ throws RemoteException → Bắt buộc để xử lý lỗi mạng.



	
	
	## Bước 2: Implement Remote Object (Server)
	
			import java.rmi.server.UnicastRemoteObject;
			import java.rmi.RemoteException;
			
			public class AIServiceImpl extends UnicastRemoteObject implements AIService {
				protected AIServiceImpl() throws RemoteException {
					super();
				}
			
				@Override
				public String analyzeText(String text) {
					return "AI Analysis Result for: " + text.toUpperCase();
				}
			}
	
		
	
			### 📌 Marshalling & Unmarshalling xảy ra ở đây:
			✅ Khi Client gọi analyzeText(), dữ liệu được marshal thành byte-stream.
			✅ Trên Server, dữ liệu unmarshal về Object, xử lý xong trả kết quả về.	
	
	
	
	
	## Bước 3 : Đăng ký Object với RMI Registry 
	
				import java.rmi.registry.LocateRegistry;
				import java.rmi.registry.Registry;
				
				public class Server {
					public static void main(String[] args) {
						try {
							AIService service = new AIServiceImpl();
							Registry registry = LocateRegistry.createRegistry(1099);
							registry.rebind("AIService", service);
				
							System.out.println("Server is running...");
						} catch (Exception e) {
							e.printStackTrace();
						}
					}
				}

		### 📌 Giải thích:
			✅ LocateRegistry.createRegistry(1099) → Mở cổng để Client kết nối.
			✅ registry.rebind("AIService", service) → Đăng ký dịch vụ AIService.


	
	
	## Bước 4: Gọi Remote Object từ Client 
		import java.rmi.registry.LocateRegistry;
		import java.rmi.registry.Registry;
		
		public class Client {
			public static void main(String[] args) {
				try {
					Registry registry = LocateRegistry.getRegistry("localhost", 1099);
					AIService service = (AIService) registry.lookup("AIService");
		
					String result = service.analyzeText("hello world");
					System.out.println("Server Response: " + result);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
		}

		### 📌 Marshalling & Unmarshalling trong Client:
			✅ Client gửi analyzeText("hello world") → Marshalling thành byte-stream.
			✅ Server nhận byte-stream, Unmarshalling → Chuyển thành Object và xử lý.
			✅ Kết quả được gửi về Client qua quá trình Marshalling/Unmarshalling ngược lại.
	
	
	
	
	
</pre></body></html>