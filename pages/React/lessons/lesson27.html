<html><head><title>Lesson 27 == Forward ref ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../react-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 27 -- Forward ref -//</h1><pre>
# 1. What is forwardRef?
	forwardRef lÃ  hÃ m wrap component Ä‘á»ƒ nháº­n ref tá»« cha vÃ  forward (chuyá»ƒn tiáº¿p) nÃ³ Ä‘áº¿n DOM element hoáº·c component con. ThÆ°á»ng dÃ¹ng cho:

		- Focus input (vÃ­ dá»¥: tá»± Ä‘á»™ng focus sau mount).
		- Trigger animations (qua ref Ä‘á»ƒ gá»i play/pause).
		- Äo DOM elements (sá»­ dá»¥ng getBoundingClientRect).
		- TÃ­ch há»£p thÆ° viá»‡n bÃªn thá»© ba (nhÆ° Chart.js cáº§n canvas ref).

	Insight chuyÃªn gia: Ref trong React lÃ  cÃ¡ch escape hatch Ä‘á»ƒ imperative code. forwardRef giáº£i quyáº¿t váº¥n Ä‘á»: Component thÃ´ng thÆ°á»ng khÃ´ng nháº­n ref nhÆ° prop, nÃªn cáº§n forward Ä‘á»ƒ cha truy cáº­p con. Trong TypeScript, cáº§n khai bÃ¡o forwardRef vá»›i generics Ä‘á»ƒ type-safe (vÃ­ dá»¥: forwardRef<HTMLInputElement, Props>). Best practice: Chá»‰ dÃ¹ng khi declarative khÃ´ng Ä‘á»§; Æ°u tiÃªn state/props.


# 2. Basic Example: VÃ­ dá»¥ cÆ¡ báº£n


	- import { forwardRef, useRef } from 'react';: forwardRef Ä‘á»ƒ wrap, useRef Ä‘á»ƒ táº¡o ref object (cÃ³ .current lÆ°u giÃ¡ trá»‹).
	- const MyInput = forwardRef((props, ref) => ... );: HÃ m forwardRef nháº­n callback vá»›i 2 tham sá»‘: props (cÃ¡c prop thÃ´ng thÆ°á»ng) vÃ  ref (ref tá»« cha). Tráº£ vá» JSX vá»›i ref attached vÃ o element cáº§n (á»Ÿ Ä‘Ã¢y lÃ  <input>).
	- {...props}: Spread props Ä‘á»ƒ MyInput nháº­n cÃ¡c prop nhÆ° placeholder, value, v.v.
	- Trong App(): useRef() táº¡o ref, truyá»n vÃ o <MyInput ref={inputRef}>.
	- inputRef.current.focus(): .current chá»©a DOM node (input element), gá»i method focus() imperative.

	Insight chuyÃªn gia: VÃ­ dá»¥ nÃ y Ä‘Æ¡n giáº£n nhÆ°ng thá»±c táº¿: Useful cho form validation (focus error field) hoáº·c accessibility (focus sau dialog open). Lá»—i phá»• biáº¿n: QuÃªn forward ref dáº«n Ä‘áº¿n warning "Function components cannot be given refs". Trong functional components, ref chá»‰ forward náº¿u dÃ¹ng forwardRef. Scale lÃªn: Káº¿t há»£p useImperativeHandle Ä‘á»ƒ customize ref:

import { forwardRef, useRef, useImperativeHandle } from 'react';

const MyInput = forwardRef((props, ref) => {
  const inputRef = useRef();
  useImperativeHandle(ref, () => ({  // Expose chá»‰ method cáº§n
    focus: () => inputRef.current.focus(),
    clear: () => inputRef.current.value = ''
  }));
  return <input ref={inputRef} {...props} />;
});

	Cha gá»i inputRef.current.focus() hoáº·c .clear(). Äiá»u nÃ y giá»¯ encapsulation, trÃ¡nh expose toÃ n DOM.


# 3. Example Explained: Giáº£i thÃ­ch vÃ­ dá»¥

	Wrap component vá»›i forwardRef Ä‘á»ƒ nháº­n ref nhÆ° tham sá»‘ thá»© hai.
	Component con attach ref vÃ o DOM element.
	Cha sá»­ dá»¥ng ref Ä‘á»ƒ kiá»ƒm soÃ¡t con (nhÆ° focus).


Insight chuyÃªn gia: Trong class components, forwardRef khÃ´ng cáº§n vÃ¬ class nháº­n ref tá»± Ä‘á»™ng, nhÆ°ng functional components (máº·c Ä‘á»‹nh tá»« React 16+) cáº§n explicit forward. Trong libraries, forwardRef giÃºp reusable components (vÃ­ dá»¥: Button wrap <button> vá»›i ref). Performance: Ref khÃ´ng trigger re-render, nÃªn an toÃ n cho imperative actions. Test: DÃ¹ng Re


</pre><a id='backBottom' href='../react-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>