<html><head><title>Lesson 26 == useTransition ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../react-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 26 -- useTransition -//</h1><pre>
# 1. What is useTransition? 

	useTransition l√† m·ªôt hook gi√∫p qu·∫£n l√Ω hi·ªáu su·∫•t b·∫±ng c√°ch ph√¢n lo·∫°i c·∫≠p nh·∫≠t tr·∫°ng th√°i:

		- Urgent updates: C·∫≠p nh·∫≠t t·ª©c th√¨, v√≠ d·ª•: C·∫≠p nh·∫≠t gi√° tr·ªã input khi ng∆∞·ªùi d√πng g√µ.
		- Non-urgent updates (transitions): C·∫≠p nh·∫≠t c√≥ th·ªÉ tr√¨ ho√£n (nh∆∞ render danh s√°ch k·∫øt qu·∫£ search), kh√¥ng l√†m gi√°n ƒëo·∫°n tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.

	Hook tr·∫£ v·ªÅ:

		- isPending: Boolean, true khi transition ƒëang ch·∫°y.
		- startTransition: H√†m ƒë·ªÉ wrap c√°c c·∫≠p nh·∫≠t non-urgent.

		Insight chuy√™n gia: useTransition ho·∫°t ƒë·ªông d·ª±a tr√™n c∆° ch·∫ø priority scheduling c·ªßa React. Khi b·∫°n g·ªçi setState trong startTransition, React x·∫øp n√≥ v√†o h√†ng ƒë·ª£i th·∫•p h∆°n so v·ªõi c√°c c·∫≠p nh·∫≠t th√¥ng th∆∞·ªùng. ƒêi·ªÅu n√†y gi√∫p UI responsive trong c√°c t√¨nh hu·ªëng nh∆∞ search autocomplete, render danh s√°ch l·ªõn, ho·∫∑c chuy·ªÉn ƒë·ªïi giao di·ªán ph·ª©c t·∫°p. L∆∞u √Ω: Kh√¥ng d√πng cho t·∫•t c·∫£ state updates, v√¨ l·∫°m d·ª•ng c√≥ th·ªÉ l√†m UI "lagged" kh√¥ng c·∫ßn thi·∫øt.


# 2. When to Use Transitions?
	## S·ª≠ d·ª•ng useTransition khi:

		- C√≥ thao t√°c ch·∫≠m (slow operations) nh∆∞ l·ªçc danh s√°ch l·ªõn, fetch API, ho·∫∑c t√≠nh to√°n ph·ª©c t·∫°p.
		- C·∫≠p nh·∫≠t kh√¥ng c·∫ßn hi·ªÉn th·ªã ngay (non-critical), v√≠ d·ª•: K·∫øt qu·∫£ t√¨m ki·∫øm, danh s√°ch g·ª£i √Ω.
		- Mu·ªën gi·ªØ UI responsive trong khi x·ª≠ l√Ω background tasks.'
		
	## V√≠ d·ª• th·ª±c t·∫ø:
	
	Search bar v·ªõi h√†ng ngh√¨n k·∫øt qu·∫£.
	Chuy·ªÉn ƒë·ªïi gi·ªØa c√°c tab v·ªõi d·ªØ li·ªáu n·∫∑ng.
	Animation ho·∫∑c render giao di·ªán ph·ª©c t·∫°p khi thay ƒë·ªïi state.

	Insight chuy√™n gia: useTransition l√Ω t∆∞·ªüng cho c√°c ·ª©ng d·ª•ng SPA v·ªõi d·ªØ li·ªáu l·ªõn (nh∆∞ dashboard, e-commerce). Trong production, k·∫øt h·ª£p v·ªõi Suspense (cho lazy loading ho·∫∑c data fetching) ƒë·ªÉ t·ªëi ∆∞u h∆°n. N·∫øu kh√¥ng c√≥ React 18, b·∫°n c√≥ th·ªÉ d√πng k·ªπ thu·∫≠t nh∆∞ debouncing/throttling (v·ªõi useEffect ho·∫∑c th∆∞ vi·ªán nh∆∞ Lodash) ƒë·ªÉ ƒë·∫°t hi·ªáu qu·∫£ t∆∞∆°ng t·ª±, nh∆∞ng ph·ª©c t·∫°p h∆°n.



# 3. Basic Example: Search Feature

	## Gi·∫£i th√≠ch chi ti·∫øt:
		V√≠ d·ª• n√†y m√¥ ph·ªèng m·ªôt search bar c∆° b·∫£n, n∆°i input c·∫≠p nh·∫≠t ngay, nh∆∞ng k·∫øt qu·∫£ t√¨m ki·∫øm ƒë∆∞·ª£c ƒë√°nh d·∫•u l√† transition.

import { useState, useTransition } from 'react';

function SearchBar() {
  const [text, setText] = useState('');  // State cho input
  const [results, setResults] = useState('');  // State cho k·∫øt qu·∫£
  const [isPending, startTransition] = useTransition();  // Hook useTransition

  const handleChange = (e) => {
    setText(e.target.value);  // Urgent: C·∫≠p nh·∫≠t input ngay
    startTransition(() => {  // Non-urgent: C·∫≠p nh·∫≠t k·∫øt qu·∫£
      setResults(e.target.value);
    });
  };

  return (
    <div>
      <input value={text} onChange={handleChange} />  // Controlled input
      {isPending ? <p>Loading...</p> : <p>Search results for: {results}</p>}  // Hi·ªÉn th·ªã loading ho·∫∑c k·∫øt qu·∫£
    </div>
  );
}

		- useState(''): Qu·∫£n l√Ω gi√° tr·ªã input (text) v√† k·∫øt qu·∫£ (results).
		- useTransition(): Tr·∫£ v·ªÅ [isPending, startTransition]. isPending ƒë·ªÉ ki·ªÉm tra tr·∫°ng th√°i transition, startTransition ƒë·ªÉ wrap c·∫≠p nh·∫≠t non-urgent.
		- setText(e.target.value): C·∫≠p nh·∫≠t ngay ƒë·ªÉ input responsive (urgent).
		- startTransition(() => { setResults(...) }): ƒê√°nh d·∫•u c·∫≠p nh·∫≠t results l√† non-urgent, cho ph√©p React tr√¨ ho√£n n·∫øu c·∫ßn.
		- Conditional rendering: Hi·ªÉn th·ªã "Loading..." khi isPending l√† true.


	Insight chuy√™n gia: V√≠ d·ª• n√†y ƒë∆°n gi·∫£n nh∆∞ng th·ªÉ hi·ªán r√µ s·ª©c m·∫°nh: Input kh√¥ng b·ªã lag d√π k·∫øt qu·∫£ c√≥ th·ªÉ ch·∫≠m. Trong th·ª±c t·∫ø, results c√≥ th·ªÉ ƒë·∫øn t·ª´ API call (d√πng useEffect ho·∫∑c fetch). Best practice: Hi·ªÉn th·ªã skeleton UI thay v√¨ ch·ªâ "Loading..." ƒë·ªÉ UX t·ªët h∆°n. L∆∞u √Ω: isPending ch·ªâ true khi transition ch∆∞a ho√†n th√†nh, n√™n ki·ªÉm tra k·ªπ logic.



# 4. Real-World Example: Slow Search Feature
	V√≠ d·ª• n√†y m√¥ ph·ªèng t√¨nh hu·ªëng th·ª±c t·∫ø: Render danh s√°ch l·ªõn (1000 items) khi search, nh∆∞ng v·∫´n gi·ªØ input m∆∞·ª£t m√†.

import { useState, useTransition } from 'react';

function SearchResults({ query }) {  // Component render k·∫øt qu·∫£
  const items = [];
  if (query) {
    for (let i = 0; i < 1000; i++) {  // Gi·∫£ l·∫≠p x·ª≠ l√Ω n·∫∑ng
      items.push(<li key={i}>Result for {query} - {i}</li>);
    }
  }
  return <ul>{items}</ul>;
}

function App() {
  const [input, setInput] = useState('');  // State cho input
  const [query, setQuery] = useState('');  // State cho query search
  const [isPending, startTransition] = useTransition();  // Hook useTransition

  const handleChange = (e) => {
    setInput(e.target.value);  // Urgent: C·∫≠p nh·∫≠t input ngay
    startTransition(() => {  // Non-urgent: C·∫≠p nh·∫≠t query
      setQuery(e.target.value);
    });
  };

  return (
    <div>
      <input
        type="text"
        value={input}
        onChange={handleChange}
        placeholder="Type to search..."
      />
      {isPending && <p>Loading results...</p>}  // Loading khi transition ch·∫°y
      <SearchResults query={query} />  // Render danh s√°ch
    </div>
  );
}

	Insight chuy√™n gia: V√≠ d·ª• n√†y m√¥ ph·ªèng bottleneck th·ª±c t·∫ø (nh∆∞ render l·ªõn ho·∫∑c API ch·∫≠m). Trong production, k·∫øt h·ª£p v·ªõi Suspense v√† React.lazy ƒë·ªÉ lazy load component ho·∫∑c data. Best practice: D√πng useDeferredValue thay useTransition n·∫øu ch·ªâ mu·ªën tr√¨ ho√£n gi√° tr·ªã (kh√¥ng c·∫ßn wrap setState). Performance: Memoize SearchResults v·ªõi React.memo ƒë·ªÉ tr√°nh re-render kh√¥ng c·∫ßn thi·∫øt:

	const SearchResults = React.memo(({ query }) => { ... });



# 5. useTransition Hook: Chi ti·∫øt k·ªπ thu·∫≠t

	isPending: true khi transition ƒëang ch·∫°y, d√πng ƒë·ªÉ hi·ªÉn th·ªã loading state.
	startTransition: H√†m nh·∫≠n callback ch·ª©a c√°c setState non-urgent.

	## Khi n√†o d√πng? 
		Urgent: C·∫≠p nh·∫≠t UI t·ª©c th√¨ (input, button click, toggle).
		Non-urgent: Render ph·ª©c t·∫°p, l·ªçc d·ªØ li·ªáu l·ªõn, API calls kh√¥ng c·∫ßn feedback ngay.

	Insight chuy√™n gia: useTransition kh√¥ng l√†m code ch·∫°y nhanh h∆°n, m√† ch·ªâ s·∫Øp x·∫øp ∆∞u ti√™n render. N·∫øu c·∫£ urgent v√† non-urgent ƒë·ªÅu nh·∫π, isPending c√≥ th·ªÉ kh√¥ng bao gi·ªù true. Trong SSR (nh∆∞ Next.js), useTransition c·∫ßn c·∫©n th·∫≠n v√¨ server kh√¥ng h·ªó tr·ª£ Concurrent Rendering. Debug: D√πng React DevTools ƒë·ªÉ check render priorities. N·∫øu c·∫ßn timeout cho transitions, d√πng useTransition({ timeoutMs: 5000 }).


# K·∫øt lu·∫≠n v√† L·ªùi khuy√™n h·ªçc React
	useTransition l√† c√¥ng c·ª• m·∫°nh ƒë·ªÉ t·ªëi ∆∞u UX trong React 18, ƒë·∫∑c bi·ªát cho c√°c ·ª©ng d·ª•ng c√≥ x·ª≠ l√Ω n·∫∑ng. 

https://www.w3schools.com/react/react_forward_ref.asp










</pre><a id='backBottom' href='../react-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>