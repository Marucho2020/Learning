<html><head><title>Lesson 28 == HOC ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../react-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 28 -- HOC -//</h1><pre>
# 1 What is a Higher Order Component?  HOC 

	HOC l√† h√†m (function) nh·∫≠n component l√†m input v√† tr·∫£ v·ªÅ component m·ªõi v·ªõi enhancement. Kh√¥ng modify component g·ªëc, m√† compose (k·∫øt h·ª£p) ƒë·ªÉ th√™m feature. Useful cho:
	
	- Th√™m props (props proxy): Inject data ho·∫∑c functions.
	- Manipulate rendering (render hijacking): Thay ƒë·ªïi JSX output.
	- Inheritance inversion: K·∫ø th·ª´a t·ª´ component g·ªëc ƒë·ªÉ override.	
	
	Note t·ª´ b√†i: HOCs c√≥ th·ªÉ thay b·∫±ng Hooks, nh∆∞ng v·∫´n useful cho auth ho·∫∑c data fetching.
	
	Insight chuy√™n gia: HOC l·∫•y c·∫£m h·ª©ng t·ª´ Higher-Order Functions trong functional programming (JS). Trong React, gi√∫p DRY (Don't Repeat Yourself) b·∫±ng c√°ch abstract logic chung. V√≠ d·ª•: M·ªôt HOC cho loading spinner c√≥ th·ªÉ wrap nhi·ªÅu components. L·ªói ph·ªï bi·∫øn: Qu√™n spread props d·∫´n ƒë·∫øn m·∫•t data; lu√¥n d√πng {...props}. Trong TypeScript, khai b√°o HOC v·ªõi generics ƒë·ªÉ type-safe: function withBorder<P>(Wrapped: ComponentType<P>): ComponentType<P> { ... }. N·∫øu d√πng nhi·ªÅu HOC, chain ch√∫ng (compose) v·ªõi th∆∞ vi·ªán nh∆∞ recompose (d√π gi·ªù √≠t d√πng).
	
	
# 2. Example: Adding a Border
	
	V√≠ d·ª• t·∫°o HOC withBorder ƒë·ªÉ th√™m border xanh cho b·∫•t k·ª≥ component n√†o, minh h·ªça t√≠nh reusable.
	
// This is our HOC - it adds a border to any component
function withBorder(WrappedComponent) {  // HOC nh·∫≠n component g·ªëc
  return function NewComponent(props) {  // Tr·∫£ v·ªÅ component m·ªõi
    return (
      <div style={{ border: '2px solid blue', padding: '10px' }}>  // Wrap v·ªõi div c√≥ style
        <WrappedComponent {...props} />  // Render component g·ªëc, truy·ªÅn props
      </div>
    );
  };
}

// Simple component without border
function Greeting({ name }) {  // Component g·ªëc ƒë∆°n gi·∫£n
  return <h1>Hello, {name}!</h1>;
}

// Create a new component with border
const GreetingWithBorder = withBorder(Greeting);  // √Åp d·ª•ng HOC ƒë·ªÉ t·∫°o version m·ªõi

function App() {
  return (
    <div>
      <Greeting name="John" />  // S·ª≠ d·ª•ng g·ªëc: Kh√¥ng border
      <GreetingWithBorder name="Jane" />  // S·ª≠ d·ª•ng enhanced: C√≥ border
    </div>
  );
}
	
	- function withBorder(WrappedComponent): ƒê·ªãnh nghƒ©a HOC, nh·∫≠n component g·ªëc l√†m tham s·ªë.
	- return function NewComponent(props): Tr·∫£ v·ªÅ m·ªôt functional component m·ªõi (anonymous function), nh·∫≠n props t·ª´ cha.
	- <div style={{ border: '2px solid blue', padding: '10px' }}>: Th√™m wrapper DOM v·ªõi inline style (c√≥ th·ªÉ d√πng className cho CSS external).
	- <WrappedComponent {...props} />: Render component g·ªëc, spread props ƒë·ªÉ truy·ªÅn t·∫•t c·∫£ prop xu·ªëng (gi·ªØ nguy√™n behavior, v√≠ d·ª•: name prop).
	- const GreetingWithBorder = withBorder(Greeting);: T·∫°o component enhanced b·∫±ng c√°ch g·ªçi HOC v·ªõi Greeting.
	- Trong App(): S·ª≠ d·ª•ng c·∫£ hai version ƒë·ªÉ ch·ª©ng minh t√≠nh linh ho·∫°t ‚Äì g·ªëc kh√¥ng thay ƒë·ªïi.
	
	
	## Insight chuy√™n gia: V√≠ d·ª• n√†y l√† props proxy ƒë∆°n gi·∫£n (th√™m props gi√°n ti·∫øp qua wrapper). Trong th·ª±c t·∫ø, m·ªü r·ªông ƒë·ªÉ dynamic: Truy·ªÅn props v√†o HOC (curried HOC):
	
function withBorder(color = 'blue') {  // Tham s·ªë cho HOC
  return (WrappedComponent) => (props) => (
    <div style={{ border: `2px solid ${color}`, padding: '10px' }}>
      <WrappedComponent {...props} />
    </div>
  );
}
const GreetingWithRedBorder = withBorder('red')(Greeting);	
	
	
		
	##	 V√≠ d·ª• m·ªü r·ªông ƒë·ªÉ h·ªçc: 
	
	function withAuth(WrappedComponent) {
  return (props) => {
    const [isAuthenticated, setIsAuthenticated] = useState(false);  // Gi·∫£ l·∫≠p auth state
    useEffect(() => { setIsAuthenticated(true); }, []);  // Check auth
    if (!isAuthenticated) return <div>Login required</div>;
    return <WrappedComponent {...props} />;
  };
}
const ProtectedGreeting = withAuth(Greeting);
	
	
	
	
	
# 	3. Example Explained
	
	- withBorder l√† HOC: Nh·∫≠n component, tr·∫£ v·ªÅ m·ªõi.
	- Wrapper th√™m div border.
	- Component g·ªëc (Greeting) kh√¥ng thay ƒë·ªïi.
	- S·ª≠ d·ª•ng c·∫£ hai version song song.
	
	Note t·ª´ b√†i: HOCs thay th·∫ø ƒë∆∞·ª£c b·∫±ng Hooks, nh∆∞ng useful cho patterns nh∆∞ auth/data fetching.
	
	Insight chuy√™n gia: Trong v18+, d√πng custom hooks cho logic t∆∞∆°ng t·ª± (v√≠ d·ª•: useBorder return { wrapperStyle }, √°p d·ª•ng trong component). Nh∆∞ng HOCs t·ªët h∆°n cho class components ho·∫∑c khi c·∫ßn manipulate children (render hijacking). Trong libraries, HOCs gi√∫p backward compatibility. Debug tip: S·ª≠ d·ª•ng React Profiler ƒë·ªÉ check re-renders do HOC g√¢y ra.
	
	
	

</pre><a id='backBottom' href='../react-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>