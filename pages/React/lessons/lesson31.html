<html><head><title>Lesson 31 == useState ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../react-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 31 -- useState -//</h1><pre>

# 1. Import useState
	ƒê·ªÉ d√πng useState, import t·ª´ 'react' (named export, n√™n d√πng destructuring).
		
	import { useState } from "react";  // Import Hook

	{ useState }: Destructuring ƒë·ªÉ l·∫•y tr·ª±c ti·∫øp, tr√°nh React.useState. ES6 destructuring gi√∫p code s·∫°ch. N·∫øu d√πng TypeScript, kh√¥ng c·∫ßn th√™m types (React types built-in).


	Insight chuy√™n gia: Lu√¥n import ·ªü top file. Trong bundlers nh∆∞ Vite/CRA, tree-shaking lo·∫°i b·ªè unused imports. L·ªói ph·ªï bi·∫øn: Qu√™n import d·∫´n ƒë·∫øn "useState is not defined". Best practice: S·ª≠ d·ª•ng ESLint rule react-hooks/rules-of-hooks ƒë·ªÉ enforce Hooks rules.

	useState l√† entry point cho state management, nh∆∞ng trong app l·ªõn, k·∫øt h·ª£p v·ªõi useReducer cho state ph·ª©c t·∫°p ho·∫∑c Redux/Zustand cho global state. React batch updates setters ƒë·ªÉ optimize performance (t·ª´ v16), async nature gi√∫p tr√°nh race conditions. Nh∆∞·ª£c ƒëi·ªÉm: Overuse c√≥ th·ªÉ g√¢y re-renders th·ª´a; best practice: Gi·ªØ state minimal, local, v√† d√πng React.memo cho components con. Trong React 18+, useState h·ªó tr·ª£ Concurrent Rendering, cho ph√©p interrupt updates. N·∫øu state ph·ª• thu·ªôc props, d√πng derived state ho·∫∑c useMemo.


# 2. Initialize useState 
	
	G·ªçi useState ·ªü top level functional component ƒë·ªÉ kh·ªüi t·∫°o state. Nh·∫≠n initial value, tr·∫£ v·ªÅ [current state, setter function].

import { useState } from "react";

function FavoriteColor() {
  const [color, setColor] = useState("red");  // Kh·ªüi t·∫°o
}


	- useState("red"): Initial value ("red") ch·ªâ g·ªçi l·∫ßn ƒë·∫ßu (mount). Tr·∫£ v·ªÅ array ƒë·ªÉ destructuring: [state, setState].
	- color: Current value (read-only).
	- setColor: Setter ƒë·ªÉ update (async, batchable).
	- T√™n variable linh ho·∫°t (v√≠ d·ª•: [count, setCount]), nh∆∞ng convention: set + state name.

	Insight chuy√™n gia: Initial value c√≥ th·ªÉ l√† function cho lazy init (expensive computations): useState(() => fetchInitial()) ‚Äì ch·ªâ ch·∫°y l·∫ßn ƒë·∫ßu. Trong SSR (Next.js), initial value ph·∫£i serializable. Best practice: Kh·ªüi t·∫°o state ·ªü top level, kh√¥ng conditional (vi ph·∫°m Hooks rules).



# 3. Read State

	S·ª≠ d·ª•ng state variable tr·ª±c ti·∫øp trong JSX ƒë·ªÉ render.

import { useState } from 'react';
import { createRoot } from 'react-dom/client';

function FavoriteColor() {
  const [color, setColor] = useState("red");  // State

  return <h1>My favorite color is {color}!</h1>;  // Read state
}

createRoot(document.getElementById('root')).render(
  <FavoriteColor />
);


	- {color}: Interpolation state v√†o JSX. Re-render khi state thay ƒë·ªïi.
	- Render: Mount v√†o DOM v·ªõi createRoot (React 18+).

	State l√† local, reactive ‚Äì thay ƒë·ªïi trigger reconcile. N·∫øu state l·ªõn, d√πng useMemo ƒë·ªÉ memoize derived values (v√≠ d·ª•: const upperColor = useMemo(() => color.toUpperCase(), [color])). Debug: Xem state trong React DevTools



# 4. Update State

	S·ª≠ d·ª•ng setter ƒë·ªÉ update, kh√¥ng mutate tr·ª±c ti·∫øp (v√≠ d·ª•: kh√¥ng color = "blue"). Setter trigger re-render.


import { useState } from 'react';
import { createRoot } from 'react-dom/client';

function FavoriteColor() {
  const [color, setColor] = useState("red");

  return (
    <>
      <h1>My favorite color is {color}!</h1>
      <button type="button" onClick={() => setColor("blue")}>Blue</button>  // Update
    </>
  );
}

createRoot(document.getElementById('root')).render(
  <FavoriteColor />
);


	onClick={() => setColor("blue")}: Arrow function g·ªçi setter v·ªõi value m·ªõi.
	Setter async: Kh√¥ng th·∫•y thay ƒë·ªïi ngay (d√πng callback n·∫øu c·∫ßn immediate read).

	Insight chuy√™n gia: Kh√¥ng mutate state tr·ª±c ti·∫øp ƒë·ªÉ tr√°nh side effects (React shallow compares). Functional updates cho ph·ª• thu·ªôc state c≈©: setColor(prev => prev + "ish"). Batch: Nhi·ªÅu setters c√πng event loop ch·ªâ re-render once. L·ªói: Infinite loops n·∫øu setter trong render (di chuy·ªÉn v√†o event handlers ho·∫∑c useEffect).


# 5. What Can State Hold?

	useState h·ªó tr·ª£ b·∫•t k·ª≥ type: strings, numbers, booleans, arrays, objects, ho·∫∑c k·∫øt h·ª£p. C√≥ th·ªÉ nhi·ªÅu Hooks ri√™ng l·∫ª ho·∫∑c m·ªôt object.

import { useState } from 'react';
import { createRoot } from 'react-dom/client';

function MyCar() {
  const [brand, setBrand] = useState("Ford");
  const [model, setModel] = useState("Mustang");
  const [year, setYear] = useState("1964");
  const [color, setColor] = useState("red");

  return (
    <>
      <h1>My {brand}</h1>
      <p>It is a {color} {model} from {year}.</p>
    </>
  );
}

createRoot(document.getElementById('root')).render(
  <MyCar />
);


	## (single object):

import { useState } from 'react';
import { createRoot } from 'react-dom/client';

function MyCar() {
  const [car, setCar] = useState({
    brand: "Ford",
    model: "Mustang",
    year: "1964",
    color: "red"
  });

  return (
    <>
      <h1>My {car.brand}</h1>
      <p>It is a {car.color} {car.model} from {car.year}.</p>
    </>
  );
}

createRoot(document.getElementById('root')).render(
  <MyCar />
);


	Multiple Hooks: Separate concerns, d·ªÖ manage.
	Single object: Group related data, nh∆∞ng c·∫ßn c·∫©n th·∫≠n khi update (xem ph·∫ßn sa


# 6. Updating Objects and Arrays in State

	Update overwrite to√†n state, n√™n d√πng spread (...) ƒë·ªÉ copy v√† ch·ªâ thay ƒë·ªïi ph·∫ßn c·∫ßn.

const updateColor = () => {
  setCar(previousState => {  // Functional update
    return { ...previousState, color: "blue" };  // Spread + override
  });
};

setCar(previousState => ...): Callback nh·∫≠n prev state (an to√†n cho async).
{ ...previousState, color: "blue" }: Shallow copy, override color. Gi·ªØ brand/model/year.


	Insight chuy√™n gia: ƒê·ªëi v·ªõi arrays: setList(prev => [...prev, newItem]) ho·∫∑c prev.filter(...). Deep updates: D√πng nested spread { ...prev, nested: { ...prev.nested, key: value } }. N·∫øu mutate (push tr·ª±c ti·∫øp), React kh√¥ng detect, d·∫´n ƒë·∫øn stale UI. Best practice: D√πng useImmer cho mutable-like syntax. Performance: N·∫øu object l·ªõn, xem x√©t normalize state (flat structures).



	## V√≠ d·ª• m·ªü r·ªông:
	
const [list, setList] = useState([1, 2, 3]);
const addItem = () => setList(prev => [...prev, 4]);  // [1,2,3,4]
const removeLast = () => setList(prev => prev.slice(0, -1));  // Kh√¥ng mutate
	
	
</pre><a id='backBottom' href='../react-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>