<html><head><title>Lesson 30 == React Hook ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../react-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 30 -- React Hook -//</h1><pre>
# 1. What is a Hook?

Hooks c√°ch m·∫°ng h√≥a React b·∫±ng c√°ch lo·∫°i b·ªè boilerplate c·ªßa class (nh∆∞ this, binding methods), v√† khuy·∫øn kh√≠ch functional programming. Trong React 18+, Hooks t√≠ch h·ª£p t·ªët v·ªõi Concurrent Rendering (nh∆∞ useTransition). Tuy nhi√™n, Hooks ch·ªâ d√πng trong functional components; class v·∫´n h·ªó tr·ª£ nh∆∞ng √≠t d√πng trong code m·ªõi. Performance: Hooks gi·∫£m bundle size v√† d·ªÖ optimize v·ªõi React.memo. N·∫øu migrate t·ª´ class, d√πng Hooks ƒë·ªÉ refactor d·∫ßn. Th∆∞ vi·ªán nh∆∞ Redux, React Query th∆∞·ªùng cung c·∫•p Hooks (v√≠ d·ª•: useSelector, useQuery).


	Hooks l√† c√°c h√†m ƒë·∫∑c bi·ªát (b·∫Øt ƒë·∫ßu b·∫±ng "use") cho ph√©p "hook into" (k·∫øt n·ªëi) state v√† lifecycle t·ª´ functional components. Tr∆∞·ªõc Hooks, functional components ch·ªâ stateless (pure functions nh·∫≠n props, tr·∫£ JSX). Hooks l√†m ch√∫ng stateful m√† kh√¥ng c·∫ßn class.


	C√°c Hooks c∆° b·∫£n: useState (state), useEffect (lifecycle/side effects), useContext (context), useRef (refs), useReducer (complex state). Hooks custom cho ph√©p t√°i s·ª≠ d·ª•ng logic (nh∆∞ fetch data). L∆∞u √Ω: Hooks d·ª±a tr√™n order g·ªçi (kh√¥ng conditional), n√™n ESLint plugin eslint-plugin-react-hooks l√† must-have ƒë·ªÉ tr√°nh l·ªói. Trong SSR (Next.js), Hooks ho·∫°t ƒë·ªông t·ªët nh∆∞ng c·∫ßn c·∫©n th·∫≠n v·ªõi hydration.


# 2. Example: V√≠ d·ª• v·ªõi useState

	V√≠ d·ª• minh h·ªça useState ƒë·ªÉ qu·∫£n l√Ω state m√†u y√™u th√≠ch, v·ªõi buttons c·∫≠p nh·∫≠t state.

	
import { useState } from 'react';  // Import Hook
import { createRoot } from 'react-dom/client';  // Render root

function FavoriteColor() {
  const [color, setColor] = useState("red");  // Kh·ªüi t·∫°o state

  return (
    <>
      <h1>My favorite color is {color}!</h1>  // Hi·ªÉn th·ªã state
      <button type="button" onClick={() => setColor("blue")}>Blue</button>  // C·∫≠p nh·∫≠t state
      <button type="button" onClick={() => setColor("red")}>Red</button>
      <button type="button" onClick={() => setColor("pink")}>Pink</button>
      <button type="button" onClick={() => setColor("green")}>Green</button>
    </>
  );
}

createRoot(document.getElementById('root')).render(
  <FavoriteColor />
);

	useState l√† Hook ƒë∆°n gi·∫£n nh·∫•t, t∆∞∆°ng ƒë∆∞∆°ng this.state v√† this.setState trong class. Initial value c√≥ th·ªÉ l√† function cho lazy init: useState(() => computeInitial()) (useful cho expensive calculations). Best practice: D√πng functional updates cho setter n·∫øu ph·ª• thu·ªôc state c≈©: setColor(prev => prev === "red" ? "blue" : "red")


	L·ªói ph·ªï bi·∫øn: G·ªçi Hooks conditional (vi ph·∫°m rules), d·∫´n ƒë·∫øn bugs (state mismatch). Trong array/object state, lu√¥n t·∫°o copy m·ªõi khi update ƒë·ªÉ tr√°nh mutate (v√≠ d·ª•: setList([...list, newItem])). Performance: N·∫øu state ph·ª©c t·∫°p, d√πng useReducer thay th·∫ø.


	## V√≠ d·ª• m·ªü r·ªông ƒë·ªÉ h·ªçc: 

function Counter() {
  const [count, setCount] = useState(0);
  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>Click me</button>
    </div>
  );
}

	Ho·∫∑c d√πng object state:

const [user, setUser] = useState({ name: "John", age: 30 });
setUser(prev => ({ ...prev, age: prev.age + 1 }));  // Update m√† kh√¥ng mutate



# 3. Hook Rules 

	## C√≥ 3 quy t·∫Øc nghi√™m ng·∫∑t:
	
		Ch·ªâ g·ªçi trong functional components: Kh√¥ng d√πng trong class ho·∫∑c regular functions.

		Ch·ªâ g·ªçi ·ªü top level: Kh√¥ng nested trong loops, conditions, ho·∫∑c functions con (React d·ª±a v√†o order g·ªçi ƒë·ªÉ track state).

		Kh√¥ng conditional: Kh√¥ng wrap Hooks trong if/else (l√†m sai order).


	Hooks kh√¥ng ho·∫°t ƒë·ªông trong class components.

	Insight chuy√™n gia: Quy t·∫Øc n√†y do Hooks internals: React d√πng linked list ƒë·ªÉ track Hooks calls m·ªói render. Vi ph·∫°m d·∫´n ƒë·∫øn errors nh∆∞ "Rendered more hooks than during the previous render". S·ª≠ d·ª•ng ESLint rule react-hooks/rules-of-hooks ƒë·ªÉ enforce. N·∫øu c·∫ßn conditional logic, di chuy·ªÉn v√†o Hook: useEffect(() => { if (condition) { ... } }, [condition]). Trong custom Hooks, tu√¢n th·ªß t∆∞∆°ng t·ª±. Debug: N·∫øu error, check order calls v·ªõi React DevTools.




# 4. Custom Hooks 
	N·∫øu logic stateful c·∫ßn reuse (nh∆∞ fetch data, subscription), t·∫°o custom Hook (h√†m b·∫Øt ƒë·∫ßu b·∫±ng "use", g·ªçi c√°c Hooks kh√°c). B√†i g·ª£i √Ω chi ti·∫øt sau, nh∆∞ng ƒë√¢y l√† c√°ch chia s·∫ª behavior m√† kh√¥ng HOCs hay render props.

	Insight chuy√™n gia: Custom Hooks l√† super power c·ªßa Hooks, gi√∫p abstract logic (v√≠ d·ª•: useFetch cho API calls). V√≠ d·ª• ƒë∆°n gi·∫£n:


import { useState, useEffect } from 'react';

function useWindowSize() {  // Custom Hook
  const [size, setSize] = useState({ width: window.innerWidth, height: window.innerHeight });
  useEffect(() => {
    const handleResize = () => setSize({ width: window.innerWidth, height: window.innerHeight });
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);  // Cleanup
  }, []);
  return size;
}

// S·ª≠ d·ª•ng
function App() {
  const { width, height } = useWindowSize();
  return <div>Window size: {width} x {height}</div>;
}

	Best practice: Custom Hooks ph·∫£i pure (kh√¥ng side effects ngo√†i Hooks n·ªôi b·ªô), v√† export ƒë·ªÉ reuse. Trong libraries, custom Hooks thay HOCs (v√≠ d·ª•: useForm trong React Hook Form). Scale: T·ªï ch·ª©c trong folder hooks/, test v·ªõi @testing-library/react-


</pre><a id='backBottom' href='../react-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>