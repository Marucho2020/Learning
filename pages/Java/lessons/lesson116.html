<html><head><title>Lesson 116 == Delete trong RBT ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 116 -- Delete trong RBT -//</h1><pre># KhÃ¡i niá»‡m  
XÃ³a node trong Red-Black Tree (RBT) lÃ  pháº§n phá»©c táº¡p nháº¥t cá»§a cáº¥u trÃºc nÃ y. á» level senior, báº¡n cáº§n hiá»ƒu rÃµ cáº£ quy trÃ¬nh xÃ³a, cÃ¡c tÃ¬nh huá»‘ng máº¥t cÃ¢n báº±ng, hÃ nh vi cá»§a mÃ u sáº¯c (red/black) vÃ  Ä‘áº·c biá»‡t lÃ  cÃ¡c phÃ©p xoay â€“ tÃ´ mÃ u â€“ rebalance sau xÃ³a.


# ğŸ¯ Má»¤C TIÃŠU Cá»¦A DELETE TRONG RBT
	Duy trÃ¬ 5 tÃ­nh cháº¥t cá»§a Red-Black Tree sau khi xÃ³a:
	
		- Má»—i node lÃ  Ä‘á» hoáº·c Ä‘en
		- Gá»‘c lÃ  Ä‘en
		- LÃ¡ (null) lÃ  Ä‘en
		- Node Ä‘á» khÃ´ng cÃ³ con Ä‘á»
		- Má»i Ä‘Æ°á»ng tá»« má»™t node Ä‘áº¿n cÃ¡c lÃ¡ null Ä‘á»u cÃ³ sá»‘ node Ä‘en báº±ng nhau


# ğŸ” CÃC BÆ¯á»šC XÃ“A NODE TRONG RBT

	## ğŸ”¹ BÆ¯á»šC 1: XÃ³a nhÆ° BST bÃ¬nh thÆ°á»ng 
		Náº¿u node cÃ³ 2 con â†’ thay tháº¿ báº±ng node káº¿ tiáº¿p (in-order successor), rá»“i xÃ³a successor.
		Giá» báº¡n cÃ²n láº¡i trÆ°á»ng há»£p node bá»‹ xÃ³a chá»‰ cÃ³ 0 hoáº·c 1 con â†’ xá»­ lÃ½ tÆ°Æ¡ng Ä‘á»‘i dá»….
		
		
	## 	 BÆ¯á»šC 2: PhÃ¢n tÃ­ch mÃ u sáº¯c
		Náº¿u node bá»‹ xÃ³a lÃ  Ä‘á» â†’ KHÃ”NG áº£nh hÆ°á»Ÿng gÃ¬, káº¿t thÃºc.
		Náº¿u node bá»‹ xÃ³a lÃ  Ä‘en:
			Máº¥t Ä‘i 1 â€œblack heightâ€ â†’ RBT cÃ³ thá»ƒ máº¥t cÃ¢n báº±ng.
			Cáº§n fix láº¡i mÃ u sáº¯c vÃ  cáº¥u trÃºc báº±ng cÃ¡ch "fix double black".





# ğŸ”¥ FIX DOUBLE BLACK (Äá» ÄEN KÃ‰P)
	Giáº£ sá»­ báº¡n xÃ³a má»™t node Ä‘en x, vÃ  thay tháº¿ bá»Ÿi child (null hoáº·c 1 con). Náº¿u child cÅ©ng Ä‘en â†’ xuáº¥t hiá»‡n double black â†’ pháº£i xá»­ lÃ½.
	
	CÃ³ 4 tÃ¬nh huá»‘ng chÃ­nh (fix báº±ng rotation + recoloring):
	
	## ğŸ”¸ CASE 1: Sibling Ä‘á»
	
     P(B)
    /    \
   x(DB)  S(R)
         /   \
       ...   ...
	Sibling S lÃ  Ä‘á», P lÃ  Ä‘en â†’ xoay P vÃ  S, Ä‘á»•i mÃ u â†’ biáº¿n thÃ nh case khÃ¡c.


	## ğŸ”¸ CASE 2: Sibling Ä‘en, cáº£ 2 con Ä‘á»u Ä‘en

     P(?)
    /    \
   x(DB)  S(B)
         /   \
       B     B

		Äá»•i mÃ u S â†’ Ä‘á»
		Náº¿u P lÃ  Ä‘á» â†’ Ä‘á»•i P thÃ nh Ä‘en â†’ OK
		Náº¿u P Ä‘en â†’ P bá»‹ â€œdouble blackâ€, Ä‘á»‡ quy fix lÃªn trÃªn


	## ğŸ”¸ CASE 3: Sibling Ä‘en, con gáº§n lÃ  Ä‘á», con xa lÃ  Ä‘en

     P
    / \
   x   S(B)
       / \
     R   B
	Xoay S vÃ  R Ä‘á»ƒ táº¡o ra Case 4
	
	
	## ğŸ”¸ CASE 4: Sibling Ä‘en, con xa lÃ  Ä‘á»
     P
    / \
   x   S(B)
       / \
     B   R

	Xoay P vÃ  S
	Äá»•i mÃ u Ä‘á»ƒ cÃ¢n báº±ng â†’ fix hoÃ n táº¥t
	

# ğŸ§  Máº¸O GHI NHá»š (THEO QUAN SÃT)

	Sibling Ä‘á»: luÃ´n xoay vÃ  Ä‘á»•i mÃ u ngay.
	
	Sibling Ä‘en:
		Náº¿u cÃ³ con Ä‘á» xa â†’ xoay pháº£i/left rá»“i Ä‘á»•i mÃ u
		Náº¿u 2 con Ä‘en â†’ Ä‘áº©y Ä‘en lÃªn trÃªn â†’ Ä‘á»‡ quy tiáº¿p

# ğŸ’» JAVA PSEUDO-CODE (PHáº¦N FIX)
void fixDelete(Node x) {
    while (x != root && x.color == BLACK) {
        if (x == x.parent.left) {
            Node s = x.parent.right;

            if (s.color == RED) {
                // Case 1
                s.color = BLACK;
                x.parent.color = RED;
                rotateLeft(x.parent);
                s = x.parent.right;
            }

            if (s.left.color == BLACK && s.right.color == BLACK) {
                // Case 2
                s.color = RED;
                x = x.parent;
            } else {
                if (s.right.color == BLACK) {
                    // Case 3
                    s.left.color = BLACK;
                    s.color = RED;
                    rotateRight(s);
                    s = x.parent.right;
                }

                // Case 4
                s.color = x.parent.color;
                x.parent.color = BLACK;
                s.right.color = BLACK;
                rotateLeft(x.parent);
                x = root;
            }
        } else {
            // mirror of above logic
            ...
        }
    }
    x.color = BLACK;
}



# ğŸ“Š TÃ“M Táº®T Äá»˜ PHá»¨C Táº P

| Thao tÃ¡c     | Thá»i gian                          |
| ------------ | ---------------------------------- |
| XÃ³a          | `O(log n)`                         |
| Sá»­a mÃ u/xoay | `â‰¤ 3` láº§n xoay, `O(log n)` Ä‘á»•i mÃ u |



# ğŸš¨ LÆ¯U Ã QUAN TRá»ŒNG
	Äá»«ng sá»­a cÃ¢y khi chÆ°a xÃ©t Ä‘áº¿n mÃ u sáº¯c â€“ Ä‘á»/Ä‘en quyáº¿t Ä‘á»‹nh logic
	HÃ£y váº½ ra paper / debug báº±ng in-order vÃ  mÃ u Ä‘á»ƒ hiá»ƒu â€œtÃ¬nh tráº¡ngâ€
	Khi gáº·p bug logic, thÆ°á»ng lÃ  do quÃªn truyá»n láº¡i mÃ u sáº¯c khi xoay

# ğŸ“˜ Báº N Cáº¦N Há»ŒC THÃŠM
| Chá»§ Ä‘á»                      | VÃ¬ sao cáº§n                      |
| --------------------------- | ------------------------------- |
| Tree rotation (Left, Right) | LÃ  core cá»§a RBT, AVL, Treap     |
| Coloring strategy           | Logic Ä‘á»/Ä‘en cá»§a má»—i case       |
| In-order traversal          | Debug + xÃ¡c nháº­n cÃ¢n báº±ng cÃ¢y   |
| Red-Black vs AVL            | So sÃ¡nh Ä‘á»ƒ hiá»ƒu sÃ¢u vá» cáº¥u trÃºc |


</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>