<html><head><title>Lession 25  PriorityBlockingQueue //</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lession 25  PriorityBlockingQueue //</h1><pre>
# Äá»‹nh nghÄ©a 
	PriorityBlockingQueue lÃ  má»™t blocking Queue trong Java, Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c chÆ°Æ¡ng trÃ¬nh Ä‘a luá»“ng(multi-threaded programing). NÃ³ káº¿ thá»«a tá»« AbstractQueue vÃ  triá»ƒn khai cÃ¡c interface 
	BlockingQueue vÃ  Serializable
	
		- Priority : CÃ¡c pháº§n tá»­ trong hÃ ng Ä‘á»£i nÃ y sáº½ Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± Æ°u tiÃªn(Priority)
		- Blocking : Náº¿u hÃ ng Ä‘á»£i rá»—ng, cÃ¡c phÆ°Æ¡ng thá»©c láº¥y dá»¯ liá»‡u nhÆ° take() sáº½ chá» cho Ä‘áº¿n khi cÃ³ pháº§n tá»­ Ä‘Æ°á»£c thÃªm vÃ o  
		
# Äáº·c Ä‘iá»ƒm ná»•i báº­t  
	- CÃ¡c pháº§n tá»­ Ä‘Æ°á»£c sáº¯p xáº¿p theo natural ordering(thá»© tá»± tá»± nhiÃªn) Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a qua Comparable hoáº·c theo Comparator do ngÆ°á»i dÃ¹ng chá»‰ Ä‘á»‹nh  
	- KhÃ´ng há»— trá»£ thá»© tá»± FIFO. Thay vÃ o Ä‘Ã³, pháº§n tá»­ Æ°u tiÃªn cao sáº½ luÃ´n Ä‘Æ°á»£c xá»­ lÃ½ trÆ°á»›c .
	- KhÃ´ng cháº·n khi thÃªm pháº§n tá»­ (unbounded): KhÃ´ng cÃ³ giá»›i háº¡n vá» kÃ­ch thÆ°á»›c, nÃªn báº¡n khÃ´ng cáº§n lo vá» viá»‡c hÃ ng Ä‘á»£i bá»‹ Ä‘áº§y 
	- Thread-safe : Äá»“ng bá»™ hÃ³a Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n khi truy cáº­p tá»« nhiá»u luá»“ng  
	
	
# CÃ¡ch hoáº¡t Ä‘á»™ng  

	PriorityBlockingQueue sá»­ dá»¥ng má»™t Heap(má»™t dáº¡ng cÃ¢y nhá»‹ phÃ¢n) Ä‘á»ƒ quáº£n lÃ½ cÃ¡c pháº§n tá»­: 
		Min-Heap: Pháº§n tá»­ nhá» nháº¥t(cÃ³ Ä‘á»™ Æ°u tiÃªn cao nháº¥t) sáº½ náº±m á»Ÿ Ä‘áº§u hÃ ng Ä‘á»£i 
		
# Constructor 
	PriorityBlockingQueue  cÃ³ cÃ¡c constructor quan trá»ng: 
		
		// Constructor máº·c Ä‘á»‹nh
		PriorityBlockingQueue()
		
		// Constructor vá»›i sá»©c chá»©a ban Ä‘áº§u
		PriorityBlockingQueue(int initialCapacity)
		
		// Constructor vá»›i Comparator do ngÆ°á»i dÃ¹ng cung cáº¥p
		PriorityBlockingQueue(int initialCapacity, Comparator<? super E> comparator)
		
		// Constructor tá»« má»™t Collection cÃ³ sáºµn
		PriorityBlockingQueue(Collection<? extends E> c)


# CÃ¡c phÆ°Æ¡ng thá»©c quan trá»ng  
	
	.add(E e)        : ThÃªm má»™t pháº§n tá»­ vÃ o queue 
	.offer(E e)      : ThÃªm pháº§n tá»­ mÃ  khÃ´ng gÃ¢y ra lá»—i náº¿u hÃ ng Ä‘á»£i Ä‘áº§y(vá»›i queue unbounded thÃ¬ khÃ´ng khÃ¡c add )
	.peek()          : Láº¥y pháº§n tá»­ Æ°u tiÃªn cao nháº¥t nhÆ°ng khÃ´ng xÃ³a nÃ³ khá»i queue 
	.poll()          : Láº¥y vÃ  xÃ³a pháº§n tá»­ Æ°u tiÃªn cao nháº¥t(tráº£ vá» null náº¿u rá»—ng )
	.take()          : Láº¥y vÃ  xÃ³a pháº§n tá»­ Æ°u tiÃªn cao nháº¥t, chá» náº¿u queue rá»—ng 
	.put(E e)        : ThÃªm pháº§n tá»­ vÃ o queue, khÃ´ng cháº·n vÃ¬ queue unbounded 
	.size()          : Tráº£ vá» sá»‘ lÆ°á»£ng pháº§n tá»­ trong queue 
	.iterator()      : Tráº£ vá» iterator Ä‘á»ƒ duyá»‡t qua cÃ¡c pháº§n tá»­(khÃ´ng Ä‘áº£m báº£o thá»© tá»± )
	
	
# 6. VÃ­ dá»¥ minh há»a 
	## VÃ­ dá»¥ cÆ¡ báº£n  
		PriorityBlockingQueue<Integer> queue = new PriorityBlockingQueue<>();
		
		// ThÃªm pháº§n tá»­ 
		queue.add(10);
		queue.add(5);
		queue.add(20);
		
		// Láº¥y vÃ  in ra cÃ¡c pháº§n tá»­  
		while(!queue.isEmpty()){
			System.out.println(queue.poll());
		}


	## VÃ­ dá»¥ Ä‘a luá»“ng bÃ i toÃ¡n producer vÃ  consumer 
	public static void main(String[] args) {
        PriorityBlockingQueue<String> queue = new PriorityBlockingQueue<>();

        // Thread thÃªm dá»¯ liá»‡u
        Thread producer = new Thread(() -> {
            try {
                queue.put("C");
                queue.put("A");
                queue.put("B");
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        });

        // Thread tiÃªu thá»¥ dá»¯ liá»‡u
        Thread consumer = new Thread(() -> {
            try {
                while (true) {
                    System.out.println("Consumed: " + queue.take()); // Sáº½ in theo thá»© tá»± A, B, C
                }
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        });

        producer.start();
        consumer.start();
    }
	
# Æ¯u vÃ  nhÆ°á»£c Ä‘iá»ƒm 
	## Æ¯u Ä‘iá»ƒm  
		- Thread-safe : Há»— trá»£ Ä‘á»“ng bá»™ hÃ³a cho Ä‘a luá»“ng 
		- Natural ordering hoáº·c Comparator : Linh hoáº¡t trong viá»‡c sáº¯p xáº¿p 
		- KhÃ´ng giá»›i háº¡n kÃ­ch thÆ°á»›c 
		
	## NhÆ°á»£c Ä‘iá»ƒm  
		- KhÃ´ng há»— trá»£ thá»© tá»± FIFO khi cÃ³ Ä‘á»™ Æ°u tiÃªn trÃ¹ng nhau 
		- Duyá»‡t qua toÃ n bá»™ hÃ ng Ä‘á»£i báº±ng iterator sáº½ khÃ´ng Ä‘áº£m báº£o thá»© tá»±  
		

# á»¨ng dá»¥ng thá»±c táº¿ 
	- Há»‡ thá»‘ng xá»­ lÃ½ task theo Ä‘á»™ Æ°u tiÃªn 
	- Bá»™ láº­p lá»‹ch(schedulers) cho cÃ¡c cÃ´ng viá»‡c cáº§n Æ°u tiÃªn 
	- Há»‡ thá»‘ng thread pool xá»­ lÃ½ cÃ¡c cÃ´ng viá»‡c theo má»©c Ä‘á»™ quan trá»ng 
	
# LÆ°u Ã½ thi
	- Biáº¿t cÃ¡ch phÃ¢n biá»‡t PriorityBlockingQueue vá»›i cÃ¡c Queue khÃ¡c nhÆ° LinkedBlockingQueue(FIFO) hoáº·c ArrayBlockingQueue 
	
	- Hiá»ƒu rÃµ cÃ¡ch hoáº¡t Ä‘á»™ng vÃ  cÃ¡c Ä‘áº·c Ä‘iá»ƒm nhÆ° sáº¯p xáº¿p theo thá»© tá»± tá»± nhiÃªn, unbounded vÃ  thread-safe 
	- LÆ°u Ã½ cÃ¡c constructor vÃ  cÃ¡ch sá»­ dá»¥ng Comparator Ä‘á»ƒ thay Ä‘á»•i thá»© tá»± sáº¯p xáº¿p 
	

</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>