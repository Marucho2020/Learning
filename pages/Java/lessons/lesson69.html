<html><head><title>Lesson 69 == DispatcherServlet ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 69 -- DispatcherServlet -//</h1><pre>	
# Kh√°i ni·ªám  
		DispatcherServlet l√† tr√°i tim c·ªßa Spring MVC, ho·∫°t ƒë·ªông nh∆∞ m·ªôt Front Controller ƒëi·ªÅu ph·ªëi t·∫•t c·∫£ c√°c y√™u c·∫ßu HTTP ƒë·∫øn ·ª©ng d·ª•ng web. 

		

# T·ªïng quan v·ªÅ DispatcherServlet 
		Vai tr√≤ ch√≠nh : 
			- Nh·∫≠n t·∫•t c·∫£ c√°c request HTTP ƒë·∫øn  
			- X√°c ƒë·ªãnh Controller th√≠ch h·ª£p ƒë·ªÉ x·ª≠ l√Ω request 
			- G·ªçi Controller v√† nh·∫≠n v·ªÅ d·ªØ li·ªáu ho·∫∑c view 
			- Render view ho·∫∑c tr·∫£ response v·ªÅ client 
			
		## S∆° ƒë·ªì ho·∫°t ƒë·ªông 
			Client  ‚Üí  DispatcherServlet  ‚Üí  HandlerMapping  ‚Üí  Controller  ‚Üí  ViewResolver  ‚Üí  Response



# Lu·ªìng	x·ª≠ l√Ω c·ªßa DispatcherServlet 
	Khi m·ªôt request HTTP ƒë·∫øn, DispatcherServlet s·∫Ω th·ª±c hi·ªán c√°c b∆∞·ªõc sau  : 
		
		## B∆∞·ªõc 1 : Nh·∫≠n y√™u c·∫ßu t·ª´ Client 
			T·∫•t c·∫£ c√°c request HTTP ƒë∆∞·ª£c g·ª≠i ƒë·∫øn DispatcherServlet th√¥ng qua c·∫•u h√¨nh web.xml ho·∫∑c Spring Boot Auto Configuration. 
			
		## B∆∞·ªõc 2 : T√¨m HandlerMapping ph√π h·ª£p 
		
			DispatcherServlet s·ª≠ d·ª•ng c√°c HandlerMapping ƒë·ªÉ t√¨m ra Controller ph√π h·ª£p. 
			
			C√°c lo·∫°i HandlerMapping ph·ªï bi·∫øn: 
				RequestMappingHandlerMapping (d√πng @RequestMapping trong Spring Boot) 
				
			SimpleUrlHandlerMapping (c·∫•u h√¨nh th·ªß c√¥ng c√°c URL) 
				

		## B∆∞·ªõc 3 : G·ª≠i request ƒë·∫øn HandlerAdapter 
				HandlerAdapter ƒë√≥ng vai tr√≤ l√† m·ªôt b·ªô chuy·ªÉn ƒë·ªïi, gi√∫p DispatcherServlet c√≥ th·ªÉ g·ªçi ƒë√∫ng method c·ªßa Controller.


		## B∆∞·ªõc 4 :  X·ª≠ l√Ω logic trong Controller 
			Controller nh·∫≠n request, x·ª≠ l√Ω d·ªØ li·ªáu v√† tr·∫£ v·ªÅ ModelAndView (n·∫øu l√† web) ho·∫∑c ResponseEntity (n·∫øu l√† API REST). 
			
			
		## B∆∞·ªõc 5:  X√°c ƒë·ªãnh View th√¥ng qua ViewResolver 
			- ViewResolver gi√∫p t√¨m ra template HTML/JSP ph√π h·ª£p. 
			- C√°c lo·∫°i ViewResolver ph·ªï bi·∫øn: 
				InternalResourceViewResolver (d√πng cho JSP) 
				ThymeleafViewResolver (d√πng cho Thymeleaf) 
				MappingJackson2JsonView (tr·∫£ v·ªÅ JSON) 
			
		## Tr·∫£ v·ªÅ response cho client 
			DispatcherServlet l·∫•y k·∫øt qu·∫£ t·ª´ ViewResolver ho·∫∑c ResponseEntity v√† tr·∫£ v·ªÅ client.
		

# C·∫•u h√¨nh DispatcherServlet trong Java Config 
	## C·∫•u h√¨nh trong web.xml (Java EE style - kh√¥ng khuy·∫øn kh√≠ch) 
		Tr∆∞·ªõc ƒë√¢y, DispatcherServlet ƒë∆∞·ª£c c·∫•u h√¨nh trong web.xml nh∆∞ sau: 
		
		<servlet>
			<servlet-name>dispatcher</servlet-name>
			<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
			<load-on-startup>1</load-on-startup>
		</servlet>
		
		<servlet-mapping>
			<servlet-name>dispatcher</servlet-name>
			<url-pattern>/</url-pattern>
		</servlet-mapping>

		

	## C·∫•u h√¨nh v·ªõi Java Config (Spring Boot - hi·ªán ƒë·∫°i) 
		Spring Boot t·ª± ƒë·ªông c·∫•u h√¨nh DispatcherServlet, nh∆∞ng b·∫°n c√≥ th·ªÉ override n√≥: 
			
			@Configuration
			public class MyWebConfig implements WebMvcConfigurer {
				
				@Bean
				public DispatcherServlet dispatcherServlet() {
					return new DispatcherServlet();
				}
				
				@Bean
				public ServletRegistrationBean<DispatcherServlet> dispatcherServletRegistration() {
					ServletRegistrationBean<DispatcherServlet> registration = new ServletRegistrationBean<>(dispatcherServlet(), "/");
					registration.setLoadOnStartup(1);
					return registration;
				}
			}
			
			

# T·ªëi ∆∞u DispatcherServlet cho ·ª©ng d·ª•ng l·ªõn (Senior Level) 
	
	## Caching ViewResolvers ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô load View 
		M·∫∑c ƒë·ªãnh, Spring Boot s·∫Ω t√¨m l·∫°i view m·ªói l·∫ßn request ƒë·∫øn. B·∫°n c√≥ th·ªÉ cache k·∫øt qu·∫£ ƒë·ªÉ tƒÉng t·ªëc: 

		@Bean
		public InternalResourceViewResolver viewResolver() {
			InternalResourceViewResolver resolver = new InternalResourceViewResolver();
			resolver.setPrefix("/WEB-INF/views/");
			resolver.setSuffix(".jsp");
			resolver.setCache(true); // Enable caching
			return resolver;
		}

	## N√©n Response ƒë·ªÉ gi·∫£m t·∫£i bƒÉng th√¥ng 
		Th√™m gzip compression v√†o response headers ƒë·ªÉ gi·∫£m th·ªùi gian t·∫£i: 
		
			@Bean
			public FilterRegistrationBean<GzipFilter> gzipFilter() {
				FilterRegistrationBean<GzipFilter> registration = new FilterRegistrationBean<>();
				registration.setFilter(new GzipFilter());
				registration.addUrlPatterns("/*");
				return registration;
			}

	
	
	##  T·ªëi ∆∞u HandlerMapping 
		N·∫øu ·ª©ng d·ª•ng c√≥ nhi·ªÅu Controller, n√™n d√πng RequestMappingHandlerMapping thay v√¨ SimpleUrlHandlerMapping ƒë·ªÉ tr√°nh performance bottleneck. 
	
		@Bean
		public RequestMappingHandlerMapping requestMappingHandlerMapping() {
			RequestMappingHandlerMapping mapping = new RequestMappingHandlerMapping();
			mapping.setOrder(0);
			return mapping;
		}


	## B·∫≠t Asynchronous Processing
		@Configuration
		@EnableAsync
		public class AsyncConfig {
			
			@Bean
			public WebMvcConfigurer webMvcConfigurer() {
				return new WebMvcConfigurer() {
					@Override
					public void configureAsyncSupport(AsyncSupportConfigurer configurer) {
						configurer.setDefaultTimeout(5000);
						configurer.setTaskExecutor(new SimpleAsyncTaskExecutor());
					}
				};
			}
		}

	
# 	C√°c c√¢u h·ªèi ph·ªèng v·∫•n Java Gold & Senior v·ªÅ DispatcherServlet 
	
	
	## C√¢u h·ªèi l√Ω thuy·∫øt 
		1. DispatcherServlet c√≥ ph·∫£i l√† m·ªôt Singleton kh√¥ng?
			Tr·∫£ l·ªùi: C√≥, nh∆∞ng m·ªói DispatcherServlet instance ch·ªâ x·ª≠ l√Ω m·ªôt ApplicationContext. 
			
		2. 	L√†m th·∫ø n√†o ƒë·ªÉ thay ƒë·ªïi c·∫•u h√¨nh m·∫∑c ƒë·ªãnh c·ªßa DispatcherServlet trong Spring Boot? 
			Tr·∫£ l·ªùi: C√≥ th·ªÉ override bean DispatcherServlet trong Java Config. 
				
		3. ViewResolver ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o trong Spring MVC? 
			Tr·∫£ l·ªùi: N√≥ t√¨m ki·∫øm view ph√π h·ª£p d·ª±a tr√™n t√™n tr·∫£ v·ªÅ t·ª´ Controller. 
			
		4. 	S·ª± kh√°c nhau gi·ªØa @RestController v√† @Controller l√† g√¨? 
			Tr·∫£ l·ªùi: @RestController t·ª± ƒë·ªông th√™m @ResponseBody v√†o t·∫•t c·∫£ ph∆∞∆°ng th·ª©c. 
			
	## 	C√¢u h·ªèi v·ªÅ t·ªëi ∆∞u h√≥a 
		5. N·∫øu h·ªá th·ªëng c√≥ qu√° nhi·ªÅu Controller, l√†m sao ƒë·ªÉ t·ªëi ∆∞u DispatcherServlet? 
			Tr·∫£ l·ªùi: C√≥ th·ªÉ d√πng caching, b·∫≠t async processing, v√† t·ªëi ∆∞u HandlerMapping. 
			
		6. L√†m sao ƒë·ªÉ x·ª≠ l√Ω file upload trong Spring MVC? 
			Tr·∫£ l·ªùi: C·∫•u h√¨nh MultipartResolver.
	
	
#  K·∫øt lu·∫≠n 

	DispatcherServlet l√† trung t√¢m c·ªßa Spring MVC, ƒë√≥ng vai tr√≤ Front Controller.

	N√≥ x·ª≠ l√Ω request th√¥ng qua HandlerMapping, HandlerAdapter, v√† ViewResolver.
	
	Hi·ªÉu r√µ c√°ch ho·∫°t ƒë·ªông c·ªßa n√≥ gi√∫p b·∫°n t·ªëi ∆∞u ·ª©ng d·ª•ng cho c√°c h·ªá th·ªëng l·ªõn.
	
	C·∫•u h√¨nh n√¢ng cao nh∆∞ caching, compression, async processing gi√∫p tƒÉng hi·ªáu su·∫•t.
	
	Hi·ªÉu s√¢u v·ªÅ n√≥ l√† b·∫Øt bu·ªôc n·∫øu b·∫°n mu·ªën thi Java Gold ho·∫∑c l√™n Senior Java Developer.	
	
	
</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>