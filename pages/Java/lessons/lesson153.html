<html><head><title>Lesson 153 == Exception Handling n√¢ng cao ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 153 -- Exception Handling n√¢ng cao -//</h1><pre>
#	1. Nguy√™n t·∫Øc thi·∫øt k·∫ø Exception Handling c·∫•p cao 

	##	Ph√¢n bi·ªát r√µ l·ªói Checked v√† Unchecked: 
		Checked exception l√† c√°c l·ªói c·∫ßn x·ª≠ l√Ω b·∫Øt bu·ªôc ho·∫∑c khai b√°o throws ƒë·ªÉ caller bi·∫øt.
		Unchecked exception th∆∞·ªùng l√† l·ªói logic, runtime, kh√¥ng b·∫Øt bu·ªôc catch.

	## Kh√¥ng l·∫°m d·ª•ng throws checked exception tr√™n to√†n b·ªô method ‚Üí g√¢y r·ªëi code, kh√≥ maintain. 
	## 	Fail fast v√† fail safe:
		
		Fail fast khi l·ªói nghi√™m tr·ªçng, kh√¥ng th·ªÉ ti·∫øp t·ª•c.
		Fail safe v·ªõi l·ªói kh√¥ng nghi√™m tr·ªçng, log v√† ti·∫øp t·ª•c.

# 2. Thi·∫øt k·∫ø hierarchy Exception h·ª£p l√Ω

	X√¢y d·ª±ng hierarchy exception ri√™ng cho domain, v√≠ d·ª•:
		
		public class AppException extends RuntimeException { ... }
		public class ValidationException extends AppException { ... }
		public class DatabaseException extends AppException { ... }

	Gi√∫p x·ª≠ l√Ω theo lo·∫°i l·ªói d·ªÖ d√†ng, t√°i s·ª≠ d·ª•ng, g·ªçn g√†ng.

# 3. Checked vs Unchecked: Khi n√†o d√πng g√¨?

	Checked Exception ph√π h·ª£p cho l·ªói ngo·∫°i l·ªá c√≥ th·ªÉ d·ª± ƒëo√°n ƒë∆∞·ª£c v√† caller c√≥ th·ªÉ x·ª≠ l√Ω (v√≠ d·ª•: IOException).
	
	Unchecked Exception cho l·ªói logic, bug, ho·∫∑c khi x·ª≠ l√Ω kh√¥ng kh·∫£ thi (NullPointerException, IllegalArgumentException).


# 4. Advanced Exception Propagation & Wrapping

	Kh√¥ng ƒë·ªÉ exception ‚Äúl·ªçt‚Äù m√† kh√¥ng wrap ho·∫∑c b·ªï sung th√¥ng tin:

try {
    // database call
} catch(SQLException e) {
    throw new DatabaseException("Failed to query user table", e);
}
	Gi√∫p stacktrace r√µ r√†ng, d·ªÖ debug.


# 5. Exception Handling trong ƒëa lu·ªìng / async

	## Async Exception Handling ph·ª©c t·∫°p: 
		V·ªõi CompletableFuture, b·∫Øt l·ªói b·∫±ng .exceptionally(), .handle().
		Trong Reactive, x·ª≠ l√Ω b·∫±ng onErrorResume(), onErrorMap().
		
	## B·∫Øt bu·ªôc log v√† propagate ƒë√∫ng c√°ch ƒë·ªÉ kh√¥ng m·∫•t l·ªói. 

# 6. Global Exception Handling & Logging	

	D√πng @ControllerAdvice + @ExceptionHandler trong Spring ƒë·ªÉ t·∫≠p trung x·ª≠ l√Ω l·ªói API.
	Log ƒë·∫ßy ƒë·ªß (stacktrace, context, request info).
	C√≥ th·ªÉ t√πy bi·∫øn tr·∫£ v·ªÅ response chu·∫©n h√≥a JSON l·ªói.
	
# 7. Retry, Circuit Breaker & Fallback Patterns

	Kh√¥ng ph·∫£i l·ªói n√†o c≈©ng n√™n throw ngay.
	√Åp d·ª•ng retry logic th√¥ng minh v·ªõi gi·ªõi h·∫°n, delay (Exponential Backoff).
	Circuit Breaker b·∫£o v·ªá h·ªá th·ªëng tr√°nh cascade failure (Hystrix, Resilience4j).
	Fallback methods cung c·∫•p ph∆∞∆°ng √°n d·ª± ph√≤ng.


# 8. Best Practices

| Th·ª±c h√†nh                                                   | L√Ω do                              |
| ----------------------------------------------------------- | ---------------------------------- |
| Kh√¥ng d√πng exception ƒë·ªÉ ƒëi·ªÅu khi·ªÉn lu·ªìng logic th∆∞·ªùng xuy√™n | G√¢y gi·∫£m performance, kh√≥ ƒë·ªçc code |
| Lu√¥n th√™m th√¥ng tin ng·ªØ c·∫£nh khi throw m·ªõi exception        | Gi√∫p debug d·ªÖ d√†ng                 |
| T·∫≠n d·ª•ng checked exception cho API boundary                 | Caller bi·∫øt ph·∫£i x·ª≠ l√Ω             |
| Tr√°nh catch r·ªông qu√° m·ª©c (vd: catch Exception)              | C√≥ th·ªÉ che gi·∫•u l·ªói quan tr·ªçng     |
| D√πng logging framework ph√π h·ª£p, tr√°nh printStackTrace() th√¥ | Qu·∫£n l√Ω log t·∫≠p trung, d·ªÖ monitor  |









</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>