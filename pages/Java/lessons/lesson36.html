<html><head><title>Lesson 36 == BlockingQueue ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 36 -- BlockingQueue -//</h1><pre>
# KhÃ¡i niá»‡m 
	BlockingQueue trong Java lÃ  má»™t trong nhá»¯ng cáº¥u trÃºc dá»¯ liá»‡u ráº¥t há»¯u Ã­ch khi lÃ m viá»‡c vá»›i cÃ¡c á»©ng dá»¥ng Ä‘a luá»“ng, nÆ¡i báº¡n cáº§n quáº£n lÃ½ vÃ  Ä‘á»“ng bá»™ hÃ³a viá»‡c truy cáº­p vÃ o má»™t hÃ ng Ä‘á»£i(queue) giá»¯a cÃ¡c luá»“ng (threads). ÄÃ¢y lÃ  má»™t giao diá»‡n trong Java, náº±m trong gÃ³i java.util.concurrent, giÃºp há»— trá»£ cÃ¡c thao tÃ¡c liÃªn quan Ä‘áº¿n hÃ ng Ä‘á»£i vá»›i cÆ¡ cháº¿ cháº·n(blocking) khi cÃ¡c Ä‘iá»u kiá»‡n khÃ´ng thá»a mÃ£n. 
	
	Má»™t BlockingQueue lÃ  má»™t hÃ ng Ä‘á»£i cÃ³ thá»ƒ chá»©a cÃ¡c pháº§n tá»­ vÃ  cÃ³ cÃ¡c hÃ nh vi Ä‘áº·c biá»‡t khi thao tÃ¡c thÃªm vÃ  láº¥y pháº§n tá»­ vÃ o hay ra cá»§a hÃ ng Ä‘á»£i gáº·p pháº£i má»™t sá»‘ Ä‘iá»u kiá»‡n nháº¥t Ä‘á»‹nh, nhÆ° hÃ ng Ä‘á»£i Ä‘áº§y hoáº·c rá»—ng. CÃ¡c luá»“ng cÃ³ thá»ƒ bá»‹ cháº·n khi cá»‘ gáº¯ng thao tÃ¡c trÃªn hÃ ng Ä‘á»£i trong nhá»¯ng tÃ¬nh huá»‘ng nÃ y. 
	
# CÃ¡c phÆ°Æ¡ng thá»©c chÃ­nh cá»§a BlockingQueue 
	.put(E e)                   : ThÃªm má»™t pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i. Náº¿u hÃ ng Ä‘á»£i Ä‘áº§y, phÆ°Æ¡ng thá»©c nÃ y sáº½ CHáº¶N Ä‘áº¿n khi cÃ³ khÃ´ng gian trá»‘ng 
	
	.take()                     : Láº¥y pháº§n tá»­ ra khá»i hÃ ng Ä‘á»£i. Náº¿u hÃ ng Ä‘á»£i Ä‘ang rá»—ng, phÆ°Æ¡ng thá»©c nÃ y sáº½ cháº·n cho Ä‘áº¿n khi cÃ³ pháº§n tá»­ trong hÃ ng Ä‘á»£i 
	
	.offer(E e)                 : ThÃªm má»™t pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i nhÆ°ng khÃ´ng cháº·n. Náº¿u hÃ ng Ä‘á»£i Ä‘áº§y, phÆ°Æ¡ng thá»©c nÃ y sáº½ tráº£ vá» false thay vÃ¬ cháº·n 
	
	.poll()                     : Láº¥y pháº§n tá»­ ra khá»i hÃ ng Ä‘á»£i mÃ  khÃ´ng cháº·n. Náº¿u hÃ ng Ä‘á»£i rá»—ng, phÆ°Æ¡ng thá»©c nÃ y sáº½ tráº£ vá» null thay vÃ¬ cháº·n  
	
	.remainingCapacity()        : Tráº£ vá» sá»‘ lÆ°á»£ng pháº§n tá»­ cÃ²n láº¡i cÃ³ thá»ƒ thÃªm vÃ o hÃ ng Ä‘á»£i mÃ  khÃ´ng vÆ°á»£t quÃ¡ dá»¥ng lÆ°á»£ng cá»§a nÃ³ 
	
	.clear()                    : XÃ³a táº¥t cáº£ cÃ¡c pháº§n tá»­ trong hÃ ng Ä‘á»£i 
	
#CÃ¡c cÃ i Ä‘áº·t cá»§a BlockingQueue 
	
	Java cung cáº¥p má»™t sá»‘ lá»›p triá»ƒn khai cá»§a BlockingQueue vá»›i cÃ¡c tÃ­nh nÄƒng khÃ¡c nhau 
	
	## 1. ArrayBlockingQueue 
		ÄÃ¢y lÃ  má»™t triá»ƒn khai BlockingQueue dá»±a trÃªn máº£ng cÃ³ dung lÆ°á»£ng cá»‘ Ä‘á»‹nh. Khi hÃ ng Ä‘á»£i Ä‘áº§y, cÃ¡c luá»“ng muá»‘n thÃªm pháº§n tá»­ sáº½ bá»‹ cháº·n cho Ä‘áº¿n khi cÃ³ khÃ´ng gian trá»‘ng. 
		
	## 2. LinkedBlockingQueue 
		ÄÃ¢y lÃ  má»™t triá»ƒn khai BlockingQueue sá»­ dá»¥ng danh sÃ¡ch liÃªn káº¿t. NÃ³ cÃ³ thá»ƒ cÃ³ dung lÆ°á»£ng cá»‘ Ä‘á»‹nh hoáº·c khÃ´ng giá»›i háº¡n. Náº¿u khÃ´ng giá»›i háº¡n, hÃ ng Ä‘á»£i cÃ³ thá»ƒ tÄƒng trÆ°á»Ÿng theo nhu cáº§u. 
		
	## 3.  PriorityBlockingQueue 
		ÄÃ¢y lÃ  má»™t triá»ƒn khai BlockingQueue há»— trá»£ cÃ¡c pháº§n tá»­ cÃ³ Ä‘á»™ Æ°u tiÃªn. CÃ¡c pháº§n tá»­ Ä‘Æ°á»£c láº¥y ra theo thá»© tá»± Æ°u tiÃªn thay vÃ¬ theo thá»© tá»± vÃ o 
		
	##  4 . DelayQueue 
		ÄÃ¢y lÃ  má»™t triá»ƒn khai BlockingQueue cho phÃ©p cÃ¡c pháº§n tá»­ cÃ³ thá»ƒ Ä‘Æ°á»£c trÃ¬ hoÃ£n cho Ä‘áº¿n má»™t thá»i Ä‘iá»ƒm nháº¥t Ä‘á»‹nh trÆ°á»›c khi cÃ³ thá»ƒ láº¥y ra  
		
# á»¨ng dá»¥ng cá»§a BlockingQueue
	BlockingQueue ráº¥t há»¯u Ã­ch trong cÃ¡c á»©ng dá»¥ng Ä‘a luá»“ng(multi-threaded applications), Ä‘áº·c biá»‡t trong nhá»¯ng tÃ¬nh huá»‘ng sau  : 
	
		- Producer-Consumer Problem(BÃ i toÃ¡n nahf sáº£n xuáº¥t vÃ  ngÆ°á»i tiÃªu dÃ¹ng) 
			Má»™t luá»“ng sáº£n xuáº¥t dá»¯ liá»‡u vÃ  thÃªm vÃ o hÃ ng Ä‘á»£i, trong khi má»™t luá»“ng khÃ¡c láº¥y dá»¯ liá»‡u tá»« hÃ ng Ä‘á»£i Ä‘á»ƒ xá»­ lÃ½. 
			BlockingQueue giÃºp dá»… dÃ ng Ä‘á»“ng bá»™ hÃ³a giá»¯a cÃ¡c luá»“ng mÃ  khÃ´ng cáº§n pháº£i dÃ¹ng nhiá»u synchronized blocks 
			
		- Task Scheduling(Láº­p lá»‹ch cÃ´ng viá»‡c)
			CÃ¡c cÃ´ng viá»‡c(task) Ä‘Æ°á»£c thÃªm vÃ o hÃ ng Ä‘á»£i vÃ  cÃ¡c luá»“ng xá»­ lÃ½ chÃºng theo thá»© tá»± cÃ³ sáºµn. BlockingQueue sáº½ Ä‘áº£m báº£o ráº±ng cÃ¡c luá»“ng khÃ´ng láº¥y cÃ´ng viá»‡c khi cÃ´ng cÃ³ cÃ´ng viá»‡c nÃ o trong hÃ ng Ä‘á»£i hoáº·c khÃ´ng thÃªm cÃ´ng viá»‡c má»›i khi hÃ ng Ä‘á»£i Ä‘Ã£ Ä‘áº§y 
			
# VÃ­ dá»¥ vá» BlockingQueue
	DÆ°á»›i Ä‘Ã¢y lÃ  vÃ­ dá»¥ vá» cÃ¡ch sá»­ dá»¥ng BlockingQueue Ä‘á»ƒ giáº£i quyáº¿t bÃ i toÃ¡n nahf sáº£n xuáº¥t vÃ  ngÆ°á»i tiÃªu dÃ¹ng  
		
								class Producer implements Runnable {
									private BlockingQueue<Integer> queue;
								
									public Producer(BlockingQueue<Integer> queue) {
										this.queue = queue;
									}
								
									@Override
									public void run() {
										try {
											int i = 0;
											while (true) {
												queue.put(i);  // ThÃªm pháº§n tá»­ vÃ o hÃ ng Ä‘á»£i, sáº½ cháº·n náº¿u hÃ ng Ä‘á»£i Ä‘áº§y
												System.out.println("Produced: " + i);
												i++;
												Thread.sleep(1000);  // Giáº£ láº­p thá»i gian sáº£n xuáº¥t
											}
										} catch (InterruptedException e) {
											Thread.currentThread().interrupt();
										}
									}
								}
								
								class Consumer implements Runnable {
									private BlockingQueue<Integer> queue;
								
									public Consumer(BlockingQueue<Integer> queue) {
										this.queue = queue;
									}
								
									@Override
									public void run() {
										try {
											while (true) {
												Integer item = queue.take();  // Láº¥y pháº§n tá»­ ra khá»i hÃ ng Ä‘á»£i, sáº½ cháº·n náº¿u hÃ ng Ä‘á»£i rá»—ng
												System.out.println("Consumed: " + item);
												Thread.sleep(1500);  // Giáº£ láº­p thá»i gian tiÃªu thá»¥
											}
										} catch (InterruptedException e) {
											Thread.currentThread().interrupt();
										}
									}
								}
								
								public class BlockingQueueExample {
									public static void main(String[] args) {
										BlockingQueue<Integer> queue = new ArrayBlockingQueue<>(10);  // HÃ ng Ä‘á»£i cÃ³ dung lÆ°á»£ng tá»‘i Ä‘a lÃ  10
								
										Thread producerThread = new Thread(new Producer(queue));
										Thread consumerThread = new Thread(new Consumer(queue));
								
										producerThread.start();
										consumerThread.start();
									}
								}


			// Giáº£i thÃ­ch  
			Producer (NhÃ  sáº£n xuáº¥t) sáº½ liÃªn tá»¥c táº¡o ra cÃ¡c sá»‘ nguyÃªn vÃ  thÃªm chÃºng vÃ o BlockingQueue. Náº¿u hÃ ng Ä‘á»£i Ä‘áº§y, put() sáº½ cháº·n vÃ  Ä‘á»£i cho Ä‘áº¿n khi cÃ³ khÃ´ng gian trá»‘ng
			
			Consumer (NgÆ°á»i tiÃªu dÃ¹ng)
				Sáº½ liÃªn tá»¥c láº¥y ra cÃ¡c sá»‘ nguyÃªn tá»« BlockingQueue vÃ  in ra . Náº¿u hÃ ng Ä‘á»£i rá»—ng, take() sáº½ cháº·n vÃ  Ä‘á»£i cho Ä‘áº¿n khi cÃ³ pháº§n tá»­ má»›i trong hÃ ng Ä‘á»£i. 
				
# Lá»£i Ã­ch cá»§a BlockingQueue
			- Äá»“ng bá»™ hÃ³a tá»± Ä‘á»™ng : GiÃºp quáº£n lÃ½ cÃ¡c váº¥n Ä‘á» Ä‘á»“ng bá»™ hÃ³a giá»¯a cÃ¡c luá»“ng mÃ  khÃ´ng cáº§n pháº£i sá»­ dá»¥ng cÃ¡c synchronized blocks. 
			- Äáº£m báº£o an toÃ n dá»¯ liá»‡u : Cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c Ä‘áº£m báº£o ráº±ng cÃ¡c pháº§n tá»­ sáº½ Ä‘Æ°á»£c thÃªm vÃ o hoáº·c láº¥y ra má»™t cÃ¡ch an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng  
			- Giáº£m thiá»ƒu kháº£ nÄƒng bá»‹ cháº·n vÃ´ thá»i háº¡n : CÃ¡c phÆ°Æ¡ng thá»©c nhÆ° offer() vÃ  poll() giÃºp trÃ¡nh viá»‡c luá»“ng bá»‹ cháº·n vÃ´ thá»i háº¡n 


# TÃ³m táº¯t : 
				BlockingQueue lÃ  má»™t interface há»— trá»£ cÃ¡c thao tÃ¡c Ä‘á»“ng bá»™ giá»¯a cÃ¡c luá»“ng khi lÃ m viá»‡c vá»›i hÃ ng Ä‘á»£i, giÃºp giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» nhÆ° nhÃ  sáº£n xuáº¥t vÃ  ngÆ°á»i tiÃªu dÃ¹ng  
				Java cung cáº¥p nhiá»u triá»ƒn khai cá»§a BlockingQueue nhÆ° ArrayBlockingQueue, LinkedBlockingQueue, PriorityBlockingQueue giÃºp báº¡n lá»±a chá»n phÃ¹ há»£p vá»›i á»©ng dá»¥ng cá»§a mÃ¬nh 





</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>