<html><head><title>Lesson 103 == Redis ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 103 -- Redis -//</h1><pre># KhÃ¡i niá»‡m  
	Redis khÃ´ng chá»‰ lÃ  1 cache - Ä‘Ã³ lÃ  má»™t ná»n táº£ng dá»¯ liá»‡u in-memory Ä‘a nÄƒng cá»±c ká»³ quan trá»ng trong cÃ¡c há»‡ thá»‘ng scale lá»›n, latency tháº¥p vÃ  real-tome. 
	
	Redis = Remote Dictionary Server 
	-> LÃ  data structure store cháº¡y trÃªn RAM há»— trá»£  
	 
		- Key-Value 
		- Hash, List, Set, Sorted Set
		- Stream, Bitmap, HyperLogLog
		- Pub/Sub
		- Lua scripting
		- TTL (Time To Live)
		- Transaction, Cluster, Replication,Persistence


# CÃ¡c use-case sá»­ dá»¥ng Redis thá»±c táº¿ 
	
Use Case 					 | Giáº£i thÃ­ch 											| MÃ´ hÃ¬nh
âœ… Caching 		 	 		 | TÄƒng tá»‘c API, DB query, AI model response 		| Read-through, Write-through
âœ… Session Store	 		 | LÆ°u thÃ´ng tin phiÃªn user (SSO, JWT metadata) 	| Cookie â†’ Redis
âœ… Pub/Sub		 	 		 | Microservice events hoáº·c notification 			| Redis Pub/Sub
âœ… Queue / Task	 	 		 | DÃ¹ng Redis List lÃ m job queue					| Celery, RQ
âœ… Rate Limiting 	 		 | Chá»‘ng spam, brute-force 							| Counter vá»›i TTL
âœ… Leaderboard 		 		 | Game, app xáº¿p háº¡ng 								| Sorted Set
âœ… Feature flag				 | KÃ­ch hoáº¡t táº¡m thá»i 1 tÃ­nh nÄƒng 					| Key TTL
âœ… Stream / Log ingestion 	 | Ingest real-time stream â†’ ML 					| Redis Streams



# Triá»ƒn khai Redis Ä‘Ãºng cÃ¡ch trong dá»± Ã¡n 

	## Triá»ƒn khai Redis cache cho Spring Boot 
		- DÃ¹ng @Cacheable, @CacheEvict, cáº¥u hÃ¬nh TTL 
		- TÃ­ch há»£p vá»›i RedisTemplate hoáº·c Lecttuce 
		
		@Cacheable(value = "products", key = "#id", unless="#result == null")
		public Product getProduct(String id) { ... }
		
		ğŸ§  ChÃº Ã½: Pháº£i clear cache khi ghi DB (@CacheEvict), khÃ´ng thÃ¬ stale data.




	## Redis lÃ  Stateful service ->  KhÃ´ng nÃªn dÃ¹ng theo kiá»ƒu just install 
		- DÃ¹ng Redis Sentinel Ä‘á»ƒ failover(HA)
		- DÃ¹ng Redis Cluster Ä‘á»ƒ scale horizontal(shard)
		- DÃ¹ng Persistent (RDB, AOF) náº¿u cáº§n khÃ´i phá»¥c Data 
		


# Redis Architecture 

	
	## Redis Single Node 
		- RAM only 
		- Ráº¥t nhanh  (~sub-millisecond)
		- NhÆ°ng : khÃ´ng scale, khÃ´ng HA 
	
	## Redis Replication 
		-Master â†’ Replica
		-Replica chá»‰ read
		-Tá»‘t cho read-heavy system


	## Redis Sentinel 
		-Theo dÃµi master
		-Tá»± Ä‘á»™ng failover
		-Client pháº£i há»— trá»£ discovery Sentinel

	## Redis Cluster 
		- Nhiá»u node, shard key theo hash slot (16384 slot)
		- Scale tá»‘t
		- NhÆ°ng yÃªu cáº§u client cluster-aware
			[Client] â†’ [Redis Cluster]
				â”œâ”€â”€ Slot 0-5460 â†’ Node A
				â”œâ”€â”€ Slot 5461-10922 â†’ Node B
				â””â”€â”€ Slot 10923-16384 â†’ Node C



# Nhá»¯ng ká»¹ thuáº­t nÃ¢ng cao cáº§n náº¯m Ä‘á»ƒ lÃ m chá»§ Redis 


Ká»¹ thuáº­t 								| Ã nghÄ©a 										| Gá»£i Ã½ há»c
ğŸ” TTL / Expiry							| Háº¡n cháº¿ memory leak 						| EXPIRE, SETEX, @Cacheable(ttl=...)
ğŸ”’ Distributed Lock 					| Äá»ƒ trÃ¡nh race-condition					| SETNX + EXPIRE, Redlock algorithm
ğŸ”„ Read-through / Write-through cache 	| Sync vá»›i DB 								| Tá»± viáº¿t code xá»­ lÃ½
ğŸ§ª Cache Invalidation 					| Tricky, quan trá»ng 						| @CacheEvict, versioning
ğŸ” Pub/Sub & Streams 					| Giao tiáº¿p giá»¯a service 					| DÃ¹ng nhÆ° Kafka mini
ğŸ“ˆ Monitoring & Metrics 				| PhÃ¡t hiá»‡n memory full, eviction			| RedisInsight, Prometheus exporter
ğŸš¨ Eviction Policy 						| Chá»n chiáº¿n lÆ°á»£c khi full RAM 				| volatile-lru, allkeys-lru, noeviction, ...
ğŸ” Security 							| Password auth, TLS, ACL					| Cáº§n Ä‘áº·c biá»‡t chÃº Ã½ náº¿u multi-tenant
ğŸ“¦ Persistence							| RDB vs AOF, hybrid						| CÃ¢n nháº¯c trade-off tá»‘c Ä‘á»™ vs durability




# ğŸ“š VI. Nhá»¯ng kiáº¿n thá»©c liÃªn quan cáº§n há»c Ä‘á»ƒ thÃ nh tháº¡o Redis 
	
	
	## ğŸ”¥ 1. Redis core commands (CRUD, TTL, Hash, Set, ZSet, List) 
		SET, GET, HSET, LPUSH, ZADD, EXPIRE, DEL 


	## âš™ï¸ 2. CÃ¡ch tá»• chá»©c data trong Redis (key design)
	
			-CÃ³ nÃªn dÃ¹ng user:1234:cart hay cart:1234?
			-TrÃ¡nh key explosion
			-TTL cho má»—i namespace	
	
	
	## ğŸ§  3. Redlock algorithm 
			- DÃ¹ng Redis Ä‘á»ƒ táº¡o distributed mutex
			- Cáº§n hiá»ƒu rÃµ Ä‘á»ƒ trÃ¡nh deadlock hoáº·c inconsistency		
	
	
	## ğŸ•¸ 4. Redis Cluster vs Sentinel
	
			- Khi nÃ o dÃ¹ng cluster?
			- Khi nÃ o chá»‰ cáº§n HA?
	
	
	
	## ğŸ§ª 5. Redis Testing, Fault tolerance
	
			- Giáº£ láº­p Redis down
			- Redis delay â†’ service behave tháº¿ nÃ o?	
	
	
	## ğŸ“ˆ 6. Monitoring (Redis Exporter, Grafana, Slowlog)
	
			- PhÃ¡t hiá»‡n slow commands
			- Track memory usage theo key	
	
	## ğŸ“– 7. Lua scripting
	
			- DÃ¹ng EVAL cháº¡y batch logic atomic
			- VÃ­ dá»¥: gá»™p 3 command thÃ nh 1 block, trÃ¡nh race


	## ğŸ” 8. Redis Security
			
			- KhÃ´ng expose Redis ra public IP
			- Báº¯t buá»™c config ACL, password, network restriction



# ğŸš€  Redis trong kiáº¿n trÃºc Microservices


ThÃ nh pháº§n					Redis á»©ng dá»¥ng
API Cache					@Cacheable
Event Queue					List hoáº·c Stream
Config Sync					Pub/Sub
Lock/Mutex					Redlock
Session						Redis hash
Leaderboard					Sorted Set



</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>