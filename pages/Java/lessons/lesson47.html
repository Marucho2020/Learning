<html><head><title>Lesson 47 ==  ==  == C√°c k·ªπ thu·∫≠t Java RMI n√¢ng cao ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 47 --  --  -- C√°c k·ªπ thu·∫≠t Java RMI n√¢ng cao -//</h1><pre> 
//------------------‚úÖ Giao ti·∫øp gi·ªØa c√°c m√°y kh√°c nhau trong m·∫°ng
	# Kh√°i ni·ªám 
		Java RMI cho ph√©p c√°c ƒë·ªëi t∆∞·ª£ng Java ch·∫°y tr√™n m√°y n√†y c√≥ th·ªÉ g·ªçi ph∆∞∆°ng th·ª©c tr√™n ƒë·ªëi t∆∞·ª£ng ch·∫°y ·ªü m√°y kh√°c nh∆∞ th·ªÉ ch√∫ng ƒëang g·ªçi ph∆∞∆°ng th·ª©c c·ª•c b·ªô. ƒêi·ªÅu n√†y th·ª±c hi·ªán ƒë∆∞·ª£c nh·ªù stub(client) v√† skeleton (server)
		
			‚úÖ C√°c th√†nh ph·∫ßn ch√≠nh trong RMI:
			Remote Interface: ƒê·ªãnh nghƒ©a c√°c ph∆∞∆°ng th·ª©c m√† client c√≥ th·ªÉ g·ªçi t·ª´ xa.
			Remote Object (Implementation): Cung c·∫•p ph·∫ßn tri·ªÉn khai c·ªßa remote interface.
			Stub & Skeleton: Stub l√† proxy tr√™n client, c√≤n Skeleton (tr∆∞·ªõc Java 5) nh·∫≠n y√™u c·∫ßu t·ª´ stub, g·ªçi h√†m v√† g·ª≠i k·∫øt qu·∫£ v·ªÅ.
			RMI Registry: C∆° s·ªü d·ªØ li·ªáu l∆∞u tr·ªØ c√°c remote object ƒë√£ ƒëƒÉng k√Ω.
			RMI Transport: L·ªõp tr·ª´u t∆∞·ª£ng x·ª≠ l√Ω truy·ªÅn d·ªØ li·ªáu gi·ªØa client v√† server.
			
			‚úÖ C√°ch giao ti·∫øp gi·ªØa hai m√°y:
			Server kh·ªüi ƒë·ªông: ƒêƒÉng k√Ω remote object v·ªõi RMI Registry.
			Client tra c·ª©u (lookup) remote object t·ª´ Registry.
			Stub tr√™n client g·ª≠i y√™u c·∫ßu t·ªõi remote object tr√™n server.
			Server th·ª±c hi·ªán ph∆∞∆°ng th·ª©c v√† tr·∫£ k·∫øt qu·∫£ v·ªÅ client.
			
			
			
	# V√≠ d·ª• giao ti·∫øp qua m·∫°ng 
		// Remote Interface
					import java.rmi.*;
					
					public interface RemoteInterface extends Remote {
						String sayHello() throws RemoteException;
					}
					
					// Server Implementation
					import java.rmi.*;
					import java.rmi.server.*;
					
					public class RemoteImpl extends UnicastRemoteObject implements RemoteInterface {
						protected RemoteImpl() throws RemoteException {
							super();
						}
					
						public String sayHello() {
							return "Hello from Server!";
						}
					
						public static void main(String[] args) {
							try {
								RemoteImpl obj = new RemoteImpl();
								Naming.rebind("rmi://localhost/HelloServer", obj);
								System.out.println("Server is ready.");
							} catch (Exception e) {
								e.printStackTrace();
							}
						}
					}
					
					// Client
					import java.rmi.*;
					
					public class RMIClient {
						public static void main(String[] args) {
							try {
								RemoteInterface obj = (RemoteInterface) Naming.lookup("rmi://localhost/HelloServer");
								System.out.println(obj.sayHello());
							} catch (Exception e) {
								e.printStackTrace();
							}
						}
					}


# C√°c v·∫•n ƒë·ªÅ g·∫∑p ph·∫£i khi giao ti·∫øp qua m·∫°ng . 

			‚úÖ C√°c v·∫•n ƒë·ªÅ g·∫∑p ph·∫£i khi giao ti·∫øp qua m·∫°ng:
				Firewall ngƒÉn ch·∫∑n c·ªïng RMI.
				ƒê·ªãa ch·ªâ IP thay ƒë·ªïi g√¢y l·ªói java.rmi.ConnectException.
				Security Policy h·∫°n ch·∫ø vi·ªác t·∫£i l·ªõp t·ª´ xa.
				T∆∞·ªùng l·ª≠a NAT kh√¥ng cho ph√©p k·∫øt n·ªëi hai chi·ªÅu.



//----------------------------‚úÖ Security Policy trong RMI

	# Kh√°i ni·ªám 
		Java RMI ch·∫°y tr√™n m√¥i tr∆∞·ªùng ph√¢n t√°n n√™n c·∫ßn b·∫£o m·∫≠t ƒë·ªÉ tr√°nh b·ªã khai th√°c 
		
	# C√°c r·ªßi ro b·∫£o m·∫≠t 
		
		- K·∫ª t·∫•n c√¥ng g·ª≠i m√£ ƒë·ªôc ƒë·∫øn server ho·∫∑c client 
		- Giao ti·∫øp gi·ªØa client-server c√≥ th·ªÉ b·ªã nghe l√©n  
		- T·∫£i code t·ª´ xa c√≥ th·ªÉ b·ªã k·∫ª x·∫•u l·ª£i  
		
		
	# Security Manager & Policy File 
		
		## Java y√™u c·∫ßu c√†i ƒë·∫∑t m·ªôt Security Manager ƒë·ªÉ ki·∫øm so√°t quy·ªÅn truy c·∫≠p 
			
			
			### B∆∞·ªõc 1 
			if (System.getSecurityManager() == null) {
				System.setSecurityManager(new SecurityManager());
			}

			### B∆∞·ªõc 2  Ta c·∫ßn m·ªôt file policy ƒë·ªÉ c·∫•p quy·ªÅn cho ·ª©ng d·ª•ng 
				grant {
					permission java.net.SocketPermission "*:1024-65535", "connect,accept";
					permission java.io.FilePermission "/path/to/files/-", "read,write";
					permission java.lang.RuntimePermission "createClassLoader";
				};

			### B∆∞·ªõc 3 : Sau ƒë√≥ ch·∫°y java v·ªõi 
				java -Djava.security.policy=policy.txt Server

	
	# C√°ch h·∫°n ch·∫ø r·ªßi ro 
		- Kh√¥ng t·∫£i m√£ ngu·ªìn t·ª´ ngu·ªìn kh√¥ng ƒë√°ng tin c·∫≠y 
		- D√πng SSL/TLS ƒë·ªÉ m√£ h√≥a giao ti·∫øp RMI 
		- Gi·ªõi h·∫°n quy·ªÅn truy c·∫≠p trong Security Policy 
		- S·ª≠ d·ª•ng x√°c th·ª±c (Authentication) n·∫øu c·∫ßn 


//-------------------------‚úÖ RMI Callback (Client g·ªçi ng∆∞·ª£c l·∫°i Server)
	# Kh√°i ni·ªám 
		M√¥ h√¨nh chu·∫©n c·ªßa RMI l√† Client g·ªçi server , nh∆∞ng c√≥ tr∆∞·ªùng h·ª£p Server c·∫ßn g·ªçi l·∫°i Client  
		
	# C√°ch tri·ªÉn khai 
		1. Client cung c·∫•p m·ªôt Remote Interface 
		2. Server ph∆∞∆°ng th·ª©c tr√™n Remote Interface c·ªßa Client 
		
	# V√≠ du RMI Callback 
		
		## B∆∞·ªõc 1 : Client t·∫°o Remote Interface ƒë·ªÉ Server g·ªçi l·∫°i 
		
				import java.rmi.*;
				public interface ClientCallback extends Remote {
					void notify(String message) throws RemoteException;
				}


		## B∆∞·ªõc 2 : Client tri·ªÉn khai interface 
				import java.rmi.server.*;
	
				public class ClientImpl extends UnicastRemoteObject implements ClientCallback {
					protected ClientImpl() throws RemoteException {
						super();
					}
				
					public void notify(String message) throws RemoteException {
						System.out.println("Server callback: " + message);
					}
				}


		## B∆∞·ªõc 3 : Server gi·ªØ danh s√°ch Client v√† g·ªçi l·∫°i 
		
				import java.util.*;
				import java.rmi.*;
				
				public class ServerImpl extends UnicastRemoteObject {
					private List<ClientCallback> clients = new ArrayList<>();
				
					protected ServerImpl() throws RemoteException {}
				
					public void registerClient(ClientCallback client) throws RemoteException {
						clients.add(client);
						System.out.println("Client registered.");
					}
				
					public void sendUpdates() throws RemoteException {
						for (ClientCallback client : clients) {
							client.notify("Server message!");
						}
					}
				}


		## ·ª®ng d·ª•ng c·ªßa RMI Callback : 
			Th√¥ng b√°o s·ª± ki·ªán t·ª´ Server v·ªÅ CLient(v√≠ d·ª• tin nh·∫Øn m·ªõi , gi√° ch·ª©ng kho√°n thay ƒë·ªïi )
			H·ªá th·ªëng Push Notification trong ·ª©ng d·ª•ng Java ph√¢n t√°n 
			M√¥ h√¨nh pub-sub (publisher-subscriber)


//------------------------------‚úÖ Dynamic Code Loading trong RMI

	# Kh√°i ni·ªám 
		Dynamic Code Loading cho ph√©p client ho·∫∑c server t·∫£i m√£(class) t·ª´ xa trong qu√° tr√¨nh th·ª±c thi 
		
	# C√°ch ho·∫°t ƒë·ªông 
		- Khi RMI nh·∫≠n ƒë∆∞·ª£c ƒë·ªëi t∆∞·ª£ng kh√¥ng c√≥ trong JVM hi·ªán t·∫°i, n√≥ t·∫£i class t·ª´ m·ªôt URL b√™n ngo√†i 
		- ƒêi·ªÅu n√†y gi√∫p tr√°nh c·∫ßn ph·∫£i ph√¢n ph·ªëi m√£ t·ª´ tr∆∞·ªõc 
		
	# C√°ch k√≠ch ho·∫°t Dynamic Code Loading 
		java -Djava.rmi.server.codebase="http://myserver/classes/" Server


	# R·ªßi ro b·∫£o m·∫≠t 
		- K·∫ª t·∫•n c√¥ng c√≥ th·ªÉ cung c·∫•p m√£ ƒë·ªôc qua class t·∫£i t·ª´ xa 
		-> Gi·∫£i ph√°p : Ch·ªâ cho ph√©p t·∫£i code t·ª´ ngu·ªìn tin c·∫≠y b·∫±ng Security Policy 
		


</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>