<html><head><title>Lesson 156 == Comparable vÃ  Comparator ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 156 -- Comparable vÃ  Comparator -//</h1><pre>
# ğŸ” 1. KhÃ¡c biá»‡t tá»•ng thá»ƒ giá»¯a Comparable vs Comparator
| Äáº·c Ä‘iá»ƒm               | `Comparable<T>`                                        | `Comparator<T>`                                        |
| ---------------------- | ------------------------------------------------------ | ------------------------------------------------------ |
| Má»¥c Ä‘Ã­ch               | So sÃ¡nh **chÃ­nh báº£n thÃ¢n class**                       | So sÃ¡nh **tá»« bÃªn ngoÃ i** (khÃ´ng can thiá»‡p class)       |
| CÃ¡ch dÃ¹ng              | Class implement `Comparable` vÃ  override `compareTo()` | Viáº¿t class/instance `Comparator` vÃ  truyá»n vÃ o khi cáº§n |
| Thay Ä‘á»•i logic so sÃ¡nh | KhÃ³: chá»‰ cÃ³ má»™t cÃ¡ch sáº¯p xáº¿p duy nháº¥t                  | Dá»…: cÃ³ thá»ƒ táº¡o nhiá»u `Comparator` khÃ¡c nhau            |
| VÃ­ dá»¥ dÃ¹ng             | `Collections.sort(list)` náº¿u pháº§n tá»­ `Comparable`      | `Collections.sort(list, comparator)`                   |


# ğŸ”§ 2. Comparable<T> â€“ Ná»™i táº¡i cá»§a Ä‘á»‘i tÆ°á»£ng

public class User implements Comparable<User> {
    private String name;
    private int age;

    @Override
    public int compareTo(User other) {
        return Integer.compare(this.age, other.age); // sáº¯p xáº¿p theo tuá»•i
    }
}


	## Ã nghÄ©a: 
	Báº¡n Ä‘ang Ã©p User pháº£i cÃ³ thá»© tá»± tá»± nhiÃªn.
	Khi báº¡n Ä‘Æ°a User vÃ o TreeSet, PriorityQueue, Collections.sort() => Java sáº½ dÃ¹ng compareTo().

	## Háº¡n cháº¿: 
		Chá»‰ cÃ³ má»™t cÃ¡ch so sÃ¡nh duy nháº¥t. Muá»‘n thay Ä‘á»•i pháº£i sá»­a class.


# âš™ï¸ 3. Comparator<T> â€“ So sÃ¡nh tá»« bÃªn ngoÃ i

	## CÃ¡ch dÃ¹ng:
	Comparator<User> nameComparator = Comparator.comparing(User::getName);
	Collections.sort(userList, nameComparator);


	## Hoáº·c custom complex logic: 
Comparator<User> ageThenName = (u1, u2) -> {
    int cmp = Integer.compare(u1.getAge(), u2.getAge());
    if (cmp != 0) return cmp;
    return u1.getName().compareTo(u2.getName());
};


	## Æ¯u Ä‘iá»ƒm:
		KhÃ´ng cáº§n sá»­a class
		CÃ³ thá»ƒ táº¡o nhiá»u logic so sÃ¡nh khÃ¡c nhau tÃ¹y ngá»¯ cáº£nh


# ğŸ’¥ 4. á»¨ng dá»¥ng thá»±c chiáº¿n â€“ vÃ­ dá»¥ báº¡n dÃ¹ng trong há»‡ thá»‘ng lá»›n

| Use case                                            | So sÃ¡nh nÃ o phÃ¹ há»£p? | Giáº£i thÃ­ch                                         |
| --------------------------------------------------- | -------------------- | -------------------------------------------------- |
| DÃ¹ng `TreeMap<User, Data>` Ä‘á»ƒ lÆ°u user theo tuá»•i    | `Comparable<User>`   | VÃ¬ `TreeMap` sáº½ sáº¯p theo key                       |
| DÃ¹ng `PriorityQueue<User>` Ä‘á»ƒ láº¥y ra ngÆ°á»i tráº» nháº¥t | `Comparator<User>`   | Truyá»n comparator vÃ o constructor                  |
| Lá»c danh sÃ¡ch User theo nhiá»u tiÃªu chÃ­              | `Comparator.chain()` | DÃ¹ng `.thenComparing(...)` Ä‘á»ƒ viáº¿t logic Ä‘a táº§ng   |
| KhÃ´ng Ä‘Æ°á»£c sá»­a class (code bÃªn thá»© ba)              | `Comparator`         | KhÃ´ng thá»ƒ dÃ¹ng `Comparable` náº¿u khÃ´ng sá»Ÿ há»¯u class |




# ğŸ”„ 5. Káº¿t há»£p Comparable + Comparator Ä‘Ãºng cÃ¡ch

	Collections.sort(users); // sáº½ gá»i user.compareTo()
	Collections.sort(users, Comparator.comparing(User::getName)); // override cÃ¡ch máº·c Ä‘á»‹nh


	Trong TreeSet:
	Set<User> set = new TreeSet<>(); // dÃ¹ng compareTo()
	Set<User> set = new TreeSet<>(Comparator.comparing(User::getName)); // custom comparator

# ğŸ” 6. NguyÃªn táº¯c thiáº¿t káº¿: compareTo & compare pháº£i consistent vá»›i equals()

	Náº¿u báº¡n violate nguyÃªn táº¯c nÃ y, TreeSet, HashSet, hoáº·c Map sáº½ cÃ³ hÃ nh vi báº¥t ngá».
	
	VÃ­ dá»¥: náº¿u equals() tráº£ vá» true nhÆ°ng compareTo() láº¡i != 0, thÃ¬:
	
Set<User> set = new TreeSet<>();
set.add(user1);
set.add(user2); // náº¿u equals true nhÆ°ng compareTo != 0 => sáº½ váº«n Ä‘Æ°á»£c thÃªm vÃ o!



# ğŸ§  7. Functional Style Comparator (Java 8+)

	Khi báº¡n káº¿t há»£p vá»›i lambda, stream:

users.sort(
    Comparator.comparing(User::getAge)
              .thenComparing(User::getName)
              .reversed()
);


	Hoáº·c:
users.stream()
     .sorted(Comparator.comparing(User::getAge))
     .collect(Collectors.toList());
	


# ğŸ”¥ 8. CÃ¢u há»i thÆ°á»ng gáº·p trong phá»ng váº¥n senior:

1. CÃ³ thá»ƒ vá»«a implements Comparable, vá»«a truyá»n Comparator khÃ´ng?
	â†’ CÃ³. Khi truyá»n Comparator thÃ¬ Comparator sáº½ Ä‘Æ°á»£c Æ°u tiÃªn, khÃ´ng dÃ¹ng compareTo() ná»¯a.

2. TreeMap hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o khi key khÃ´ng implement Comparable?
	â†’ Báº¡n pháº£i truyá»n Comparator vÃ o constructor, náº¿u khÃ´ng sáº½ ClassCastException.

3. Comparator cÃ³ thá»ƒ thay Ä‘á»•i khi runtime khÃ´ng? 
	â†’ CÃ³. Báº¡n cÃ³ thá»ƒ inject Comparator khÃ¡c vÃ o runtime, ráº¥t há»¯u Ã­ch cho config-driven sorting.






</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>