<html><head><title>Lesson 199 == Pipeline Pattern ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 199 -- Pipeline Pattern -//</h1><pre>

# ğŸ¯ Má»¥c tiÃªu:

	Thay vÃ¬ code kiá»ƒu OOP phÃ¢n lá»›p nhÆ°:

		EmployeeService -> EmployeeMapper -> EmployeeRepository

	â†’ Ta â€œdáº¹pâ€ háº¿t cÃ¡c lá»›p trung gian Ä‘Ã³, chá»‰ giá»¯ chuá»—i cÃ¡c hÃ m thuáº§n (pure functions) ná»‘i tiáº¿p nhau, má»—i hÃ m thá»±c hiá»‡n má»™t bÆ°á»›c biáº¿n Ä‘á»•i dá»¯ liá»‡u.
	
	Káº¿t quáº£ lÃ  má»™t pipeline: dá»¯ liá»‡u Ä‘áº§u vÃ o â†’ Ä‘i qua chuá»—i cÃ¡c transform â†’ ra káº¿t quáº£ cuá»‘i cÃ¹ng.


# ğŸ§  Váº¥n Ä‘á» cá»§a kiáº¿n trÃºc Layered OOP truyá»n thá»‘ng
	VÃ­ dá»¥ cá»• Ä‘iá»ƒn:

class EmployeeService {
    private EmployeeRepository repo;
    private EmployeeMapper mapper;
    private NotificationService notifier;

    public void processActiveEmployees() {
        List<Employee> employees = repo.findAll();
        List<EmployeeDTO> dtos = mapper.toDTOs(employees);
        for (EmployeeDTO dto : dtos) {
            if (dto.isActive()) {
                notifier.send(dto);
            }
        }
    }
}

	## NÃ³ cÃ³ 3 lá»›p:

		Repository: truy xuáº¥t dá»¯ liá»‡u
		
		Mapper: chuyá»ƒn Ä‘á»•i entity â†” DTO
		
		Service: Ä‘iá»u phá»‘i logic

	## NhÆ°á»£c Ä‘iá»ƒm:
	
		Cá»“ng ká»nh, nhiá»u class boilerplate.
		
		RÃ ng buá»™c cá»©ng (tight coupling).
		
		KhÃ³ test riÃªng tá»«ng pháº§n.
		
		KhÃ´ng dá»… má»Ÿ rá»™ng theo chiá»u ngang (composition).
		

# âš™ï¸ Giáº£i phÃ¡p: Pipeline Functional

	Ta chuyá»ƒn táº¥t cáº£ thÃ nh hÃ m thuáº§n, má»—i hÃ m lÃ m 1 viá»‡c:

		List<Employee> fetchAll()
		boolean isActive(Employee e)
		EmployeeDTO toDTO(Employee e)
		void sendNotification(EmployeeDTO dto)

	Rá»“i ná»‘i chÃºng láº¡i báº±ng pipeline:
	
	fetchAll().stream()
    .filter(e -> isActive(e))
    .map(e -> toDTO(e))
    .forEach(dto -> sendNotification(dto));
	
	
		.filter thay tháº¿ cho if (isActive)
		.map thay tháº¿ cho Mapper
		.forEach thay tháº¿ cho Service gá»i notifier
	
	
	Táº¥t cáº£ Ä‘á»u pure functions, dá»… test, dá»… thay tháº¿.



# ğŸ” So sÃ¡nh vá»›i kiáº¿n trÃºc Layered 

| Kiáº¿n trÃºc Layered                | Pipeline Functional         |
| -------------------------------- | --------------------------- |
| Nhiá»u lá»›p: Service, Mapper, Repo | Má»™t chuá»—i hÃ m ná»‘i tiáº¿p      |
| KhÃ³ tÃ¡i sá»­ dá»¥ng tá»«ng bÆ°á»›c        | Dá»… compose láº¡i, hoÃ¡n Ä‘á»•i dá»… |
| Cáº§n mock nhiá»u thá»© Ä‘á»ƒ test       | Test tá»«ng function Ä‘á»™c láº­p  |
| Code â€œimperativeâ€                | Code â€œdeclarativeâ€          |
| Náº·ng vá» cáº¥u trÃºc class           | Nháº¹, táº­p trung vÃ o dá»¯ liá»‡u  |



# ğŸ§© Pipeline trong thá»±c táº¿ (Enterprise Use Case)
	Functional pipeline thÆ°á»ng dÃ¹ng trong:

| TrÆ°á»ng há»£p                   | MÃ´ táº£                                                 |
| ---------------------------- | ----------------------------------------------------- |
| **ETL Pipeline**             | Extract â†’ Transform â†’ Load dá»¯ liá»‡u tá»« nhiá»u nguá»“n     |
| **Message Processing**       | Nháº­n message â†’ validate â†’ enrich â†’ persist â†’ publish  |
| **Audit & Logging Pipeline** | DÃ²ng event Ä‘i qua chuá»—i xá»­ lÃ½ log, filter, mask, save |
| **Data Analytics**           | DÃ²ng dá»¯ liá»‡u sensor/IoT Ä‘Æ°á»£c xá»­ lÃ½ qua nhiá»u bÆ°á»›c     |



# ğŸ’¡ VÃ­ dá»¥ nÃ¢ng cao â€” Message Processing Pipeline

Function<Message, Message> validate = msg -> { /* check */ return msg; };
Function<Message, Message> enrich = msg -> { /* add metadata */ return msg; };
Function<Message, Message> persist = msg -> { /* save */ return msg; };
Consumer<Message> publish = msg -> { /* send to Kafka */ };

List<Message> messages = fetchMessages();

messages.stream()
        .map(validate)
        .map(enrich)
        .map(persist)
        .forEach(publish);



	â†’ KhÃ´ng cáº§n Service/Mapper/DAO gÃ¬ cáº£. Má»—i bÆ°á»›c lÃ  má»™t pure function, ghÃ©p thÃ nh functional pipeline.


# ğŸ§  TÆ° duy cá»‘t lÃµi cáº§n náº¯m

	Dá»¯ liá»‡u lÃ  dÃ²ng cháº£y (flow).
	Code lÃ  chuá»—i biáº¿n Ä‘á»•i.
	Má»—i function chá»‰ nÃªn:
	nháº­n input â†’ tráº£ output,
	khÃ´ng lÆ°u state,
	khÃ´ng tÃ¡c dá»¥ng phá»¥ (náº¿u cÃ³, Ä‘Æ°a ra ngoÃ i forEach cuá»‘i).
	

	
# ğŸ§± Má»Ÿ rá»™ng tÆ° duy


Sau khi náº¯m pipeline pattern, ta cÃ³ thá»ƒ nÃ¢ng cáº¥p lÃªn:

	Reactive Pipeline (Project Reactor, RxJava) â€” xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™, event-driven.
	Parallel Stream â€” táº­n dá»¥ng Ä‘a luá»“ng.
	Composable Pipelines â€” gá»™p nhiá»u pipeline nhá» thÃ nh pipeline lá»›n.







</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>