<html><head><title>Lesson 206 == Functional Architecture & Hybrid Design ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 206 -- Functional Architecture & Hybrid Design -//</h1><pre>
# ğŸ”¹ 1. Functional â‰  Anti-OOP

	Sai láº§m phá»• biáº¿n: nghÄ© ráº±ng functional lÃ  â€œchá»‘ng láº¡iâ€ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng.
		â†’ Thá»±c ra: functional vÃ  OOP giáº£i quyáº¿t hai táº§ng khÃ¡c nhau cá»§a cÃ¹ng má»™t há»‡ thá»‘ng.

| Táº§ng                               | TÆ° duy                                        | NgÃ´n ngá»¯ thiáº¿t káº¿ |
| ---------------------------------- | --------------------------------------------- | ----------------- |
| **Structural (Cáº¥u trÃºc há»‡ thá»‘ng)** | Quan há»‡ giá»¯a module, entity, service          | **OOP**           |
| **Behavioral (Logic xá»­ lÃ½)**       | DÃ²ng biáº¿n Ä‘á»•i dá»¯ liá»‡u, tÃ­nh toÃ¡n, rule engine | **Functional**    |


â†’ Tá»©c lÃ :

	OOP: Ä‘á»‹nh nghÄ©a nÃ³ lÃ  ai (Entity, Repository, Controller...).
	FP: Ä‘á»‹nh nghÄ©a nÃ³ lÃ m gÃ¬ (validate, transform, enrich, aggregate...).

	Hai tÆ° duy nÃ y ghÃ©p láº¡i thÃ nh kiáº¿n trÃºc lai (hybrid architecture), cá»±c ká»³ phá»• biáº¿n á»Ÿ enterprise hiá»‡n Ä‘áº¡i.



# ğŸ”¸ 2. NguyÃªn lÃ½ ná»n táº£ng cá»§a Hybrid Design


	âœ… OOP cho structure (éª¨æ ¼ / ã“ã£ã‹ã â€” khung xÆ°Æ¡ng)
	
		Entity, DTO, Repository, Service class.
		Dá»… mÃ´ hÃ¬nh hÃ³a domain, cÃ³ thá»ƒ mapping sang database.
		Dá»… maintain khi domain thay Ä‘á»•i.
	
	âœ… Functional cho behavior (æŒ™å‹• / ãã‚‡ã©ã† â€” hÃ nh vi)
	
		Má»i logic transform Ä‘á»u lÃ  pure function.
		TÃ¡i sá»­ dá»¥ng cao, test dá»…, khÃ´ng cáº§n state.
		CÃ³ thá»ƒ chain / compose Ä‘á»ƒ táº¡o pipeline xá»­ lÃ½ phá»©c táº¡p.



# ğŸ”¹ 3. Cáº¥u trÃºc kiáº¿n trÃºc kiá»ƒu hybrid trong Java Enterprise


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller Layer  â”‚  â†’ nháº­n request
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service Layer    â”‚  â†’ orchestrator (Ä‘iá»u phá»‘i)
â”‚  - gá»i repository  â”‚
â”‚  - gá»i pipeline fn â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Functional Core   â”‚  â†’ thuáº§n hÃ m
â”‚  - validateFn      â”‚
â”‚  - transformFn     â”‚
â”‚  - enrichFn        â”‚
â”‚  - aggregateFn     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Repository       â”‚  â†’ lÆ°u DB, khÃ´ng business logic
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


@Service
public class EmployeeService {
    private final EmployeeRepository repo;

    public EmployeeService(EmployeeRepository repo) {
        this.repo = repo;
    }

    public List<EmployeeDTO> getActiveEmployees() {
        return repo.findAll().stream()
            .filter(isActive)
            .map(toDTO)
            .map(enrichEmail)
            .collect(Collectors.toList());
    }
}



	EmployeeService = OOP orchestration layer.
	isActive, toDTO, enrichEmail = pure functional pipeline.

	â†’ KhÃ´ng cáº§n inheritance, khÃ´ng cáº§n strategy pattern, váº«n Ä‘áº¡t polymorphic behavior thÃ´ng qua function composition.



# ğŸ”¸ 4. Functional pipeline thay tháº¿ OOP pattern cÅ© nhÆ° tháº¿ nÃ o?

| OOP Pattern         | Váº¥n Ä‘á»                              | Functional Replacement                         |
| ------------------- | ----------------------------------- | ---------------------------------------------- |
| **Strategy**        | Äá»•i logic báº±ng class khÃ¡c â†’ rÆ°á»m rÃ  | DÃ¹ng function injection                        |
| **Decorator**       | GÃ³i thÃªm behavior                   | DÃ¹ng `andThen()` hoáº·c higher-order function    |
| **Template Method** | Override tá»«ng bÆ°á»›c xá»­ lÃ½            | DÃ¹ng pipeline chain (map/filter/flatMap)       |
| **Command**         | Má»—i hÃ nh Ä‘á»™ng lÃ  1 object           | Má»—i hÃ nh Ä‘á»™ng lÃ  1 function `(State) -> State` |


	â†’ Giáº£m boilerplate, khÃ´ng cáº§n 10 class chá»‰ Ä‘á»ƒ Ä‘á»•i cÃ¡ch xá»­ lÃ½ 1 rule.



# ğŸ”¹ 5. Enterprise á»©ng dá»¥ng: Microservice domain

	## ğŸ§± OOP pháº§n â€œorchestratorâ€

		VÃ­ dá»¥ EmployeeService hay OrderProcessor â€” Ä‘Ã¢y lÃ  nÆ¡i Ä‘iá»u phá»‘i:

			Gá»i repository.
			Gá»i function pipeline.
			Gá»i external service.
			

	## âš™ï¸ Functional pháº§n â€œcore logicâ€ 
		
Function<Order, Order> validate =
    o -> (o.getPrice() > 0) ? o : throw new InvalidOrderException();

Function<Order, Order> applyTax =
    o -> o.withPrice(o.getPrice() * 1.1);

Function<Order, Order> finalizeOrder =
    validate.andThen(applyTax);


	â†’ DÃ²ng dá»¯ liá»‡u (Order) Ä‘i qua pipeline logic:
		validate â†’ transform â†’ enrich â†’ save.
		Khi muá»‘n thÃªm rule, chá»‰ cáº§n .andThen(newRule) â†’ khÃ´ng áº£nh hÆ°á»Ÿng code khÃ¡c.




# ğŸ”¸ 6. Functional Architecture trong Security
	Spring Security Reactive (WebFlux) lÃ  vÃ­ dá»¥ rÃµ nháº¥t:

		Má»—i filter = 1 function (ServerRequest) -> Mono<ServerResponse>.
		Compose cÃ¡c filter báº±ng function chain thay vÃ¬ XML config hay subclass.
		
	Function<ServerRequest, Mono<ServerResponse>> secured =
    withAuth(withRateLimit(withAudit(baseHandler)));

	â†’ ÄÃ¢y lÃ  functional dependency injection, khÃ´ng cáº§n @Autowired Strategy hay Template class.
	
	
	
	
	
# 	ğŸ”¹ 7. Hybrid Design = Clean, Scalable, Testable
	
	
| Lá»£i Ã­ch                 | Giáº£i thÃ­ch                                              |
| ----------------------- | ------------------------------------------------------- |
| **Clear separation**    | OOP quáº£n lÃ½ *data & module*, FP quáº£n lÃ½ *logic & flow*. |
| **TÃ¡i sá»­ dá»¥ng**         | CÃ¡c function nhá» cÃ³ thá»ƒ compose láº¡i pipeline khÃ¡c.      |
| **Test dá»… dÃ ng**        | Má»—i function test Ä‘á»™c láº­p (input â†’ output).             |
| **KhÃ´ng mutable state** | Ãt bug race condition, dá»… parallel hÃ³a.                 |
| **Chuáº©n hÃ³a behavior**  | Táº¥t cáº£ xá»­ lÃ½ Ä‘á»u Ä‘i qua function chain rÃµ rÃ ng.         |
	
	
	
	
	
# ğŸ”¸ 8. VÃ­ dá»¥ thá»±c táº¿ ngoÃ i Java	
	
| NgÃ´n ngá»¯                 | Kiá»ƒu kiáº¿n trÃºc Hybrid                                   |
| ------------------------ | ------------------------------------------------------- |
| **Scala / Akka**         | Actor (OOP) + Pure Function (FP)                        |
| **Kotlin**               | Class domain + inline lambda pipelines                  |
| **C#**                   | OOP domain + LINQ functional processing                 |
| **Python**               | OOP class + `map/filter/reduce` logic chain             |
| **JavaScript (Node.js)** | Express Router (OOP-ish) + RxJS hoáº·c Promise chain (FP) |
	
	â†’ DÃ¹ ngÃ´n ngá»¯ nÃ o, pattern hybrid nÃ y Ä‘á»u phá»• biáº¿n vÃ¬ nÃ³ giá»¯ láº¡i tÃ­nh tá»• chá»©c cá»§a OOP nhÆ°ng mang sá»©c máº¡nh khai bÃ¡o cá»§a FP.	
	
	
	
# 	ğŸ”¹ 9. Mindset cá»§a senior developer
	
	
	â€œDá»¯ liá»‡u cÃ³ thá»ƒ lÃ  class. Logic thÃ¬ nÃªn lÃ  function.â€
	â€œOOP lÃ  khung xÆ°Æ¡ng. Functional lÃ  dÃ²ng mÃ¡u.â€
	â€œÄá»«ng Ã©p má»i thá»© thÃ nh object â€” behavior nÃªn flow, khÃ´ng nÃªn mutate.â€	


# ğŸ”¸ 10. TÃ³m táº¯t tinh gá»n


| Táº§ng                 | Dáº¡ng | Má»¥c tiÃªu                        |
| -------------------- | ---- | ------------------------------- |
| Entity / DTO         | OOP  | Data modeling                   |
| Service / Controller | OOP  | Orchestration                   |
| Business logic       | FP   | Transform, validation, pipeline |
| Stream / Reactive    | FP   | Parallelism, async, event flow  |


	Khi viáº¿t code enterprise:
	
		Class chá»‰ Ä‘á»ƒ gom nhÃ³m logic.
		Function má»›i lÃ  â€œÄ‘á»™ng cÆ¡â€ cháº¡y há»‡ thá»‘ng.









</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>