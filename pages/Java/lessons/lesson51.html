<html><head><title>Lesson 51 == Reflection ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 51 -- Reflection -//</h1><pre># KhÃ¡i niá»‡m 
	
	Reflection lÃ  cÆ¡ cháº¿ giÃºp chÆ°Æ¡ng trÃ¬nh Java cÃ³ thá»ƒ kiá»ƒm tra hoáº·c thay Ä‘á»•i cáº¥u trÃºc cá»§a chÃ­nh nÃ³ trong lÃºc cháº¡y (runtime)
	
	ğŸ’¡ Hiá»ƒu Ä‘Æ¡n giáº£n 
		BÃ¬nh thÆ°á»ng, báº¡n dÃ¹ng Person person = new Person() ; Ä‘á»ƒ táº¡o object 
		Vá»›i Reflection, báº¡n cÃ³ thá»ƒ táº¡o object, gá»i method, truy cáº­p field ngay cáº£ khi khÃ´ng biáº¿n trÆ°á»›c class nÃ o sáº½ Ä‘Æ°á»£c dÃ¹ng 
		
		
	ğŸ›  á»¨ng dá»¥ng cá»§a Reflection  
		âœ… Framework nhÆ° Spring, Hibernate - dÃ¹ng Ä‘á»ƒ inject dependencies(DI) vÃ  mapping object 
		âœ… Gson, Jackson - Chuyá»ƒn Ä‘á»•i Object thÃ nh Json 
		âœ… JUnit - CHáº¡y test case tá»± Ä‘á»™ng mÃ  khÃ´ng cáº§n gá»i method thá»§ cÃ´ng 
		
		
	ğŸ”¥ HÃ¬nh dung Ä‘Æ¡n giáº£n 
		- Giáº£ sá»­ báº¡n cÃ³ má»™t cÃ¡nh cá»­a (class), thÃ´ng thÆ°á»ng báº¡n cáº§n chÃ¬a khÃ³a(xÃ¡c Ä‘á»‹nh class Ä‘á»ƒ má»Ÿ)
		ğŸ‘‰ NhÆ°ng vá»›i Reflection báº¡n cÃ³ thá»ƒ báº» khÃ³a, thÃ¡o báº£n lá» hoáº·c xem cáº¥u trÃºc bÃªn trong ngay cáº£ khi khÃ´ng cÃ³ chÃ¬a ! 
		
		
# CÃ¡c dÃ¹ng Reflection trong Java 

	## ğŸ”¹ Láº¥y thÃ´ng tin lÃºc Runtime 
		DÃ¹ng Class<?> Ä‘á»ƒ láº¥y thÃ´ng tin vá» má»™t class 
		ğŸ“Œ Lá»‡nh Class.forName("TÃªn class") giÃºp láº¥y class táº¡i runtime! 
		
		
		Class<?> clazz = Class.forName("com.example.Person");
		System.out.println("Class Name: " + clazz.getName());

	
	## ğŸ”¹ Láº¥y danh sÃ¡ch Constructor 

		Constructor<?>[] constructors = clazz.getDeclaredConstructors();
		for (Constructor<?> constructor : constructors) {
			System.out.println("Constructor: " + constructor);
		}



	## ğŸ”¹ Láº¥y danh sÃ¡ch Field (biáº¿n)
	
		Field[] fields = clazz.getDeclaredFields();
		for (Field field : fields) {
			System.out.println("Field: " + field.getName());
		}


	## ğŸ”¹ Láº¥y danh sÃ¡ch Method 
	
		Method[] methods = clazz.getDeclaredMethods();
		for (Method method : methods) {
			System.out.println("Method: " + method.getName());
		}

		

	## ğŸ”¹ Truy cáº­p Field private (Hack biáº¿n private)
		BÃ¬nh thÆ°á»ng khÃ´ng thá»ƒ truy cáº­p biáº¿n private, nhÆ°ng vá»›i Reflection thÃ¬ cÃ³ thá»ƒ:
		
		Person person = new Person();
		Field nameField = clazz.getDeclaredField("name");
		nameField.setAccessible(true); // Bypass private!
		nameField.set(person, "John Doe"); // GÃ¡n giÃ¡ trá»‹ má»›i
		System.out.println(person.getName()); // In ra John Doe

	ğŸš¨ LÆ°u Ã½: Viá»‡c nÃ y phÃ¡ vá»¡ nguyÃªn táº¯c Ä‘Ã³ng gÃ³i (encapsulation), nÃªn chá»‰ dÃ¹ng khi thá»±c sá»± cáº§n
	
	
	## ğŸ”¹ Gá»i Method táº¡i runtime 
		Method method = clazz.getDeclaredMethod("sayHello");
		method.invoke(person);  // Gá»i sayHello() mÃ  khÃ´ng cáº§n biáº¿t trÆ°á»›c class
 
		ğŸ“Œ á»¨ng dá»¥ng: Spring dÃ¹ng Ä‘á»ƒ gá»i Bean method tá»± Ä‘á»™ng.

	

	## ğŸ”¹ Táº¡o Object táº¡i runtime 
	
		Constructor<?> constructor = clazz.getDeclaredConstructor();
		Person person = (Person) constructor.newInstance(); // Táº¡o object
		System.out.println(person);



# 	Khi nÃ o nÃªn vÃ  khÃ´ng nÃªn dÃ¹ng Reflection? 

âœ… NÃªn dÃ¹ng khi															âŒ KhÃ´ng nÃªn dÃ¹ng khi
DÃ¹ng trong framework nhÆ° Spring, Hibernate							Khi hiá»‡u suáº¥t quan trá»ng
Test Automation (JUnit, Mockito)									Khi khÃ´ng cáº§n thay Ä‘á»•i class lÃºc runtime
XÃ¢y dá»±ng Plugin, Dependency Injection								Khi cÃ³ thá»ƒ dÃ¹ng cÃ¡ch khÃ¡c tá»‘t hÆ¡n


# Háº¡n cháº¿ cá»§a Reflection
âŒ Hiá»‡u suáº¥t tháº¥p hÆ¡n do pháº£i truy váº¥n metadata class.
âŒ Bá» qua tÃ­nh Ä‘Ã³ng gÃ³i (private, protected cÃ³ thá»ƒ bá»‹ truy cáº­p).
âŒ Dá»… lá»—i náº¿u class bá»‹ Ä‘á»•i tÃªn (Refactor tÃªn class cÃ³ thá»ƒ gÃ¢y lá»—i runtime).


ğŸ”¥ Káº¿t luáº­n
âœ” Reflection giÃºp ta khÃ¡m phÃ¡ vÃ  thao tÃ¡c vá»›i class táº¡i runtime.
âœ” Ráº¥t máº¡nh máº½ nhÆ°ng cáº§n dÃ¹ng cáº©n tháº­n Ä‘á»ƒ trÃ¡nh giáº£m hiá»‡u suáº¥t.
âœ” Há»¯u Ã­ch trong Spring, Hibernate, JUnit, vÃ  nhiá»u framework khÃ¡c.


</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>