<html><head><title>Lesson 24 ==  ==  == LinkedBlockingQueue ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 24 --  --  -- LinkedBlockingQueue -//</h1><pre># Kh√°i ni·ªám  
	LinkedBlockingQueue l√† m·ªôt trong c√°c l·ªõp thu·ªôc g√≥i java.util.concurrent. N√≥ ƒë·∫°i di·ªán cho m·ªôt h√†ng ƒë·ª£i thread-safe ƒë∆∞·ª£c c√†i ƒë·∫∑t theo ki·ªÉu blocking queue(h√†ng ƒë·ª£i ch·∫∑n lu·ªìng). ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† n√≥ h·ªó tr·ª£ ƒë·ªìng b·ªô h√≥a khi nhi·ªÅu lu·ªìng th·ª±c hi·ªán th√™m ho·∫∑c l·∫•y ph·∫ßn t·ª≠ t·ª´ h√†ng ƒë·ª£i 
	
	
# ƒê·∫∑c ƒëi·ªÉm ch√≠nh 
	## Thread-safe 
		- LinkedBlockingQueue s·ª≠ d·ª•ng c∆° ch·∫ø kh√≥a ri√™ng bi·ªát cho c√°c thao t√°c th√™m(put, offer) v√† l·∫•y(take ho·∫∑c poll ) ƒë·ªÉ ƒë·∫£m b·∫£o s·ª± an to√†n khi c√≥ nhi·ªÅu lu·ªìng ho·∫°t ƒë·ªông c√πng l√∫c 
		
	## K√≠ch th∆∞·ªõc t√πy ch·ªçn : 
		B·∫°n c√≥ th·ªÉ ƒë·∫∑t k√≠ch th∆∞·ªõc t·ªëi ƒëa c·ªßa queue khi kh·ªüi t·∫°o. 
		N·∫øu kh√¥ng ch·ªâ ƒë·ªãnh k√≠ch th∆∞·ªõc, queue s·∫Ω c√≥ k√≠ch th∆∞·ªõc m·∫∑c ƒë·ªãnh l√† MAX_VALUE 
		
	## H·ªó tr·ª£ c√°c thao t√°c blocking 
		Ph∆∞∆°ng th·ª©c put s·∫Ω ch·∫∑n lu·ªìng n·∫øu queue ƒë·∫ßy cho ƒë·∫øn khi c√≥ ch·ªó tr·ªëng
		Ph∆∞∆°ng th·ª©c take s·∫Ω ch·∫∑n lu·ªìng n·∫øu queue r·ªóng cho ƒë·∫øn khi c√≥ ph·∫ßn t·ª≠ 
		
	## C·∫•u tr√∫c b√™n trong  
		LinkedBlockingQueue s·ª≠ d·ª•ng m·ªôt danh s√°ch li√™n k·∫øt(linked list ƒë·ªÉ l∆∞u tr·ªØ c√°c ph·∫ßn t·ª≠ )
		ƒêi·ªÅu n√†y gi√∫p cho queue c√≥ hi·ªáu su·∫•t t·ªët h∆°n v·ªõi c√°c thao t√°c th√™m v√† l·∫•y ph·∫ßn t·ª≠  
		
	## Ph√¢n t√°ch kh√≥a : 
		LinkedBlockingQueue s·ª≠ d·ª•ng hai kh√≥a ri√™ng bi·ªát cho thao t√°c th√™m v√† l·∫•y. ƒêi·ªÅu n√†y cho ph√©p m·ªôt lu·ªìng th√™m v√† m·ªôt lu·ªìng kh√°c l·∫•y ph·∫ßn t·ª≠ ƒë·ªìng th·ªùi. 
		
	

# Kh·ªüi t·∫°o  
	## Constructor 
		
		// Kh·ªüi t·∫°o m·∫∑c ƒë·ªãnh kh√¥ng gi·ªõi h·∫°n k√≠ch th∆∞·ªõc 
			LinkecBlockingQueue<E> queue = new LinkecBlockingQueue<>();
				
				-> K√≠ch th∆∞·ªõc t·ªëi ƒëa ƒë∆∞·ª£c tham chi·∫øu v·ªõi bi·∫øn Integer.MAX_VALUE 
		
		// Kh·ªüi t·∫°o v·ªõi k√≠ch th∆∞·ªõc gi·ªõi h·∫°n t√πy ch·ªânh  , v√≠ d·ª• l√† 100 ch·∫≥ng h·∫°n 
			LinkedBlockingQueue<E> queue = new LinkedBlockingQueue<>(100);





# C√°c ph∆∞∆°ng th·ª©c quan tr·ªçng c·ªßa LinkedBlockingQueue


	## Th√™m ph·∫ßn t·ª≠ 
		.add(E e)                  : Th√™m ph·∫ßn t·ª≠ n·∫øu c√≤n ch·ªó, N·∫øu queue ƒë·∫ßy, n√©m ngo·∫°i l·ªá IllegalStateException 
		.offer(E e)                : Th√™m ph·∫ßn t·ª≠ n·∫øu c√≤n ch·ªó, tr·∫£ v·ªÅ false n·∫øu Queue ƒë·∫ßy  
		.offer(E e , timeout)      : ch·∫∑n trong kho·∫£ng th·ªùi gian timeout. N·∫øu v·∫´n ƒë·∫ßy tr·∫£ v·ªÅ false 
		.put(E e)                  : Ch·∫∑n lu·ªìng n·∫øu queue ƒë·∫ßy cho ƒë·∫øn khi c√≥ ch·ªó tr·ªëng 


	## L·∫•y ph·∫ßn t·ª≠ 
		.poll()           : L·∫•y v√† lo·∫°i b·ªè ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n. Tr·∫£ v·ªÅ null n·∫øu queue r·ªóng  
		.poll(timeout)    : Ch·∫∑n trong m·ªôt kho·∫£ng th·ªùi gian. N·∫øu v·∫´n r·ªóng tr·∫£ v·ªÅ null 
		.take()           : Ch·∫∑n lu·ªìng n·∫øu queue r·ªóng cho ƒë·∫øn khi c√≥ ph·∫ßn t·ª≠ 
		.peek()           : L·∫•y ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n m√† kh√¥ng x√≥a n√≥. Tr·∫£ v·ªÅ null n·∫øu queue r·ªóng 


	## Th√¥ng tin v·ªÅ queue 
		.size()                 : Tr·∫£ v·ªÅ s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ hi·ªán c√≥ trong queue
		.remainingCapacity()    : Tr·∫£ v·ªÅ s·ªë l∆∞·ª£ng ch·ªó tr·ªëng c√≤n l·∫°i trong queue 



# 4. V√≠ d·ª• minh h·ªça 

	## V√≠ d·ª• kh·ªüi t·∫°o ƒë∆°n gi·∫£n 
	
	
					LinkedBlockingQueue<Integer> queue = new LinkedBlockingQueue<>(3); // K√≠ch th∆∞·ªõc t·ªëi ƒëa l√† 3
					try {
						queue.put(1); // Th√™m ph·∫ßn t·ª≠ 1
						queue.put(2); // Th√™m ph·∫ßn t·ª≠ 2
						queue.put(3); // Th√™m ph·∫ßn t·ª≠ 3
						System.out.println("Queue: " + queue);
			
						// Th·ª≠ th√™m ph·∫ßn t·ª≠ khi queue ƒë·∫ßy (s·∫Ω b·ªã ch·∫∑n)
						System.out.println("Trying to add 4...");
						queue.put(4); // Ch·ªù ƒë·∫øn khi c√≥ ch·ªó tr·ªëng
					} catch (InterruptedException e) {
						e.printStackTrace();
					}
	


	## V√≠ d·ª• v·ªõi b√†i to√†n Producer-Consumer v·ªõi LinkecBlockingQueue
			M·ªôt lu·ªìng producer th√™m ph·∫ßn t·ª≠ v√†o queue.
			M·ªôt lu·ªìng consumer l·∫•y ph·∫ßn t·ª≠ t·ª´ queue.


		
			import java.util.concurrent.LinkedBlockingQueue;
			
			public class ProducerConsumerExample {
				public static void main(String[] args) {
					LinkedBlockingQueue<Integer> queue = new LinkedBlockingQueue<>(3);
			
					// Lu·ªìng producer
					Thread producer = new Thread(() -> {
						try {
							for (int i = 1; i <= 5; i++) {
								System.out.println("Producer: Adding " + i);
								queue.put(i); // Ch·∫∑n n·∫øu queue ƒë·∫ßy
								System.out.println("Producer: " + i + " added");
							}
						} catch (InterruptedException e) {
							Thread.currentThread().interrupt();
						}
					});
			
					// Lu·ªìng consumer
					Thread consumer = new Thread(() -> {
						try {
							while (true) {
								Thread.sleep(1000); // Gi·∫£ l·∫≠p x·ª≠ l√Ω l√¢u
								Integer item = queue.take(); // Ch·∫∑n n·∫øu queue r·ªóng
								System.out.println("Consumer: Consumed " + item);
							}
						} catch (InterruptedException e) {
							Thread.currentThread().interrupt();
						}
					});
			
					producer.start();
					consumer.start();
				}
			}




# 5. So s√°nh ArrayBlockingQueue v√† LinkedBlockingQueue

	ƒê·∫∑c ƒëi·ªÉm						ArrayBlockingQueue								LinkedBlockingQueue
	C·∫•u tr√∫c d·ªØ li·ªáu				S·ª≠ d·ª•ng m·∫£ng c·ªë ƒë·ªãnh							S·ª≠ d·ª•ng danh s√°ch li√™n k·∫øt
	K√≠ch th∆∞·ªõc						B·∫Øt bu·ªôc ph·∫£i ƒë·∫∑t k√≠ch th∆∞·ªõc khi kh·ªüi t·∫°o		C√≥ th·ªÉ ƒë·∫∑t ho·∫∑c kh√¥ng ƒë·∫∑t k√≠ch th∆∞·ªõc
	Hi·ªáu su·∫•t						Hi·ªáu su·∫•t cao h∆°n v·ªõi k√≠ch th∆∞·ªõc nh·ªè			Hi·ªáu su·∫•t t·ªët h∆°n khi l√†m vi·ªác v·ªõi k√≠ch th∆∞·ªõc l·ªõn
	




# 6. Khi n√†o n√™n s·ª≠ d·ª•ng LinkedBlockingQueue
	
	- Khi c·∫ßn m·ªôt queue c√≥ k√≠ch th∆∞·ªõc linh ho·∫°t 
	- Khi mu·ªën x·ª≠ l√Ω c√¥ng vi·ªác trong c√°c h·ªá th·ªëng ƒëa lu·ªìng m√† producer v√† consumer ho·∫°t ƒë·ªông ƒë·ªôc l·∫≠p 
	- Khi queue c√≥ th·ªÉ ch·ª©a nhi·ªÅu ph·∫ßn t·ª≠ m√† b·∫°n kh√¥ng mu·ªën gi·ªõi h·∫°n c·ª©ng 

</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>