<html><head><title>Lesson 35 == Cloneable ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 35 -- Cloneable -//</h1><pre>
# Kh√°i ni·ªám  
	Cloneable l√† m·ªôt Interface trong Java, gi√∫p c√°c ƒë·ªëi t∆∞·ª£ng c·ªßa l·ªõp implement interface n√†y c√≥ th·ªÉ ƒë∆∞·ª£c sao ch√©p(clone) th√¥ng qua ph∆∞∆°ng th·ª©c clone() c·ªßa l·ªõp Object. Khi l·ªõp implements Cloneable, c√°c ƒë·ªëi t∆∞·ª£ng c·ªßa l·ªõp ƒë√≥ c√≥ th·ªÉ ƒë∆∞·ª£c sao ch√©p ƒë·ªÉ t·∫°o ra c√°c b·∫£n sao gi·ªëng h·ªát v·ªõi ƒë·ªëi t∆∞·ª£ng g·ªëc. 
	
# Cloneable Interface 
	Cloneable kh√¥ng c√≥ ph∆∞∆°ng th·ª©c n√†o ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong ƒë√≥. Nhi·ªám v·ª• ch√≠nh c·ªßa n√≥ l√† ƒë√°nh d·∫•u r·∫±ng m·ªôt l·ªõp cho ph√©p sao ch√©p ƒë·ªëi t∆∞·ª£ng c·ªßa n√≥. N·∫øu b·∫°n c·ªë g·∫Øng sao ch√©p (clone) m·ªôt ƒë·ªëi t∆∞·ª£ng c·ªßa l·ªõp kh√¥ng implement Cloneable, ph∆∞∆°ng th·ª©c clone() s·∫Ω n√©m ra m·ªôt CloneNotSupportedException 
	
		public interface Cloneable {
		}

# Ph∆∞∆°ng th·ª©c clone() trong l·ªõp Object  
	M·ªói ƒë·ªëi t∆∞·ª£ng trong Java ƒë·ªÅu k·∫ø th·ª´a t·ª´ l·ªõp Object. L·ªõp Object cung c·∫•p ph∆∞∆°ng th·ª©c clone() 
		protected Object clone() throws CloneNotSupportedException

	Ph∆∞∆°c th·ª©c n√†y t·∫°o ra m·ªôt b·∫£n sao(shallow copy) c·ªßa ƒë·ªëi t∆∞·ª£ng. Tuy nhi√™n, ph∆∞∆°ng th·ª©c n√†y l√† protected, v√¨ v·∫≠y ph·∫£i override ph∆∞∆°ng th·ª©c clone() ƒë·ªÉ s·ª≠ d·ª•ng trong m√£ c·ªßa m√¨nh  
	
	
		
# Shallow Copy vs Deep Copy 

	## Shallow Copy(Sao ch√©p n√¥ng) : Khi b·∫°n sao ch√©p m·ªôt ƒë·ªëi t∆∞·ª£ng, c√°c thu·ªôc t√≠nh nguy√™n th·ªßy c·ªßa ƒë·ªëi t∆∞·ª£ng g·ªëc s·∫Ω ƒë∆∞·ª£c sao ch√©p v√†o ƒë·ªëi t∆∞·ª£ng m·ªõi, nh∆∞ng n·∫øu ƒë·ªëi t∆∞·ª£ng g·ªëc ch·ª©a c√°c tham chi·∫øu(reference) ƒë·∫øn c√°c ƒë·ªëi t∆∞·ª£ng kh√°c, c√°c tham chi·∫øu ƒë√≥ s·∫Ω ƒë∆∞·ª£c sao ch√©p. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† c·∫£ ƒë·ªëi t∆∞·ª£ng g·ªëc v√† b·∫£n sao s·∫Ω chia s·∫ª c√πng m·ªôt tham chi·∫øu ƒë·∫øn c√°c ƒë·ªëi t∆∞·ª£ng con  
	
			class Person implements Cloneable {
			String name;
			int age;
		
			Person(String name, int age) {
				this.name = name;
				this.age = age;
			}
		
			@Override
			public Person clone() {
				try {
					return (Person) super.clone();  // Shallow copy
				} catch (CloneNotSupportedException e) {
					return null;
				}
			}
		}

		

	## Deep Copy (Copy s√¢u) : La sao ch√©p ho√†n to√†n ƒë·ªëi t∆∞·ª£ng, bao g·ªìm c·∫£ c√°c ƒë·ªëi t∆∞·ª£ng m√† c√°c thu·ªôc t√≠nh tham chi·∫øu tr·ªè ƒë·∫øn. ƒêi·ªÅu n√†y y√™u c·∫ßu l·∫≠p tr√¨nh vi√™n ph·∫£i sao ch√©p th·ªß c√¥ng c√°c ƒë·ªëi t∆∞·ª£ng con trong ph∆∞∆°ng th·ª©c clone() 
	
			class Person implements Cloneable {
			String name;
			Address address;
		
			Person(String name, Address address) {
				this.name = name;
				this.address = address;
			}
		
			@Override
			public Person clone() {
				try {
					Person cloned = (Person) super.clone();
					cloned.address = new Address(this.address.city, this.address.street);  // Deep copy
					return cloned;
				} catch (CloneNotSupportedException e) {
					return null;
				}
			}
		}
		
		class Address {
			String city;
			String street;
		
			Address(String city, String street) {
				this.city = city;
				this.street = street;
			}
		}

# C√°ch s·ª≠ d·ª•ng Cloneable trong Java 
		Khi b·∫°n mu·ªën sao ch√©p m·ªôt ƒë·ªëi t∆∞·ª£ng, b·∫°n c·∫ßn th·ª±c hi·ªán theo c√°c b∆∞·ªõc sau : 
			1/. Implements Cloneable : L·ªõp c·∫ßn implement interface Cloneable ƒë·ªÉ ch·ªâ ra r·∫±ng ƒë·ªëi t∆∞·ª£ng c·ªßa l·ªõp n√†y c√≥ th·ªÉ ƒë∆∞·ª£c sao ch√©p 
			
			2/. Override ph∆∞∆°ng th·ª©c Clone() : L·ªõp c·∫ßn override ph∆∞∆°ng th·ª©c clone() ƒë·ªÉ x·ª≠ l√Ω sao ch√©p ƒë·ªëi t∆∞·ª£ng, th∆∞·ªùng g·ªçi l√† super.clone() c·ªßa l·ªõp cha(l·ªõp Object)
			
			
				public class Main {
				public static void main(String[] args) {
					try {
						Person person1 = new Person("John", new Address("New York", "5th Avenue"));
						Person person2 = person1.clone();  // S·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c clone() ƒë·ªÉ t·∫°o b·∫£n sao
			
						System.out.println("Person1 Name: " + person1.name);
						System.out.println("Person2 Name: " + person2.name);
			
						// X√°c minh c√°c thu·ªôc t√≠nh c√≥ ƒë∆∞·ª£c sao ch√©p ƒë√∫ng c√°ch kh√¥ng
						person2.name = "Jane";
						person2.address.city = "Los Angeles";
			
						System.out.println("After modifying person2:");
						System.out.println("Person1 Name: " + person1.name);
						System.out.println("Person1 Address: " + person1.address.city);  // Tham chi·∫øu gi·ªëng nhau trong shallow copy
						System.out.println("Person2 Name: " + person2.name);
						System.out.println("Person2 Address: " + person2.address.city);
			
					} catch (CloneNotSupportedException e) {
						e.printStackTrace();
					}
				}
			}


		## Output (Shallow Copy):
		Person1 Name: John
		Person2 Name: John
		After modifying person2:
		Person1 Name: John
		Person1 Address: Los Angeles
		Person2 Name: Jane
		Person2 Address: Los Angeles

# Khi n√†o s·ª≠ d·ª•ng Cloneable? 

	- Khi b·∫°n c·∫ßn sao ch√©p ƒë·ªëi t∆∞·ª£ng: Th·ª±c t·∫ø, vi·ªác s·ª≠ d·ª•ng clone() trong Java kh√¥ng ph·ªï bi·∫øn, v√¨ vi·ªác t·∫°o b·∫£n sao c√≥ th·ªÉ d·ªÖ d√†ng ƒë∆∞·ª£c thay th·∫ø b·∫±ng c√°c c√°ch kh√°c nh∆∞ constructor sao ch√©p ho·∫∑c Builder Pattern.
	
	- Khi b·∫°n mu·ªën t·∫°o c√°c b·∫£n sao ƒë·ªëi t∆∞·ª£ng m√† kh√¥ng c·∫ßn ph·∫£i kh·ªüi t·∫°o l·∫°i to√†n b·ªô tr·∫°ng th√°i c·ªßa ƒë·ªëi t∆∞·ª£ng.	


# V·∫•n ƒë·ªÅ v·ªõi Cloneable 
	- K·ªπ thu·∫≠t Clone kh√¥ng ƒë∆∞·ª£c khuy·∫øn kh√≠ch trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p do c√°c v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn sao ch√©p ƒë·ªëi t∆∞·ª£ng trong nh·ªØng t√¨nh hu·ªëng ph·ª©c t·∫°p (v√≠ d·ª•, v·ªõi c√°c ƒë·ªëi t∆∞·ª£ng c√≥ v√≤ng l·∫∑p ho·∫∑c c√°c tham chi·∫øu ƒë·∫øn t√†i nguy√™n h·ªá th·ªëng).
	
	- clone() kh√¥ng sao ch√©p nh·ªØng thu·ªôc t√≠nh static ho·∫∑c transient. V√¨ v·∫≠y, n·∫øu b·∫°n c√≥ c√°c thu·ªôc t√≠nh nh∆∞ v·∫≠y, b·∫°n c·∫ßn ph·∫£i x·ª≠ l√Ω th·ªß c√¥ng.
	
	
# T√≥m t·∫Øt  
	- Cloneable l√† m·ªôt interface ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ch·ªâ ra r·∫±ng l·ªõp c√≥ th·ªÉ ƒë∆∞·ª£c sao ch√©p b·∫±ng ph∆∞∆°ng th·ª©c clone().
	
	- clone() trong l·ªõp Object th·ª±c hi·ªán sao ch√©p n√¥ng (shallow copy), v√† b·∫°n c·∫ßn override ph∆∞∆°ng th·ª©c n√†y trong l·ªõp c·ªßa m√¨nh ƒë·ªÉ th·ª±c hi·ªán sao ch√©p.
	
	- Sao ch√©p s√¢u (deep copy) l√† vi·ªác sao ch√©p ho√†n to√†n c√°c ƒë·ªëi t∆∞·ª£ng con m√† kh√¥ng d√πng chung tham chi·∫øu.
	
	- Clone kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i trong Java hi·ªán ƒë·∫°i v√¨ c√°c v·∫•n ƒë·ªÅ m√† n√≥ g√¢y ra trong vi·ªác sao ch√©p ƒë·ªëi t∆∞·ª£ng, nh∆∞ng v·∫´n c√≥ th·ªÉ h·ªØu √≠ch trong m·ªôt s·ªë t√¨nh hu·ªëng.
	


</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>