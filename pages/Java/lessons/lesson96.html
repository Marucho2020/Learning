<html><head><title>Lesson 96 == Red-Black Tree ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 96 -- Red-Black Tree -//</h1><pre># KhÃ¡i niá»‡m 
	LÃ  má»™t dáº¡ng Binary Search Tree tá»± cÃ¢n báº±ng. NÃ³ Ä‘áº£m báº£o cÃ¢y luÃ´n á»Ÿ tráº¡ng thÃ¡i "gáº§n nhÆ° cÃ¢n báº±ng", Ä‘á»§ tá»‘t Ä‘á»ƒ giá»¯ hiá»‡u nÄƒng O(log n) cho má»i thao tÃ¡c: insert, delete, search.

		KhÃ¡c vá»›i AVL Tree â€“ cÃ¢n báº±ng â€œcháº·t cháº½â€, thÃ¬ Red-Black Tree chá»‰ cÃ¢n báº±ng â€œlá»ng hÆ¡nâ€, Ä‘á»•i láº¡i:
			- ThÃªm/sá»­a/xÃ³a nhanh hÆ¡n
			- Cáº¥u trÃºc Ä‘Æ¡n giáº£n hÆ¡n
			- Ráº¥t phÃ¹ há»£p cho cÃ¡c há»‡ thá»‘ng ghi-heavy (write-intensive)
		


# ğŸ“ 2. Quy táº¯c Ä‘á»-Ä‘en (Red-Black Invariants) 

	Má»—i node cÃ³ má»™t mÃ u: Ä‘á» hoáº·c Ä‘en, vÃ  pháº£i tuÃ¢n theo cÃ¡c quy táº¯c:
		- Má»—i node hoáº·c Ä‘á», hoáº·c Ä‘en
		- Root luÃ´n Ä‘en
		- Má»i null node (lÃ¡ áº£o) Ä‘Æ°á»£c xem lÃ  Ä‘en
		- Node Ä‘á» khÃ´ng Ä‘Æ°á»£c cÃ³ con Ä‘á» (khÃ´ng cÃ³ chuá»—i Ä‘á» liÃªn tiáº¿p)
		- Má»i Ä‘Æ°á»ng Ä‘i tá»« node Ä‘áº¿n lÃ¡ Ä‘á»u Ä‘i qua cÃ¹ng sá»‘ lÆ°á»£ng node Ä‘en (black-height invariant)

	Má»¥c Ä‘Ã­ch: giá»¯ cho cÃ¢y khÃ´ng lá»‡ch quÃ¡ nhiá»u, nhÆ°ng Ä‘á»§ linh hoáº¡t Ä‘á»ƒ insert/delete nhanh chÃ³ng.
	
	


#  3. Äá»™ phá»©c táº¡p 
	
| Thao tÃ¡c | Big-O    |
| -------- | -------- |
| Search   | O(log n) |
| Insert   | O(log n) |
| Delete   | O(log n) |

	VÃ¬ cÃ¢y khÃ´ng hoÃ n toÃ n cÃ¢n báº±ng nhÆ° AVL nÃªn:
		- Search cÃ³ thá»ƒ cháº­m hÆ¡n AVL
		- NhÆ°ng Insert/Delete nhanh hÆ¡n AVL
	
	â†’ PhÃ¹ há»£p vá»›i cÃ¡c há»‡ thá»‘ng cáº§n tá»‘c Ä‘á»™ ghi vÃ  xá»­ lÃ½ Ä‘á»“ng thá»i (concurrent updates)
	


# ğŸ” 4. Xoay cÃ¢y (Rotation) 
	

	TÆ°Æ¡ng tá»± AVL Tree, Red-Black Tree dÃ¹ng cÃ¡c phÃ©p xoay cÃ¢y trÃ¡i/pháº£i Ä‘á»ƒ giá»¯ cÃ¢n báº±ng sau khi insert hoáº·c delete.
	CÃ¡c thao tÃ¡c xoay thÆ°á»ng kÃ¨m vá»›i Ä‘á»•i mÃ u node Ä‘á»ƒ giá»¯ Ä‘Ãºng cÃ¡c quy táº¯c Ä‘á»-Ä‘en.
	VÃ­ dá»¥ insert vÃ o cÃ¢y cÃ³ node Ä‘á» â†’ kiá»ƒm tra uncle cÃ³ Ä‘á» khÃ´ng â†’ náº¿u Ä‘á», Ä‘á»•i mÃ u; náº¿u Ä‘en, xoay cÃ¢y.




# ğŸ§° 5. Khi nÃ o nÃªn dÃ¹ng Red-Black Tree? 

	## âœ… PhÃ¹ há»£p:
	
		- Há»‡ thá»‘ng write-heavy: log system, event stream
		- Java collections: TreeMap, TreeSet Ä‘á»u dÃ¹ng Red-Black Tree
		- Kernel data structures: Linux rb_tree dÃ¹ng Ä‘á»ƒ quáº£n lÃ½ memory, I/O
		- Database indexing (ná»™i bá»™)
		- Khi insert/delete xáº£y ra thÆ°á»ng xuyÃªn



# âŒ KhÃ´ng phÃ¹ há»£p: 
	
	- Khi cáº§n Ä‘á»™ cÃ¢n báº±ng tuyá»‡t Ä‘á»‘i (AVL tá»‘t hÆ¡n cho search tá»‘c Ä‘á»™ cao)
	- Há»‡ thá»‘ng khÃ´ng chá»‹u Ä‘Æ°á»£c latency variation nhá» (real-time system)
	- Khi cáº§n cáº¥u trÃºc immutable (functional programming â†’ persistent tree)


# ğŸ—ï¸ 6. So sÃ¡nh Red-Black Tree vá»›i AVL Tree 
	
| TiÃªu chÃ­            | AVL Tree            | Red-Black Tree      |
| ------------------- | ------------------- | ------------------- |
| CÃ¢n báº±ng            | Cháº·t (strict)       | Lá»ng (relaxed)      |
| TÃ¬m kiáº¿m            | Nhanh hÆ¡n           | Cháº­m hÆ¡n chÃºt       |
| Insert/Delete       | Cháº­m hÆ¡n            | Nhanh hÆ¡n           |
| Rotation trung bÃ¬nh | Nhiá»u               | Ãt                  |
| á»¨ng dá»¥ng            | Realtime, Ä‘á»c nhiá»u | Viáº¿t nhiá»u, scale   |
| CÃ³ sáºµn trong Java   | âŒ                   | âœ”ï¸ TreeMap, TreeSet |



# ğŸ§ª 7. Triá»ƒn khai Red-Black Tree trong Java 
	
	KhÃ´ng cáº§n code tay. Java cung cáº¥p sáºµn:
	
		TreeMap<K, V>: Map cÃ³ thá»© tá»±, tá»± cÃ¢n báº±ng nhá» Red-Black Tree
		TreeSet<T>: Set cÃ³ thá»© tá»±, khÃ´ng trÃ¹ng láº·p 

			TreeMap<Integer, String> rbtMap = new TreeMap<>();
			rbtMap.put(10, "A");
			rbtMap.put(5, "B");
			rbtMap.put(20, "C");

		Tá»± Ä‘á»™ng cÃ¢n báº±ng, há»— trá»£ floorKey(), ceilingKey(), subMap(), firstEntry(), lastEntry() â€” táº¥t cáº£ O(log n).


# ğŸ” 8. á»¨ng dá»¥ng thá»±c táº¿

| Há»‡ thá»‘ng     | Má»¥c Ä‘Ã­ch sá»­ dá»¥ng                                              |
| ------------ | ------------------------------------------------------------- |
| Java SDK     | TreeMap/TreeSet                                               |
| Linux Kernel | `struct rb_node` quáº£n lÃ½ heap memory                          |
| Cassandra    | Memtable lÆ°u táº¡m thá»i trong RAM dÃ¹ng RBT                      |
| Game Engine  | Collision detection phÃ¢n vÃ¹ng thá»i gian thá»±c                  |
| Database     | BÃªn dÆ°á»›i Secondary Index cÃ³ thá»ƒ dÃ¹ng RBT náº¿u khÃ´ng cáº§n B-Tree |


# ğŸ” 9. Æ¯u Ä‘iá»ƒm / NhÆ°á»£c Ä‘iá»ƒm

	## âœ”ï¸ Æ¯u Ä‘iá»ƒm:
		- Dá»… cÃ i Ä‘áº·t hÆ¡n AVL (Ã­t xoay hÆ¡n)
		- Hiá»‡u nÄƒng ghi tá»‘t
		- TÆ°Æ¡ng thÃ­ch tá»‘t vá»›i multithread
		- ÄÆ°á»£c dÃ¹ng rá»™ng rÃ£i (TreeMap, TreeSet, OS, DBâ€¦)	
	
	## âŒï¸ NhÆ°á»£c Ä‘iá»ƒm::

		- Search cháº­m hÆ¡n AVL
		- KhÃ´ng cÃ¢n báº±ng tuyá»‡t Ä‘á»‘i â†’ khÃ´ng predict Ä‘Æ°á»£c latency chÃ­nh xÃ¡c
		- Cáº§n logic phá»©c táº¡p khi delete
		


# ğŸ“š 10. Cáº§n há»c gÃ¬ thÃªm? 

| Chá»§ Ä‘á»             | LÃ½ do                                             |
| ------------------ | ------------------------------------------------- |
| Tree rotation      | Hiá»ƒu Ä‘Æ°á»£c cÆ¡ cháº¿ xoay giÃºp debug/debug lib        |
| Concurrent RB-Tree | Xá»­ lÃ½ Ä‘a luá»“ng trong há»‡ thá»‘ng scale               |
| Persistent Tree    | Náº¿u dÃ¹ng trong functional programming (immutable) |
| B-Tree / B+ Tree   | Khi cáº§n dÃ¹ng cho DB index hoáº·c disk               |
| Segment Tree       | Náº¿u cáº§n range queries nhiá»u                       |


| Chá»§ Ä‘á»                        | Táº¡i sao                                                 |
| ----------------------------- | ------------------------------------------------------- |
| Delete trong RBT              | Phá»©c táº¡p, thÆ°á»ng bá» qua trong demo nhÆ°ng ráº¥t quan trá»ng |
| Concurrent Tree               | Cho cÃ¡c há»‡ thá»‘ng Ä‘a luá»“ng                               |
| Compare vá»›i B-Tree            | Khi lÆ°u vÃ o disk (cache, DB)                            |
| Functional Red-Black Tree     | DÃ¹ng trong immutable data structure                     |
| TreeMap / TreeSet source code | Hiá»ƒu há»‡ thá»‘ng thá»±c sá»± dÃ¹ng nhÆ° tháº¿ nÃ o                  |




Red-Black Tree lÃ  giáº£i phÃ¡p cÃ¢n báº±ng giá»¯a tá»‘c Ä‘á»™ vÃ  hiá»‡u nÄƒng thá»±c táº¿.
NÃ³ khÃ´ng tá»‘i Æ°u vá» máº·t lÃ½ thuyáº¿t (search nhanh nháº¥t), nhÆ°ng láº¡i á»•n Ä‘á»‹nh vÃ  linh hoáº¡t hÆ¡n trong cÃ¡c há»‡ thá»‘ng thá»±c chiáº¿n write-heavy, nÆ¡i cáº¥u trÃºc dá»¯ liá»‡u cáº§n tá»± cÃ¢n báº±ng vÃ  hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh dÆ°á»›i Ã¡p lá»±c dá»¯ liá»‡u lá»›n.

</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>