<html><head><title>Lesson 154 == Stream ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 154 -- Stream -//</h1><pre>
# 1. ‚úÖ Stream l√† g√¨ trong Java?

Trong Java, ‚Äústream‚Äù l√† kh√°i ni·ªám ch·ªâ lu·ªìng d·ªØ li·ªáu (data flow) gi·ªØa ngu·ªìn (source) v√† ƒë√≠ch (destination). C√≥ hai h·ªá th·ªëng stream t√°ch bi·ªát:


| Stream Type           | D√πng ƒë·ªÉ x·ª≠ l√Ω             | Interface G·ªëc                 |
| --------------------- | ------------------------- | ----------------------------- |
| **Byte Streams**      | D·ªØ li·ªáu nh·ªã ph√¢n (binary) | `InputStream`, `OutputStream` |
| **Character Streams** | D·ªØ li·ªáu text (Unicode)    | `Reader`, `Writer`            |



# 2. üì¶ Byte Stream l√† g√¨?

	
	Byte Stream ƒë·ªçc/ghi d·ªØ li·ªáu theo t·ª´ng byte (8 bit). Ph√π h·ª£p v·ªõi:
	
		- File nh·ªã ph√¢n (·∫£nh, audio, PDF‚Ä¶)
		- M·∫°ng, socket, file truy·ªÅn t·∫£i kh√¥ng c√≥ encoding


	üîß C√°c l·ªõp ph·ªï bi·∫øn: 
	
| Direction  | Class                                                                                    |
| ---------- | ---------------------------------------------------------------------------------------- |
| Input      | `InputStream` (abstract)                                                                 |
| Output     | `OutputStream` (abstract)                                                                |
| Subclasses | `FileInputStream`, `BufferedInputStream`, `DataInputStream`, `ByteArrayInputStream`, ... |
	
	
try (InputStream in = new FileInputStream("file.bin")) {
    int b;
    while ((b = in.read()) != -1) {
        // X·ª≠ l√Ω t·ª´ng byte
    }
}
	
	
	
	
#3. üßæ Character Stream l√† g√¨?
	
	X·ª≠ l√Ω d·ªØ li·ªáu text (Unicode) theo t·ª´ng char (16-bit).
	D·ª±a v√†o encoding (UTF-8, UTF-16...) ƒë·ªÉ √°nh x·∫° byte th√†nh k√Ω t·ª±.
	
| Direction  | Class                                                                |
| ---------- | -------------------------------------------------------------------- |
| Input      | `Reader`                                                             |
| Output     | `Writer`                                                             |
| Subclasses | `FileReader`, `BufferedReader`, `CharArrayReader`, `StringReader`... |
	
	V√≠ d·ª•: ƒê·ªçc file vƒÉn b·∫£n
	
try (Reader reader = new FileReader("file.txt")) {
    int ch;
    while ((ch = reader.read()) != -1) {
        System.out.print((char) ch);
    }
}


# 4. üéØ C√°c ki·ªÉu Stream ph√¢n lo·∫°i theo t√≠nh nƒÉng
| Lo·∫°i Stream            | M·ª•c ƒë√≠ch                                                |
| ---------------------- | ------------------------------------------------------- |
| `BufferedInputStream`  | Buffer d·ªØ li·ªáu ƒë·ªÉ gi·∫£m s·ªë l·∫ßn truy xu·∫•t I/O v·∫≠t l√Ω      |
| `DataInputStream`      | ƒê·ªçc ki·ªÉu d·ªØ li·ªáu nguy√™n th·ªßy (int, float, long, UTF...) |
| `ObjectInputStream`    | ƒê·ªçc/ghi object ƒë√£ ƒë∆∞·ª£c serialize                        |
| `ByteArrayInputStream` | ƒê·ªçc t·ª´ m·∫£ng byte nh∆∞ th·ªÉ l√† stream                      |
| `PipedInputStream`     | D√πng cho thread-to-thread communication n·ªôi b·ªô          |
| `PrintStream`          | Ghi d·ªØ li·ªáu ti·ªán l·ª£i nh∆∞ `System.out` v·ªõi format ƒë·∫πp    |


	
	
	
# 5. üß† Kh√°c bi·ªát c·ªët l√µi Byte vs Character Stream

| Feature            | Byte Stream                   | Character Stream           |
| ------------------ | ----------------------------- | -------------------------- |
| ƒê∆°n v·ªã d·ªØ li·ªáu     | Byte (8-bit)                  | Character (16-bit Unicode) |
| Giao di·ªán g·ªëc      | `InputStream`, `OutputStream` | `Reader`, `Writer`         |
| Ph√π h·ª£p x·ª≠ l√Ω      | File nh·ªã ph√¢n, m·∫°ng, ·∫£nh      | Text, XML, JSON            |
| C·∫ßn x·ª≠ l√Ω encoding | ‚ùå Kh√¥ng                       | ‚úÖ C√≥                       |


‚Üí Senior note: Khi x·ª≠ l√Ω d·ªØ li·ªáu text t·ª´ m·∫°ng ho·∫∑c file binary c√≥ encoding, lu√¥n ph·∫£i explicit encoding v·ªõi InputStreamReader.

Reader reader = new InputStreamReader(
    new FileInputStream("file.txt"), StandardCharsets.UTF_8);


# 6. üõ†Ô∏è Stream chaining (Decorator Pattern)
Java s·ª≠ d·ª•ng Decorator Pattern ƒë·ªÉ m·ªü r·ªông t√≠nh nƒÉng stream:

InputStream in = new BufferedInputStream(
                    new FileInputStream("file.dat"));



# 7. üî¨ Stream trong Java 8 (Functional API) vs I/O Stream

| Java 8 Stream API                                                       | Java I/O Stream                |
| ----------------------------------------------------------------------- | ------------------------------ |
| D√≤ng c√°c ph·∫ßn t·ª≠ (element pipeline)                                     | D√≤ng byte ho·∫∑c k√Ω t·ª±           |
| Functional (map, filter, reduce)                                        | Imperative (read/write)        |
| Kh√¥ng li√™n quan ƒë·∫øn I/O (tr·ª´ `Files.lines()`, `BufferedReader.lines()`) | G·ªëc r·ªÖ cho I/O file, socket... |


ƒê·ª´ng nh·∫ßm l·∫´n Stream<T> c·ªßa Java 8 v·ªõi InputStream, ch√∫ng ho√†n to√†n kh√°c nhau.



# 8. ‚ö†Ô∏è C√°c l·ªói th∆∞·ªùng g·∫∑p (Senior ch√∫ √Ω)

	- Kh√¥ng ƒë√≥ng stream (g√¢y leak resource)
	- Encoding sai l·ªách: ƒê·ªçc ghi text sai UTF-8, m·∫•t ti·∫øng Vi·ªát/kanji
	- Read to√†n b·ªô file v√†o b·ªô nh·ªõ ‚Üí OOM
	- Kh√¥ng d√πng Buffered g√¢y slowdown do g·ªçi I/O v·∫≠t l√Ω nhi·ªÅu l·∫ßn



# 9. üìå K·∫øt lu·∫≠n ‚Äì Khi n√†o d√πng lo·∫°i n√†o?


| Nhu c·∫ßu                          | L·ª±a ch·ªçn Stream                              |
| -------------------------------- | -------------------------------------------- |
| File nh·ªã ph√¢n (·∫£nh, zip, mp3...) | `FileInputStream` / `BufferedInputStream`    |
| File vƒÉn b·∫£n UTF-8               | `BufferedReader(new InputStreamReader(...))` |
| Truy·ªÅn d·ªØ li·ªáu gi·ªØa thread       | `PipedInputStream`, `PipedOutputStream`      |
| ƒê·ªçc d·ªØ li·ªáu nguy√™n th·ªßy          | `DataInputStream`                            |
| Serialize/Deserialize object     | `ObjectInputStream` / `ObjectOutputStream`   |


</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>