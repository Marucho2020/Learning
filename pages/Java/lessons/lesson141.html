<html><head><title>Lesson 141 == HandlerAdapter ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 141 -- HandlerAdapter -//</h1><pre>
# ğŸ” 1. HandlerAdapter lÃ  gÃ¬? 
	LÃ  má»™t interface trung gian trong Spring MVC. NÃ³ Ä‘á»©ng giá»¯a DispatcherServlet vÃ  cÃ¡c loáº¡i â€œhandlerâ€ (controller) khÃ¡c nhau. 
	NÃ³ khÃ´ng xá»­ lÃ½ request trá»±c tiáº¿p. NÃ³ lÃ m nhiá»‡m vá»¥: 
		Adapter pattern â€“ chuyá»ƒn má»™t loáº¡i controller cá»¥ thá»ƒ thÃ nh má»™t xá»­ lÃ½ cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c thi thá»‘ng nháº¥t.
		
		
		
		
# 	ğŸ§  2. Táº¡i sao cáº§n HandlerAdapter? 	

	VÃ¬ trong Spring MVC, controller khÃ´ng chá»‰ cÃ³ má»™t loáº¡i.
		Ta cÃ³:
			@Controller dÃ¹ng annotation â†’ RequestMappingHandlerAdapter xá»­ lÃ½
			Controller kiá»ƒu cÅ© (implements org.springframework.web.servlet.mvc.Controller) â†’ SimpleControllerHandlerAdapter xá»­ lÃ½
			Handler custom (vÃ­ dá»¥ class cá»§a báº¡n tá»± Ä‘á»‹nh nghÄ©a) â†’ cáº§n adapter riÃªng
			
				
		â¡ï¸ DispatcherServlet khÃ´ng thá»ƒ biáº¿t trÆ°á»›c controller cá»§a báº¡n thuá»™c loáº¡i gÃ¬
		â¡ï¸ NÃ³ chá»‰ biáº¿t: "TÃ´i cáº§n má»™t HandlerAdapter tÆ°Æ¡ng thÃ­ch vá»›i handler Ä‘Ã³ Ä‘á»ƒ xá»­ lÃ½ request"




# ğŸ—ï¸ 3. Kiáº¿n trÃºc hoáº¡t Ä‘á»™ng 
	
	Client â†’ DispatcherServlet
           â†“
    HandlerMapping (xÃ¡c Ä‘á»‹nh handler object)
           â†“
    HandlerAdapter (xá»­ lÃ½ handler Ä‘Ã³)
           â†“
       Handler (controller logic)
           â†“
     ModelAndView â†’ ViewResolver â†’ render HTML


# ğŸ”© 4. Interface HandlerAdapter cÃ³ 3 phÆ°Æ¡ng thá»©c:

public interface HandlerAdapter {

    boolean supports(Object handler);

    ModelAndView handle(HttpServletRequest request,
                        HttpServletResponse response,
                        Object handler) throws Exception;

    long getLastModified(HttpServletRequest request, Object handler);
}



	## 1. supports(Object handler) 
		â†’ Kiá»ƒm tra xem adapter nÃ y cÃ³ xá»­ lÃ½ Ä‘Æ°á»£c kiá»ƒu handler Ä‘Ã³ khÃ´ng
				VÃ­ dá»¥: RequestMappingHandlerAdapter chá»‰ xá»­ lÃ½ handler lÃ  @RequestMapping


	## 2. handle(...) 
		â†’ Xá»­ lÃ½ actual request
		â†’ Gá»i handler logic, tráº£ vá» ModelAndView



	## 3. getLastModified(...) 
		â†’ Ãt dÃ¹ng, phá»¥c vá»¥ cache, tráº£ vá» thá»i gian last-modified Ä‘á»ƒ tá»‘i Æ°u HTTP caching





# ğŸ§ª 5. VÃ­ dá»¥ thá»±c táº¿:

public class MyCustomHandlerAdapter implements HandlerAdapter {

    @Override
    public boolean supports(Object handler) {
        return handler instanceof MyCustomHandler;
    }

    @Override
    public ModelAndView handle(HttpServletRequest request,
                               HttpServletResponse response,
                               Object handler) throws Exception {
        MyCustomHandler myHandler = (MyCustomHandler) handler;
        return myHandler.handleCustomRequest(request, response);
    }

    @Override
    public long getLastModified(HttpServletRequest request, Object handler) {
        return -1;
    }
}

	Báº¡n cáº§n Ä‘Äƒng kÃ½ adapter nÃ y vÃ o Spring context Ä‘á»ƒ DispatcherServlet cÃ³ thá»ƒ sá»­ dá»¥ng.

# ğŸš¨ 6. Khi nÃ o cáº§n viáº¿t HandlerAdapter?


	- Khi báº¡n muá»‘n tá»± Ä‘á»‹nh nghÄ©a má»™t loáº¡i "controller" riÃªng biá»‡t (khÃ´ng dÃ¹ng annotation)
	- Khi báº¡n muá»‘n giáº£m phá»¥ thuá»™c vÃ o Spring Annotation, vÃ  dÃ¹ng má»™t cáº¥u trÃºc khÃ¡c
	- Khi báº¡n muá»‘n dÃ¹ng Spring MVC lÃ m framework ná»n cho má»™t ngÃ´n ngá»¯ mÃ´ táº£ (DSL) hoáº·c Ä‘á»‹nh tuyáº¿n khÃ¡c


# ğŸ§  7. Táº§m quan trá»ng á»Ÿ level senior
| Äiá»u cáº§n biáº¿t                                  | VÃ¬ sao                                                           |
| ---------------------------------------------- | ---------------------------------------------------------------- |
| `HandlerAdapter` lÃ  má»™t Ä‘iá»ƒm má»Ÿ rá»™ng kiáº¿n trÃºc | Cho phÃ©p thÃªm kiá»ƒu controller má»›i mÃ  khÃ´ng sá»­a DispatcherServlet |
| LÃ  pháº§n á»©ng dá»¥ng cá»§a **Adapter Pattern**       | Biáº¿n nhiá»u loáº¡i controller thÃ nh má»™t interface thá»‘ng nháº¥t        |
| CÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ **ghi Ä‘Ã¨ xá»­ lÃ½ logic**          | VÃ­ dá»¥ log, validate trÆ°á»›c khi vÃ o controller                     |
| Gáº¯n cháº·t vá»›i `HandlerMapping`                  | Má»™t handler mapping sáº½ tráº£ vá» má»™t handler, adapter sáº½ xá»­ lÃ½ nÃ³   |



# ğŸ§  PhÃ¢n biá»‡t vá»›i cÃ¡c thÃ nh pháº§n khÃ¡c:


| ThÃ nh pháº§n         | Vai trÃ²                                    |
| ------------------ | ------------------------------------------ |
| DispatcherServlet  | Entry point chÃ­nh                          |
| HandlerMapping     | TÃ¬m ra handler tÆ°Æ¡ng á»©ng vá»›i URL           |
| HandlerAdapter     | Xá»­ lÃ½ tÆ°Æ¡ng á»©ng handler Ä‘Ã³                 |
| Controller         | Viáº¿t logic                                 |
| ViewResolver       | TÃ¬m view Ä‘á»ƒ render                         |
| HandlerInterceptor | Xá»­ lÃ½ trÆ°á»›c/sau handler (giá»‘ng middleware) |


# âœ… Tá»•ng káº¿t


	HandlerAdapter giÃºp Spring MVC má»Ÿ rá»™ng vÃ  trá»«u tÆ°á»£ng hÃ³a cÃ¡c loáº¡i controller khÃ¡c nhau
	LÃ  hiá»‡n thÃ¢n cá»§a Adapter pattern Ä‘á»ƒ trÃ¡nh DispatcherServlet pháº£i biáº¿t chi tiáº¿t tá»«ng loáº¡i handler
	á» level senior, báº¡n pháº£i hiá»ƒu kháº£ nÄƒng má»Ÿ rá»™ng cá»§a Spring náº±m á»Ÿ Ä‘Ã¢y: HandlerAdapter, HandlerMapping, ViewResolver, Interceptor...


</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>