<html><head><title>Lession 29  Lession 29  String Pool //</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../java-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lession 29  Lession 29  String Pool //</h1><pre># Kh√°i ni·ªám 
	String Pool (c√≤n g·ªçi l√† String Intern Pool) l√† m·ªôt v√πng nh·ªõ ƒë·∫∑c bi·ªát trong heap memory c·ªßa JVM , n∆°i l∆∞u tr·ªØ c√°c chu·ªói b·∫•t bi·∫øn(immutable)
	
	Khi b·∫°n khai b√°o m·ªôt chu·ªói b·∫±ng string literal (Chu·ªói tr·ª±c ti·∫øp trong d·∫•u ""), Java s·∫Ω ki·ªÉm tra xem chu·ªói ƒë√≥ c√≥ t·ªìn t·∫°i trong String Pool hay ch∆∞a 
	
		- N·∫øu c√≥, n√≥ s·∫Ω t√°i s·ª≠ d·ª•ng chu·ªói c≈© ƒë·ªÉ ti·∫øt ki·ªám b·ªô nh·ªõ 
		- N·∫øu ch∆∞a, Java s·∫Ω t·∫°o chu·ªói m·ªõi v√† ƒë∆∞a n√≥ v√†o String Pool 
		
		
	- T·ª©c l√† khi t·∫°o chu·ªói b·∫±ng string literal(chu·ªói g√°n tr·ª±c ti·∫øp v√†o bi·∫øn trong d·∫•u "") , th√¨ l√∫c n√†y chu·ªói kh√¥ng ƒë∆∞·ª£c kh·ªüi t·∫°o trong b·ªô nh·ªõ heap gi·ªëng c√°c object b√¨nh th∆∞·ªùng m√† ƒë∆∞·ª£c th√™m v√†o m·ªôt h·ªì b∆°i(pool) ƒë·ªÉ c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng l·∫°i cho nh·ªØng v·ªã tr√≠ kh√°c trong ch∆∞∆°ng tr√¨nh mu·ªën t√°i s·ª≠ d·ª•ng t·∫°i ƒë·ªÉ ti·∫øt ki·ªám b·ªô nh·ªõ . L√∫c n√†y n·∫øu 2 bi·∫øn string ƒë∆∞·ª£c kh·ªüi t·∫°o b·∫±ng string literal c√≥ c√πng chu·ªói string th√¨ so s√°nh == v·ªõi ch√∫ng s·∫Ω tr·∫£ v·ªÅ true. C√≤n khi kh·ªüi t·∫°o b·∫±ng t·ª´ kh√≥a new String("XXX") th√¨ n√≥ kh√¥ng ƒë∆∞·ª£c th√™m v√†o pool m√† t·∫°o nh∆∞ m·ªôt object b√¨nh th∆∞·ªùng v√† kh√¥ng th·ªÉ s·ª≠ d·ª•ng == ƒë·ªÉ so s√°nh m√† ph·∫£i d√πng equals() 

	- Ho·∫∑c c√≥ th·ªÉ s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c str.intern() : ƒë·ªÉ ƒë∆∞a chu·ªói string n√†y v√†o pool , khi ƒë√≥ n√≥ s·∫Ω ƒë∆∞·ª£c l∆∞u ·ªü h·ªì b∆°i string ch·ª© k ƒë∆∞·ª£c l∆∞u ·ªü heap n·ªØa 
		
		
	### V√≠ d·ª•  
	public static void main(String[] args) {
        String s1 = "hello"; // T·∫°o chu·ªói "hello" trong String Pool
        String s2 = "hello"; // s2 tr·ªè ƒë·∫øn c√πng m·ªôt chu·ªói trong String Pool

        System.out.println(s1 == s2); // true (C√πng tham chi·∫øu ƒë·∫øn m·ªôt ƒë·ªëi t∆∞·ª£ng)
    }
	
	!!! L∆∞u √Ω : Khi d√πng to√°n t·ª≠ ==, Java s·∫Ω ki·ªÉm tra xem hai bi·∫øn c√≥ c√πng tham chi·∫øu ƒë·∫øn c√πng m·ªôt ƒë·ªëi t∆∞·ª£ng trong b·ªô nh·ªõ hay kh√¥ng 

# T·∫°o chu·ªói b·∫±ng t·ª´ kh√≥a new(Kh√¥ng d√πng String pool) 
	Khi d√πng new String() . Java lu√¥n lu√¥n t·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªõi tr√™n heap, ngay c·∫£ khi chu·ªói ƒë√£ t·ªìn t·∫°i trong String Pool 
	
	public class StringHeapExample {
		public static void main(String[] args) {
			String s1 = "hello";          // Chu·ªói "hello" trong String Pool
			String s2 = new String("hello"); // Lu√¥n t·∫°o ƒë·ªëi t∆∞·ª£ng m·ªõi tr√™n Heap
	
			System.out.println(s1 == s2); // false (s1 v√† s2 tham chi·∫øu hai ƒë·ªëi t∆∞·ª£ng kh√°c nhau)
		}
	}
	
	!!! S1 tr·ªè ƒë·∫øn chu·ªói trong String Pool , c√≤n s2 l√† m·ªôt ƒë·ªëi t∆∞·ª£ng ri√™ng bi·ªát tr√™n heap 


# str.intern() - ƒê∆∞a chu·ªói v√†o String Pool 
		
	## Ph∆∞∆°ng th·ª©c str.intern() s·∫Ω : 
		Ki·ªÉm tra chu·ªói ƒë√£ t·ªìn t·∫°i trong String Pool ch∆∞a 
		
			### N·∫øu c√≥ : Tr·∫£ v·ªÅ tham chi·∫øu ƒë·∫øn chu·ªói String Pool , L√∫c n√†y c√°c String c√πng tham chi·∫øu ƒë·∫øn 1 v·ªã tr√≠ trong string pool s·∫Ω c√≥ v√πng nh·ªõ gi·ªëng nhau v√† so s√°nh == ƒë∆∞·ª£c 
			
			### N·∫øu kh√¥ng : Th√™m chu·ªói ƒë√≥ v√†o String Pool v√† tr·∫£ v·ªÅ tham chi·∫øu ƒë√≥  
			
			
			
	### V√≠ d·ª•  
	
		public class StringInternExample {
			public static void main(String[] args) {
				String s1 = new String("hello");  // T·∫°o ƒë·ªëi t∆∞·ª£ng m·ªõi tr√™n heap
				String s2 = s1.intern();          // ƒê∆∞a v√†o String Pool
		
				System.out.println(s1 == s2); // false (s1 v·∫´n l√† ƒë·ªëi t∆∞·ª£ng ri√™ng tr√™n heap)
				System.out.println(s2 == "hello"); // true (s2 gi·ªù tr·ªè ƒë·∫øn String Pool)
			}
		}



# ·ª®ng d·ª•ng c·ªßa intern() trong t·ªëi ∆∞u b·ªô nh·ªõ 
	N·∫øu b·∫°n c√≥ nhi·ªÅu chu·ªói gi·ªëng nhau m√† ƒë∆∞·ª£c t·∫°o b·∫±ng new String(), ch√∫ng s·∫Ω chi·∫øm nhi·ªÅu b·ªô nh·ªõ kh√¥ng c·∫ßn thi·∫øt. intern() gi√∫p ti·∫øt ki·ªám b·ªô nh·ªõ b·∫±ng c√°ch chia s·∫ª tham chi·∫øu trong String Pool 
	
	public class StringOptimization {
		public static void main(String[] args) {
			String[] words = new String[1000];
	
			for (int i = 0; i < 1000; i++) {
				words[i] = new String("optimize").intern(); // Ch·ªâ c√≥ 1 ƒë·ªëi t∆∞·ª£ng trong String Pool
			}
	
			System.out.println(words[0] == words[999]); // true
		}
	}
	K·∫øt qu·∫£: T·∫•t c·∫£ 1000 chu·ªói "optimize" s·∫Ω d√πng chung m·ªôt v√πng nh·ªõ trong String Pool, thay v√¨ 1000 ƒë·ªëi t∆∞·ª£ng ri√™ng l·∫ª.


#  So s√°nh == vs. equals() v·ªõi String

			To√°n t·ª≠					Ch·ª©c nƒÉng									V√≠ d·ª•							K·∫øt qu·∫£
			==					So s√°nh ƒë·ªãa ch·ªâ b·ªô nh·ªõ (tham chi·∫øu)			"abc" == "abc"						‚úÖ true
			==					So s√°nh ƒë·ªãa ch·ªâ kh√°c nhau					new String("abc") == "abc"			‚ùå false
			equals()			So s√°nh gi√° tr·ªã c·ªßa chu·ªói					new String("abc").equals("abc")		‚úÖ true

	
	
	
	
	public class StringComparison {
		public static void main(String[] args) {
			String s1 = new String("Java");
			String s2 = "Java";
			String s3 = s1.intern();
	
			System.out.println(s1 == s2); // false (s1 tr√™n heap, s2 trong String Pool)
			System.out.println(s3 == s2); // true (s3 v√† s2 ƒë·ªÅu trong String Pool)
			System.out.println(s1.equals(s2)); // true (c√πng n·ªôi dung)
		}
	}

# 	Khi n√†o n√™n d√πng intern()?
	
‚úÖ N√™n d√πng khi:

X·ª≠ l√Ω nhi·ªÅu chu·ªói tr√πng l·∫∑p ƒë·ªÉ ti·∫øt ki·ªám b·ªô nh·ªõ.
Khi mu·ªën ki·ªÉm tra == thay v√¨ equals() m√† kh√¥ng s·ª£ sai.
Khi d√πng chu·ªói l√†m key trong HashMap, Set, HashTable (t·ªëi ∆∞u hi·ªáu su·∫•t).
‚ùå Kh√¥ng n√™n d√πng khi:

Khi kh√¥ng c·∫ßn t·ªëi ∆∞u b·ªô nh·ªõ qu√° m·ª©c.
Khi t·∫°o nhi·ªÅu chu·ªói c√≥ n·ªôi dung kh√°c nhau (v√¨ intern() c≈©ng t·ªën CPU ƒë·ªÉ ki·ªÉm tra v√† th√™m v√†o String Pool).
	
</pre><a id='backBottom' href='../java-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>