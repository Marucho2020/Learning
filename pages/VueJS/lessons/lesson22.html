<html><head><title>Lesson 22 == Vue $emit ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../vue-js-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 22 -- Vue $emit -//</h1><pre># Kh√°i ni·ªám 
	$emit l√† m·ªôt ph∆∞∆°ng th·ª©c trong Vue.js cho ph√©p component con ph√°t ra (emit) m·ªôt s·ª± ki·ªán t√πy ch·ªânh ƒë·ªÉ th√¥ng b√°o cho component cha.
	Component cha c√≥ th·ªÉ l·∫Øng nghe s·ª± ki·ªán n√†y v√† x·ª≠ l√Ω d·ªØ li·ªáu m√† component con g·ª≠i l√™n.
	
	
# 2. C√∫ ph√°p c∆° b·∫£n 
	Trong component con:
		this.$emit('event-name', payload);

	event-name: T√™n s·ª± ki·ªán t√πy ch·ªânh (v√≠ d·ª•: 'update', 'delete').
	payload: D·ªØ li·ªáu (t√πy ch·ªçn) ƒë∆∞·ª£c g·ª≠i k√®m s·ª± ki·ªán ƒë·∫øn component cha.

	## Trong component cha (template):
	<child-component @event-name="handlerFunction"></child-component>
	@event-name: L·∫Øng nghe s·ª± ki·ªán t·ª´ component con.
	handlerFunction: H√†m trong component cha ƒë∆∞·ª£c g·ªçi khi s·ª± ki·ªán x·∫£y ra, nh·∫≠n payload l√†m tham s·ªë.
	
# 3. V√≠ d·ª• c·ª• th·ªÉ
	Gi·∫£ s·ª≠ b·∫°n c√≥ m·ªôt component con ButtonCounter ƒë·∫øm s·ªë l·∫ßn nh·∫•p chu·ªôt v√† g·ª≠i s·ªë ƒë·∫øm l√™n component cha.
	

	## B∆∞·ªõc 1: T·∫°o Component Con 
	
<script>
Vue.component('button-counter', {
  data() {
    return {
      count: 0
    };
  },
  template: `
    <button @click="increment">Click me: {{ count }}</button>
  `,
  methods: {
    increment() {
      this.count++;
      this.$emit('update-count', this.count); // Ph√°t s·ª± ki·ªán 'update-count' v·ªõi d·ªØ li·ªáu count
    }
  }
});
</script>	
	M·ªói l·∫ßn nh·∫•p v√†o n√∫t, count tƒÉng v√† component con ph√°t s·ª± ki·ªán update-count v·ªõi gi√° tr·ªã count.
	
	
	
	
	
	## B∆∞·ªõc 2: S·ª≠ d·ª•ng trong Component Cha 
<div id="app">
  <h3>Total clicks: {{ total }}</h3>
  <button-counter @update-count="updateTotal"></button-counter>
</div>

<script>
new Vue({
  el: '#app',
  data: {
    total: 0
  },
  methods: {
    updateTotal(count) {
      this.total = count; // C·∫≠p nh·∫≠t total d·ª±a tr√™n d·ªØ li·ªáu t·ª´ component con
    }
  }
});
</script>

	M·ªói l·∫ßn nh·∫•p v√†o n√∫t trong button-counter, component con g·ª≠i gi√° tr·ªã count l√™n component cha qua s·ª± ki·ªán update-count.
	Component cha c·∫≠p nh·∫≠t total v√† hi·ªÉn th·ªã s·ªë l·∫ßn nh·∫•p: "Total clicks: X".
	
# 4. T·∫°i sao c·∫ßn $emit?
	Giao ti·∫øp m·ªôt chi·ªÅu: Vue khuy·∫øn kh√≠ch d·ªØ li·ªáu ch·∫£y t·ª´ cha xu·ªëng con qua props v√† t·ª´ con l√™n cha qua $emit. ƒêi·ªÅu n√†y gi·ªØ m√£ d·ªÖ hi·ªÉu v√† tr√°nh l·ªói.
	T√°i s·ª≠ d·ª•ng: Component con c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ·ªü nhi·ªÅu n∆°i, v√† component cha quy·∫øt ƒë·ªãnh c√°ch x·ª≠ l√Ω s·ª± ki·ªán.
	Linh ho·∫°t: $emit cho ph√©p truy·ªÅn b·∫•t k·ª≥ d·ªØ li·ªáu n√†o (s·ªë, chu·ªói, object, v.v.) t·ª´ con l√™n cha.
	
# 	5. L∆∞u √Ω quan tr·ªçng
	T√™n s·ª± ki·ªán: T√™n s·ª± ki·ªán n√™n r√µ r√†ng v√† theo chu·∫©n kebab-case (v√≠ d·ª•: update-count, kh√¥ng ph·∫£i updateCount).
	
	Payload: D·ªØ li·ªáu g·ª≠i qua $emit c√≥ th·ªÉ l√† b·∫•t k·ª≥ ki·ªÉu d·ªØ li·ªáu n√†o, nh∆∞ng c·∫ßn ƒë∆∞·ª£c x·ª≠ l√Ω ƒë√∫ng trong h√†m c·ªßa component cha.
	
	Nhi·ªÅu s·ª± ki·ªán: M·ªôt component con c√≥ th·ªÉ ph√°t nhi·ªÅu s·ª± ki·ªán kh√°c nhau:
	
	Kh√¥ng l·∫°m d·ª•ng: Ch·ªâ s·ª≠ d·ª•ng $emit khi c·∫ßn giao ti·∫øp t·ª´ con l√™n cha. N·∫øu c·∫ßn truy·ªÅn d·ªØ li·ªáu t·ª´ cha xu·ªëng con, h√£y d√πng props.
	
	
# 6. V√≠ d·ª• n√¢ng cao	
	
	G·ª≠i nhi·ªÅu d·ªØ li·ªáu qua $emit:
		
<script>
Vue.component('user-form', {
  data() {
    return {
      name: '',
      email: ''
    };
  },
  template: `
    <div>
      <input v-model="name" placeholder="Name">
      <input v-model="email" placeholder="Email">
      <button @click="submit">Submit</button>
    </div>
  `,
  methods: {
    submit() {
      this.$emit('user-submitted', { name: this.name, email: this.email });
    }
  }
});
</script>

<div id="app">
  <user-form @user-submitted="handleSubmit"></user-form>
  <p>User: {{ userInfo.name }} - {{ userInfo.email }}</p>
</div>

<script>
new Vue({
  el: '#app',
  data: {
    userInfo: { name: '', email: '' }
  },
  methods: {
    handleSubmit(user) {
      this.userInfo = user; // C·∫≠p nh·∫≠t d·ªØ li·ªáu t·ª´ component con
    }
  }
});
</script>	
	
	Component con user-form ph√°t s·ª± ki·ªán user-submitted v·ªõi m·ªôt object ch·ª©a name v√† email.
	Component cha nh·∫≠n object n√†y v√† c·∫≠p nh·∫≠t userInfo.
	

# S·ª≠ d·ª•ng emit trong Vue3 

	## Component con (ChildComponent.vue) 
<template>
  <button @click="sendMessage">Send Message</button>
</template>

<script>
export default {
  // Khai b√°o s·ª± ki·ªán t√πy ch·ªânh
  emits: ['custom-event'],
  methods: {
    sendMessage() {
      // Ph√°t s·ª± ki·ªán v·ªõi d·ªØ li·ªáu
      this.$emit('custom-event', 'Hello from child!');
    }
  }
};
</script>		


	## Component cha (Parent.vue) 
		
<template>
  <div>
    <ChildComponent @custom-event="handleCustomEvent" />
    <p>Message from child: {{ message }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      message: ''
    };
  },
  methods: {
    handleCustomEvent(payload) {
      this.message = payload; // Nh·∫≠n d·ªØ li·ªáu t·ª´ child
    }
  }
};
</script>


# L∆∞u √Ω
	- Khai b√°o emits: Trong Vue 3, vi·ªác khai b√°o s·ª± ki·ªán trong emits l√† t√πy ch·ªçn nh∆∞ng ƒë∆∞·ª£c khuy·∫øn kh√≠ch ƒë·ªÉ c·∫£i thi·ªán kh·∫£ nƒÉng ƒë·ªçc v√† debug.
	- D·ªØ li·ªáu k√®m theo: $emit c√≥ th·ªÉ g·ª≠i nhi·ªÅu tham s·ªë, v√≠ d·ª•: this.$emit('custom-event', param1, param2).
	- B·∫£o m·∫≠t: ƒê·∫£m b·∫£o d·ªØ li·ªáu g·ª≠i qua $emit ƒë∆∞·ª£c x·ª≠ l√Ω an to√†n trong component cha.
	- Composition API: Trong Composition API, $emit ƒë∆∞·ª£c truy c·∫≠p qua defineEmits:
	- defineEmits ch·ªâ ƒë∆∞·ª£c g·ªçi m·ªôt l·∫ßn: Trong <script setup>, defineEmits l√† m·ªôt macro ch·ªâ ƒë∆∞·ª£c g·ªçi m·ªôt l·∫ßn duy nh·∫•t ƒë·ªÉ ƒë·ªãnh nghƒ©a t·∫•t c·∫£ c√°c s·ª± ki·ªán m√† component con c√≥ th·ªÉ ph√°t ra. B·∫°n kh√¥ng th·ªÉ g·ªçi defineEmits nhi·ªÅu l·∫ßn ƒë·ªÉ t·∫°o c√°c bi·∫øn emit1, emit2 ri√™ng bi·ªát.
	- C√∫ ph√°p ƒë√∫ng: T·∫•t c·∫£ c√°c s·ª± ki·ªán c·∫ßn ƒë∆∞·ª£c li·ªát k√™ trong m·ªôt m·∫£ng duy nh·∫•t khi g·ªçi defineEmits. Sau ƒë√≥, m·ªôt h√†m emit ƒë∆∞·ª£c tr·∫£ v·ªÅ ƒë·ªÉ ph√°t c√°c s·ª± ki·ªán ƒë√£ khai b√°o.

<script setup>
const emit = defineEmits(['custom-event']);
function sendMessage() {
  emit('custom-event', 'Hello from child!');
}
</script>

	## C√∫ ph√°p ƒë√∫ng trong Composition API 
	
	
		### Component con (ChildComponent.vue)
		
<script setup>
const emit = defineEmits(['custom-event-1', 'custom-event-2']);

function triggerEvent1() {
  emit('custom-event-1', 'Hello from event 1!');
}

function triggerEvent2() {
  emit('custom-event-2', 'Hello from event 2!');
}
</script>

<template>
  <div>
    <button @click="triggerEvent1">Send Event 1</button>
    <button @click="triggerEvent2">Send Event 2</button>
  </div>
</template>		
		


		### Component cha (Parent.vue)
		
<script setup>
import { ref } from 'vue';
import ChildComponent from './ChildComponent.vue';

const message1 = ref('');
const message2 = ref('');

function handleEvent1(payload) {
  message1.value = payload;
}

function handleEvent2(payload) {
  message2.value = payload;
}
</script>

<template>
  <div>
    <ChildComponent 
      @custom-event-1="handleEvent1" 
      @custom-event-2="handleEvent2" 
    />
    <p>Event 1: {{ message1 }}</p>
    <p>Event 2: {{ message2 }}</p>
  </div>
</template>



	
</pre><a id='backBottom' href='../vue-js-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>