<html><head><title>Lesson 38 == Vue Provide/Inject ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../vue-js-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 38 -- Vue Provide/Inject -//</h1><pre># Kh√°i ni·ªám 
		
	
	- Provide/Inject l√† m·ªôt c∆° ch·∫ø trong Vue.js (c·∫£ Vue 2 v√† Vue 3) cho ph√©p m·ªôt component t·ªï ti√™n (provider) cung c·∫•p d·ªØ li·ªáu ho·∫∑c h√†m cho t·∫•t c·∫£ c√°c component con ch√°u (consumers) trong c√¢y component, b·∫•t k·ªÉ ch√∫ng c√°ch nhau bao nhi√™u c·∫•p.
	
	- M·ª•c ƒë√≠ch: Gi·∫£m s·ª± ph·ª©c t·∫°p khi truy·ªÅn d·ªØ li·ªáu qua nhi·ªÅu l·ªõp component b·∫±ng props, thay v√¨ ph·∫£i "xuy√™n qua" t·ª´ng c·∫•p trung gian (prop drilling).
	
	- ·ª®ng d·ª•ng: Th∆∞·ªùng d√πng ƒë·ªÉ chia s·∫ª d·ªØ li·ªáu to√†n c·ª•c (nh∆∞ theme, user info, ho·∫∑c configuration) m√† kh√¥ng c·∫ßn Vuex ho·∫∑c c√°c state management ph·ª©c t·∫°p.	
	
	
# 2. C√°ch ho·∫°t ƒë·ªông

	
	- Provide: Component t·ªï ti√™n s·ª≠ d·ª•ng t√πy ch·ªçn provide (Options API) ho·∫∑c h√†m provide() (Composition API) ƒë·ªÉ cung c·∫•p d·ªØ li·ªáu ho·∫∑c h√†m.
	
	- Inject: Component con ch√°u s·ª≠ d·ª•ng t√πy ch·ªçn inject (Options API) ho·∫∑c h√†m inject() (Composition API) ƒë·ªÉ nh·∫≠n d·ªØ li·ªáu ho·∫∑c h√†m ƒë√£ ƒë∆∞·ª£c cung c·∫•p.
	
	- L∆∞u √Ω: Provide/inject kh√¥ng ho·∫°t ƒë·ªông gi·ªØa c√°c component kh√¥ng li√™n quan (kh√¥ng n·∫±m trong c√πng c√¢y component).	


# 3. Provide/Inject trong Vue 2 v√† Vue 3 (Options API) 
	
	## V√≠ d·ª• Options API 
	
	
		### Component t·ªï ti√™n (App.vue):
		
<template>
  <div>
    <h1>App</h1>
    <child-component />
  </div>
</template>

<script>
import ChildComponent from './ChildComponent.vue';

export default {
  components: { ChildComponent },
  provide: {
    theme: 'dark',
    user: { name: 'John Doe' }
  }
};
</script>		
		

	
		### Component con ch√°u (ChildComponent.vue): 
<template>
  <div>
    <p>Theme: {{ theme }}</p>
    <p>User: {{ user.name }}</p>
  </div>
</template>

<script>
export default {
  inject: ['theme', 'user']
};
</script>



		### Gi·∫£i th√≠ch 
		- provide: Trong App.vue, component t·ªï ti√™n cung c·∫•p hai gi√° tr·ªã: theme (chu·ªói) v√† user (object).
		- inject: Trong ChildComponent.vue, component con ch√°u nh·∫≠n theme v√† user b·∫±ng c√°ch li·ªát k√™ t√™n ch√∫ng trong m·∫£ng inject.
		- K·∫øt qu·∫£: Template c·ªßa ChildComponent hi·ªÉn th·ªã Theme: dark v√† User: John Doe.
		- Kh√¥ng c·∫ßn props: D·ªØ li·ªáu ƒë∆∞·ª£c truy·ªÅn tr·ª±c ti·∫øp t·ª´ t·ªï ti√™n (App) ƒë·∫øn con ch√°u (ChildComponent), b·ªè qua c√°c component trung gian.			


	## H·∫°n ch·∫ø trong Vue 2 
		- Kh√¥ng reactive: D·ªØ li·ªáu ƒë∆∞·ª£c cung c·∫•p qua provide trong Vue 2 kh√¥ng t·ª± ƒë·ªông reactive. N·∫øu theme ho·∫∑c user thay ƒë·ªïi trong component t·ªï ti√™n, component con ch√°u kh√¥ng t·ª± ƒë·ªông c·∫≠p nh·∫≠t.
		- Workaround: ƒê·ªÉ reactive, b·∫°n c·∫ßn d√πng data ho·∫∑c computed trong provide.

# 4. Provide/Inject trong Vue 3 (Composition API)

	Vue 3 c·∫£i ti·∫øn provide/inject, h·ªó tr·ª£ reactive data v√† t√≠ch h·ª£p t·ªët v·ªõi Composition API. B·∫°n s·ª≠ d·ª•ng h√†m provide() v√† inject() t·ª´ vue.

	## V√≠ d·ª• Composition API
	
		### Component t·ªï ti√™n (App.vue): 
<template>
  <div>
    <h1>App</h1>
    <button @click="changeTheme">Toggle Theme</button>
    <child-component />
  </div>
</template>

<script>
import { ref, provide } from 'vue';
import ChildComponent from './ChildComponent.vue';

export default {
  components: { ChildComponent },
  setup() {
    const theme = ref('dark');
    const user = ref({ name: 'John Doe' });

    provide('theme', theme); // Cung c·∫•p ref reactive
    provide('user', user);

    const changeTheme = () => {
      theme.value = theme.value === 'dark' ? 'light' : 'dark';
    };

    return { changeTheme };
  }
};
</script>		
		
		
		### Component con ch√°u (ChildComponent.vue): 
<template>
  <div>
    <p>Theme: {{ theme }}</p>
    <p>User: {{ user.name }}</p>
  </div>
</template>

<script>
import { inject } from 'vue';

export default {
  setup() {
    const theme = inject('theme'); // Nh·∫≠n ref
    const user = inject('user');

    return { theme, user };
  }
};
</script>		
		
		
		
	## V√≠ d·ª• v·ªõi <script setup> (Vue 3.2+) 
	
		### App.vue: 
<template>
  <div>
    <h1>App</h1>
    <button @click="changeTheme">Toggle Theme</button>
    <child-component />
  </div>
</template>

<script setup>
import { ref, provide } from 'vue';
import ChildComponent from './ChildComponent.vue';

const theme = ref('dark');
const user = ref({ name: 'John Doe' });

provide('theme', theme);
provide('user', user);

const changeTheme = () => {
  theme.value = theme.value === 'dark' ? 'light' : 'dark';
};
</script>		
		
		
	## # Gi·∫£i th√≠ch 	
		
	- provide('theme', theme): Cung c·∫•p m·ªôt ref reactive (theme). T√™n 'theme' l√† key ƒë·ªÉ nh·∫≠n ·ªü component con.
	- inject('theme'): Nh·∫≠n ref v·ªõi key 'theme'. Trong template, Vue t·ª± ƒë·ªông unwrap .value n√™n ch·ªâ c·∫ßn {{ theme }}.
	- Reactive: V√¨ theme l√† ref, khi theme.value thay ƒë·ªïi (qua changeTheme), component con t·ª± ƒë·ªông c·∫≠p nh·∫≠t.
	- K·∫øt qu·∫£: Nh·∫•n n√∫t "Toggle Theme" trong App s·∫Ω thay ƒë·ªïi hi·ªÉn th·ªã trong ChildComponent t·ª´ "dark" sang "light" v√† ng∆∞·ª£c l·∫°i.		
		


# 6. C√°c t√≠nh nƒÉng n√¢ng cao


	## Gi√° tr·ªã m·∫∑c ƒë·ªãnh (Vue 3) 
		H√†m inject() trong Vue 3 cho ph√©p cung c·∫•p gi√° tr·ªã m·∫∑c ƒë·ªãnh n·∫øu key kh√¥ng ƒë∆∞·ª£c cung c·∫•p:
		
		const theme = inject('theme', 'default-theme'); // N·∫øu kh√¥ng c√≥ 'theme`, d√πng 'default-theme'

	## Cung c·∫•p h√†m: 
<script setup>
import { provide } from 'vue';

const updateUser = (newName) => {
  user.value.name = newName;
};

provide('updateUser', updateUser);
</script>

>>> component con 
<script setup>
const updateUser = inject('updateUser');
updateUser('Jane Doe'); // G·ªçi h√†m t·ª´ component con
</script>



		### C·∫©n th·∫≠n v·ªõi reactive 
		
		import { reactive, readonly } from 'vue';
		provide('user', readonly(user));

# 7. L∆∞u √Ω quan tr·ªçng

	## Kh√¥ng thay th·∫ø props/events: 
		Provide/inject n√™n d√πng khi d·ªØ li·ªáu c·∫ßn chia s·∫ª cho nhi·ªÅu con ch√°u ho·∫∑c **kh√≥ truy·ªÅn qua props.
		Props v√† events v·∫´n l√† c√°ch ch√≠nh ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu/s·ª± ki·ªán gi·ªØa cha-con tr·ª±c ti·∫øp.


	## Kh√¥ng reactive trong Vue 2: 
		C·∫ßn c·∫©n th·∫≠n khi d√πng Vue 2, ho·∫∑c chuy·ªÉn sang Vue 3 ƒë·ªÉ t·∫≠n d·ª•ng reactivity.
		
	## Namespace: 
		D√πng key r√µ r√†ng (nh∆∞ 'theme', 'user') ƒë·ªÉ tr√°nh xung ƒë·ªôt, ƒë·∫∑c bi·ªát trong d·ª± √°n l·ªõn.
		
	## Hi·ªáu su·∫•t: 
		Provide/inject kh√¥ng ·∫£nh h∆∞·ªüng nhi·ªÅu ƒë·∫øn hi·ªáu su·∫•t, nh∆∞ng l·∫°m d·ª•ng c√≥ th·ªÉ l√†m m√£ kh√≥ debug.
		
	## ·ª®ng d·ª•ng th·ª±c t·∫ø
		Chia s·∫ª theme (light/dark mode) cho to√†n ·ª©ng d·ª•ng.
		Cung c·∫•p user info (t·ª´ tr·∫°ng th√°i ƒëƒÉng nh·∫≠p) cho c√°c component s√¢u.
		Cung c·∫•p API h√†m (nh∆∞ h√†m m·ªü modal) cho con ch√°u s·ª≠ d·ª•ng.
		C·∫•u h√¨nh to√†n c·ª•c (nh∆∞ API keys, base URL).



</pre><a id='backBottom' href='../vue-js-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>