<html><head><title>Lesson 45 == Composition API ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../vue-js-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 45 -- Composition API -//</h1><pre># Kh√°i ni·ªám 
		
	Composition API l√† m·ªôt c√°ch ti·∫øp c·∫≠n m·ªõi trong Vue 3 ƒë·ªÉ ƒë·ªãnh nghƒ©a logic c·ªßa component, thay v√¨ t·ªï ch·ª©c m√£ theo c√°c t√πy ch·ªçn c·ªë ƒë·ªãnh nh∆∞ Options API (data, methods, computed, v.v.). N√≥ cho ph√©p b·∫°n:'
	
		-Gom nh√≥m logic theo t√≠nh nƒÉng: Thay v√¨ ph√¢n t√°n logic qua c√°c t√πy ch·ªçn, b·∫°n c√≥ th·ªÉ t·ªï ch·ª©c m√£ theo ch·ª©c nƒÉng (nh∆∞ qu·∫£n l√Ω form, fetch API).
		-T√°i s·ª≠ d·ª•ng logic: D·ªÖ d√†ng t√°ch logic th√†nh composables (h√†m t√°i s·ª≠ d·ª•ng).
		-H·ªó tr·ª£ TypeScript: Khai b√°o ki·ªÉu r√µ r√†ng h∆°n, kh√¥ng ph·ª• thu·ªôc v√†o this.
	
	Options API v·∫´n ƒë∆∞·ª£c h·ªó tr·ª£: Composition API kh√¥ng thay th·∫ø Options API m√† l√† m·ªôt l·ª±a ch·ªçn b·ªï sung.	
		
		
# 2. C·∫•u tr√∫c c∆° b·∫£n c·ªßa Composition API 		
		
		
	Composition API ch·ªß y·∫øu ƒë∆∞·ª£c s·ª≠ d·ª•ng trong h√†m setup() (ho·∫∑c c√∫ ph√°p <script setup> trong Vue 3.2+). N√≥ cung c·∫•p c√°c API nh∆∞ ref, reactive, computed, watch, v√† c√°c lifecycle hooks ƒë·ªÉ qu·∫£n l√Ω tr·∫°ng th√°i v√† logic.	
		
		
	## 	a. H√†m setup() 
		L√† ƒëi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa Composition API, n∆°i b·∫°n ƒë·ªãnh nghƒ©a t·∫•t c·∫£ logic c·ªßa component. 
		
		C√∫ ph√°p: 
export default {
  setup() {
    // ƒê·ªãnh nghƒ©a tr·∫°ng th√°i, h√†m, v.v.
    return {
      // Tr·∫£ v·ªÅ c√°c bi·∫øn/h√†m cho template
    };
  }
};			
		
		
		### C√°ch ho·∫°t ƒë·ªông 
			- Kh√¥ng d√πng this (nh∆∞ Options API).
			- Tr·∫£ v·ªÅ m·ªôt object ch·ª©a c√°c bi·∫øn/h√†m ƒë·ªÉ s·ª≠ d·ª•ng trong template.
		
		
	## 	b. C√∫ ph√°p <script setup>
		
		L√† c√°ch vi·∫øt ng·∫Øn g·ªçn h∆°n, kh√¥ng c·∫ßn setup() hay return. T·∫•t c·∫£ bi·∫øn/h√†m trong <script setup> t·ª± ƒë·ªông c√≥ s·∫µn cho template.
		
		
<script setup>
import { ref } from 'vue';

const count = ref(0);
const increment = () => count.value++;
</script>

	
# 3. C√°c API ch√≠nh trong Composition API

	## a. ref
		T·∫°o m·ªôt bi·∫øn reactive (gi√° tr·ªã ƒë∆°n, nh∆∞ s·ªë, chu·ªói).

		C√∫ ph√°p : 
import { ref } from 'vue';
const count = ref(0);


		C√°ch d√πng: 
			
			- Truy c·∫≠p gi√° tr·ªã: count.value (trong JavaScript).
			- Trong template: {{ count }} (Vue t·ª± ƒë·ªông unwrap .value).


		V√≠ d·ª• : 
		
<template>
  <div>
    <p>Count: {{ count }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const count = ref(0);
const increment = () => count.value++;
</script>




	## b. reactive 
		T·∫°o m·ªôt object reactive (cho c√°c object ph·ª©c t·∫°p).
		
		C√∫ ph√°p: 
import { reactive } from 'vue';
const state = reactive({ count: 0, name: 'John' });


		C√°ch d√πng:
			- Truy c·∫≠p: state.count, state.name (kh√¥ng c·∫ßn .value).
			- Thay ƒë·ªïi: state.count++ (t·ª± ƒë·ªông reactive).



		V√≠ d·ª•:
<template>
  <div>
    <p>Name: {{ state.name }}</p>
    <input v-model="state.name" />
  </div>
</template>

<script setup>
import { reactive } from 'vue';

const state = reactive({ name: 'John' });
</script>		 

	L∆∞u √Ω: reactive kh√¥ng ho·∫°t ƒë·ªông t·ªët v·ªõi gi√° tr·ªã nguy√™n th·ªßy (s·ªë, chu·ªói); d√πng ref cho c√°c tr∆∞·ªùng h·ª£p n√†y.



	## c. computed 
		T·∫°o m·ªôt computed property (gi√° tr·ªã t√≠nh to√°n d·ª±a tr√™n d·ªØ li·ªáu reactive). 
		
		C√∫ ph√°p : 
			
		import { computed } from 'vue';
		const double = computed(() => count.value * 2);

		V√≠ d·ª•:

<template>
  <div>
    <p>Count: {{ count }}</p>
    <p>Double: {{ double }}</p>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';

const count = ref(0);
const double = computed(() => count.value * 2);
</script>

	## d. watch
		Theo d√µi s·ª± thay ƒë·ªïi c·ªßa d·ªØ li·ªáu reactive v√† th·ª±c hi·ªán h√†nh ƒë·ªông.
		
		C√∫ ph√°p
import { watch } from 'vue';
watch(count, (newValue, oldValue) => {
  console.log(`Count changed from ${oldValue} to ${newValue}`);
});


		V√≠ d·ª•: 
<script setup>
import { ref, watch } from 'vue';

const count = ref(0);
watch(count, (newValue) => {
  console.log(`Count is now: ${newValue}`);
});

const increment = () => count.value++;
</script>



	## e. Lifecycle Hooks 
	
		C√°c h√†m lifecycle nh∆∞ onMounted, onUnmounted thay th·∫ø cho mounted, beforeMount, beforeUpdate, updated, v.v. trong Options API.
			
			
		C√∫ ph√°p: 
import { onMounted } from 'vue';
onMounted(() => {
  console.log('Component mounted');
});			
			
		V√≠ d·ª•: 
		
<script setup>
import { onMounted } from 'vue';

onMounted(() => {
  console.log('Component is mounted!');
});
</script>			
			
			
			
			
# 	4. V√≠ d·ª• ho√†n ch·ªânh t·ª´ W3Schools		
			
D∆∞·ªõi ƒë√¢y l√† m·ªôt v√≠ d·ª• minh h·ªça c√°ch s·ª≠ d·ª•ng Composition API ƒë·ªÉ x√¢y d·ª±ng m·ªôt component ƒë∆°n gi·∫£n:			
			
V√≠ d·ª•: Counter
			
<template>
  <div>
    <p>Count: {{ count }}</p>
    <p>Double: {{ double }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue';

const count = ref(0);
const double = computed(() => count.value * 2);

const increment = () => count.value++;

onMounted(() => {
  console.log('Counter component mounted');
});
</script>			
			
		Gi·∫£i th√≠ch:
		 - count: Bi·∫øn reactive (d√πng ref).
		 - double: Gi√° tr·ªã t√≠nh to√°n (d√πng computed).
		 - increment: H√†m x·ª≠ l√Ω s·ª± ki·ªán.
		 - onMounted: Lifecycle hook ch·∫°y khi component ƒë∆∞·ª£c g·∫Øn v√†o DOM.
		
Kh√°c bi·ªát:
Composition API gom nh√≥m logic (count, double, increment) trong m·ªôt ch·ªó, d·ªÖ ƒë·ªçc h∆°n khi component ph·ª©c t·∫°p.
Options API ph√¢n t√°n logic qua c√°c t√πy ch·ªçn (data, computed, methods		
		
		
		
# 	5. Composables trong Composition API	
		
	Composable: M·ªôt h√†m s·ª≠ d·ª•ng Composition API ƒë·ªÉ ƒë√≥ng g√≥i logic, tr·∫£ v·ªÅ c√°c bi·∫øn/h√†m reactive.

	V√≠ d·ª• Composable 
	
// useCounter.js
import { ref, computed } from 'vue';

export function useCounter() {
  const count = ref(0);
  const increment = () => count.value++;
  const double = computed(() => count.value * 2);

  return { count, increment, double };
}	
		
		
	S·ª≠ d·ª•ng trong component:	
		
<template>
  <div>
    <p>Count: {{ count }}</p>
    <p>Double: {{ double }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>

<script setup>
import { useCounter } from './useCounter';

const { count, increment, double } = useCounter();
</script>		
		
		
	L·ª£i √≠ch:
T√°i s·ª≠ d·ª•ng logic gi·ªØa c√°c component.
Thay th·∫ø mixins (trong Options API) v·ªõi c√°ch ti·∫øp c·∫≠n r√µ r√†ng h∆°n.	
		
		
		
		
https://www.w3schools.com/vue/vue_ref_component-instance.php
</pre><a id='backBottom' href='../vue-js-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>