<html><head><title>Lesson 35 == Vue Lifecycle Hooks ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../vue-js-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 35 -- Vue Lifecycle Hooks -//</h1><pre>
# KhÃ¡i niá»‡m 
	Má»—i component trong Vue.js tráº£i qua má»™t chuá»—i cÃ¡c giai Ä‘oáº¡n tá»« khi Ä‘Æ°á»£c táº¡o Ä‘áº¿n khi bá»‹ há»§y. Nhá»¯ng giai Ä‘oáº¡n nÃ y Ä‘Æ°á»£c gá»i lÃ  vÃ²ng Ä‘á»i (lifecycle) cá»§a component.
	Vue cung cáº¥p cÃ¡c lifecycle hooks, lÃ  cÃ¡c hÃ m Ä‘áº·c biá»‡t mÃ  báº¡n cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a Ä‘á»ƒ cháº¡y mÃ£ táº¡i cÃ¡c thá»i Ä‘iá»ƒm cá»¥ thá»ƒ trong vÃ²ng Ä‘á»i, nhÆ° khi component Ä‘Æ°á»£c táº¡o, render, hoáº·c há»§y.
	
# 2. CÃ¡c Lifecycle Hooks chÃ­nh 
	BÃ i hÆ°á»›ng dáº«n liá»‡t kÃª cÃ¡c lifecycle hooks phá»• biáº¿n trong Vue.js (Ã¡p dá»¥ng cho cáº£ Vue 2 vÃ  Vue 3 vá»›i Options API, vÃ  Vue 3 cÃ³ thÃªm há»— trá»£ trong Composition API). DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c hook chÃ­nh, Ã½ nghÄ©a vÃ  cÃ¡ch sá»­ dá»¥ng:

	## a. beforeCreate 
	
		- Thá»i Ä‘iá»ƒm: Gá»i ngay sau khi instance cá»§a component Ä‘Æ°á»£c khá»Ÿi táº¡o, nhÆ°ng trÆ°á»›c khi data, computed, hoáº·c methods Ä‘Æ°á»£c thiáº¿t láº­p.
		
		- á»¨ng dá»¥ng: Hiáº¿m khi dÃ¹ng, nhÆ°ng cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ thá»±c hiá»‡n logic trÆ°á»›c khi component Ä‘Æ°á»£c thiáº¿t láº­p Ä‘áº§y Ä‘á»§.
		
		- LÆ°u Ã½: KhÃ´ng thá»ƒ truy cáº­p data hoáº·c refs táº¡i Ä‘Ã¢y vÃ¬ chÃºng chÆ°a Ä‘Æ°á»£c khá»Ÿi táº¡o.
	
beforeCreate() {
  console.log('Component is about to be created');
}
	
	
	
	## b. created
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi instance Ä‘Æ°á»£c táº¡o, data, computed, vÃ  methods Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p, nhÆ°ng DOM chÆ°a Ä‘Æ°á»£c render.
	
	- á»¨ng dá»¥ng: ThÆ°á»ng dÃ¹ng Ä‘á»ƒ gá»i API, thiáº¿t láº­p dá»¯ liá»‡u ban Ä‘áº§u, hoáº·c thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ khÃ´ng cáº§n DOM.

	- LÆ°u Ã½: KhÃ´ng thá»ƒ truy cáº­p DOM ($refs) vÃ¬ chÆ°a render.
	
created() {
  console.log('Component created, data is:', this.myData);
  // Gá»i API
  this.fetchData();
}	
	
	
	
	
	## c. beforeMount 
	
	- Thá»i Ä‘iá»ƒm: Gá»i ngay trÆ°á»›c khi component Ä‘Æ°á»£c gáº¯n (mount) vÃ o DOM, template Ä‘Ã£ Ä‘Æ°á»£c biÃªn dá»‹ch nhÆ°ng chÆ°a render.
	
	- á»¨ng dá»¥ng: Hiáº¿m dÃ¹ng, nhÆ°ng cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ Ä‘iá»u chá»‰nh logic trÆ°á»›c khi DOM Ä‘Æ°á»£c táº¡o.
	
	- LÆ°u Ã½: Váº«n chÆ°a truy cáº­p Ä‘Æ°á»£c DOM.	
	
beforeMount() {
  console.log('Component is about to be mounted');
}	
	
	
	## d. mounted
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi component Ä‘Æ°á»£c gáº¯n vÃ o DOM, template Ä‘Ã£ Ä‘Æ°á»£c render.
	
	- á»¨ng dá»¥ng: LÃ½ tÆ°á»Ÿng Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i DOM (nhÆ° focus input, Ä‘o kÃ­ch thÆ°á»›c), khá»Ÿi táº¡o thÆ° viá»‡n bÃªn thá»© ba (nhÆ° Chart.js), hoáº·c gá»i API cáº§n DOM.
	
	- LÆ°u Ã½: CÃ³ thá»ƒ truy cáº­p $refs vÃ  DOM.	


mounted() {
  console.log('Component mounted, DOM is ready');
  this.$refs.myInput.focus(); // Focus input
}



	## e. beforeUpdate 
	- Thá»i Ä‘iá»ƒm: Gá»i ngay trÆ°á»›c khi component Ä‘Æ°á»£c cáº­p nháº­t do thay Ä‘á»•i dá»¯ liá»‡u reactive (nhÆ° data hoáº·c computed).
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ lÆ°u tráº¡ng thÃ¡i hiá»‡n táº¡i hoáº·c thá»±c hiá»‡n logic trÆ°á»›c khi DOM re-render.
	
	- LÆ°u Ã½: DOM chÆ°a Ä‘Æ°á»£c cáº­p nháº­t táº¡i thá»i Ä‘iá»ƒm nÃ y.

beforeUpdate() {
  console.log('Component is about to update');
}



	## f. updated
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi component Ä‘Æ°á»£c cáº­p nháº­t vÃ  DOM Ä‘Ã£ Ä‘Æ°á»£c re-render.
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ thá»±c hiá»‡n logic sau khi DOM thay Ä‘á»•i (nhÆ° cáº­p nháº­t thÆ° viá»‡n bÃªn thá»© ba).
	
	- LÆ°u Ã½: TrÃ¡nh thay Ä‘á»•i dá»¯ liá»‡u reactive trong updated Ä‘á»ƒ trÃ¡nh vÃ²ng láº·p vÃ´ háº¡n.

updated() {
  console.log('Component updated, DOM is refreshed');
}



	## g. beforeUnmount (Vue 3) / beforeDestroy (Vue 2) 
	
	- Thá»i Ä‘iá»ƒm: Gá»i ngay trÆ°á»›c khi component bá»‹ há»§y (unmount), nhÆ°ng instance váº«n cÃ²n hoáº¡t Ä‘á»™ng.
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ dá»n dáº¹p (nhÆ° há»§y timer, gá»¡ event listener, hoáº·c há»§y subscription).
	
	- LÆ°u Ã½: Váº«n cÃ³ thá»ƒ truy cáº­p data, methods, vÃ  DOM.

beforeUnmount() {
  console.log('Component is about to be unmounted');
  clearInterval(this.timer); // Dá»n dáº¹p timer
}




	## h. unmounted (Vue 3) / destroyed (Vue 2) 
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi component bá»‹ há»§y hoÃ n toÃ n, khÃ´ng cÃ²n trong DOM.
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ xÃ¡c nháº­n dá»n dáº¹p hoáº·c ghi log.
	
	- LÆ°u Ã½: KhÃ´ng thá»ƒ truy cáº­p DOM hoáº·c instance táº¡i Ä‘Ã¢y.

unmounted() {
  console.log('Component has been unmounted');
}







# 3. Lifecycle Hooks trong Composition API (Vue 3) 

	Trong Composition API, báº¡n sá»­ dá»¥ng cÃ¡c lifecycle hooks báº±ng cÃ¡ch import tá»« vue vÃ  gá»i chÃºng trong setup(). TÃªn hook tÆ°Æ¡ng tá»± Options API nhÆ°ng báº¯t Ä‘áº§u báº±ng on (trá»« beforeCreate vÃ  created khÃ´ng cáº§n).

	## VÃ­ dá»¥ Composition API 
		
<template>
  <div>
    <p>{{ message }}</p>
    <button @click="updateMessage">Update</button>
  </div>
</template>

<script>
import { ref, onMounted, onUpdated, onUnmounted } from 'vue';

export default {
  setup() {
    const message = ref('Hello Vue!');

    // Mounted hook
    onMounted(() => {
      console.log('Component mounted');
    });

    // Updated hook
    onUpdated(() => {
      console.log('Component updated');
    });

    // Unmounted hook
    onUnmounted(() => {
      console.log('Component unmounted');
    });

    const updateMessage = () => {
      message.value = 'Updated!';
    };

    return {
      message,
      updateMessage
    };
  }
};
</script>


	## Giáº£i thÃ­ch 
	
	- onMounted: Thay cho mounted, cháº¡y khi component Ä‘Æ°á»£c gáº¯n vÃ o DOM.
	- onUpdated: Thay cho updated, cháº¡y sau khi DOM cáº­p nháº­t.
	- onUnmounted: Thay cho unmounted, cháº¡y khi component bá»‹ há»§y.
	- KhÃ´ng cÃ³ beforeCreate vÃ  created: VÃ¬ setup() thay tháº¿ vai trÃ² cá»§a chÃºng, báº¡n cÃ³ thá»ƒ viáº¿t logic trá»±c tiáº¿p trong setup().



# 4. VÃ­ dá»¥ thá»±c táº¿

	## Gá»i API khi component Ä‘Æ°á»£c táº¡o 
	
<template>
  <div>
    <ul>
      <li v-for="user in users" :key="user.id">{{ user.name }}</li>
    </ul>
  </div>
</template>

<script>
import axios from 'axios';
import { ref, onMounted } from 'vue';

export default {
  setup() {
    const users = ref([]);

    onMounted(async () => {
      try {
        const response = await axios.get('https://jsonplaceholder.typicode.com/users');
        users.value = response.data;
      } catch (error) {
        console.error('Error fetching users:', error);
      }
    });

    return { users };
  }
};
</script>

	Giáº£i thÃ­ch: Gá»i API trong onMounted Ä‘á»ƒ láº¥y danh sÃ¡ch ngÆ°á»i dÃ¹ng vÃ  cáº­p nháº­t users.




	## Dá»n dáº¹p Timer 
<template>
  <div>
    <p>Time: {{ time }}</p>
  </div>
</template>

<script>
import { ref, onMounted, onUnmounted } from 'vue';

export default {
  setup() {
    const time = ref(0);
    let timer;

    onMounted(() => {
      timer = setInterval(() => {
        time.value++;
      }, 1000);
    });

    onUnmounted(() => {
      clearInterval(timer); // Dá»n dáº¹p timer
    });

    return { time };
  }
};
</script>	

	Giáº£i thÃ­ch: Táº¡o timer trong onMounted vÃ  dá»n dáº¹p trong onUnmounted Ä‘á»ƒ trÃ¡nh memory leak.



# 5. LÆ°u Ã½ quan trá»ng 

	## TrÃ¡nh láº¡m dá»¥ng hooks: 
		Chá»‰ sá»­ dá»¥ng hook khi cáº§n, vÃ­ dá»¥ mounted cho DOM, unmounted cho dá»n dáº¹p.
		Logic Ä‘Æ¡n giáº£n nÃªn Ä‘áº·t trong setup() hoáº·c methods.


	## VÃ²ng láº·p vÃ´ háº¡n 
		TrÃ¡nh thay Ä‘á»•i dá»¯ liá»‡u reactive trong updated Ä‘á»ƒ khÃ´ng gÃ¢y re-render liÃªn tá»¥c. 
		
	## 	Vue 2 vs Vue 3 
	
		Vue 2 dÃ¹ng beforeDestroy vÃ  destroyed, Vue 3 dÃ¹ng beforeUnmount vÃ  unmounted.
		Composition API (Vue 3) dÃ¹ng on* hooks thay vÃ¬ Ä‘á»‹nh nghÄ©a trá»±c tiáº¿p trong Options API.

	## Async trong hooks: 
		CÃ³ thá»ƒ dÃ¹ng async/await trong hooks nhÆ° onMounted, nhÆ°ng Ä‘áº£m báº£o xá»­ lÃ½ lá»—i.
		
	## 	Thá»© tá»± hooks: 
		CÃ¡c hooks cháº¡y theo thá»© tá»± vÃ²ng Ä‘á»i: beforeCreate â†’ created â†’ beforeMount â†’ mounted â†’ (thay Ä‘á»•i dá»¯ liá»‡u) â†’ beforeUpdate â†’ updated â†’ (há»§y) â†’ beforeUnmount â†’ unmounted.

# 6. á»¨ng dá»¥ng thá»±c táº¿
	
	- Khá»Ÿi táº¡o: Gá»i API, thiáº¿t láº­p dá»¯ liá»‡u (created, onMounted).
	- TÆ°Æ¡ng tÃ¡c DOM: Focus input, khá»Ÿi táº¡o thÆ° viá»‡n UI (mounted).
	- Dá»n dáº¹p: Há»§y timer, gá»¡ event listener, há»§y subscription (beforeUnmount, unmounted).
	- Theo dÃµi cáº­p nháº­t: Äá»“ng bá»™ hÃ³a vá»›i thÆ° viá»‡n bÃªn thá»© ba sau khi DOM thay Ä‘á»•i (updated).


</pre><a id='backBottom' href='../vue-js-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>