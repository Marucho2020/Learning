<html><head><title>Lesson 35 == Vue Lifecycle Hooks ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../vue-js-learning-list.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 35 -- Vue Lifecycle Hooks -//</h1><pre>
# KhÃ¡i niá»‡m 
	Má»—i component trong Vue.js tráº£i qua má»™t chuá»—i cÃ¡c giai Ä‘oáº¡n tá»« khi Ä‘Æ°á»£c táº¡o Ä‘áº¿n khi bá»‹ há»§y. Nhá»¯ng giai Ä‘oáº¡n nÃ y Ä‘Æ°á»£c gá»i lÃ  vÃ²ng Ä‘á»i (lifecycle) cá»§a component.
	Vue cung cáº¥p cÃ¡c lifecycle hooks, lÃ  cÃ¡c hÃ m Ä‘áº·c biá»‡t mÃ  báº¡n cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a Ä‘á»ƒ cháº¡y mÃ£ táº¡i cÃ¡c thá»i Ä‘iá»ƒm cá»¥ thá»ƒ trong vÃ²ng Ä‘á»i, nhÆ° khi component Ä‘Æ°á»£c táº¡o, render, hoáº·c há»§y.
	
# 2. CÃ¡c Lifecycle Hooks chÃ­nh 
	BÃ i hÆ°á»›ng dáº«n liá»‡t kÃª cÃ¡c lifecycle hooks phá»• biáº¿n trong Vue.js (Ã¡p dá»¥ng cho cáº£ Vue 2 vÃ  Vue 3 vá»›i Options API, vÃ  Vue 3 cÃ³ thÃªm há»— trá»£ trong Composition API). DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c hook chÃ­nh, Ã½ nghÄ©a vÃ  cÃ¡ch sá»­ dá»¥ng:

	## a. beforeCreate 
	
		- Thá»i Ä‘iá»ƒm: Gá»i ngay sau khi instance cá»§a component Ä‘Æ°á»£c khá»Ÿi táº¡o, nhÆ°ng trÆ°á»›c khi data, computed, hoáº·c methods Ä‘Æ°á»£c thiáº¿t láº­p.
		
		- á»¨ng dá»¥ng: Hiáº¿m khi dÃ¹ng, nhÆ°ng cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ thá»±c hiá»‡n logic trÆ°á»›c khi component Ä‘Æ°á»£c thiáº¿t láº­p Ä‘áº§y Ä‘á»§.
		
		- LÆ°u Ã½: KhÃ´ng thá»ƒ truy cáº­p data hoáº·c refs táº¡i Ä‘Ã¢y vÃ¬ chÃºng chÆ°a Ä‘Æ°á»£c khá»Ÿi táº¡o.
	
beforeCreate() {
  console.log('Component is about to be created');
}
	
	
	
	## b. created
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi instance Ä‘Æ°á»£c táº¡o, data, computed, vÃ  methods Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p, nhÆ°ng DOM chÆ°a Ä‘Æ°á»£c render.
	
	- á»¨ng dá»¥ng: ThÆ°á»ng dÃ¹ng Ä‘á»ƒ gá»i API, thiáº¿t láº­p dá»¯ liá»‡u ban Ä‘áº§u, hoáº·c thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ khÃ´ng cáº§n DOM.

	- LÆ°u Ã½: KhÃ´ng thá»ƒ truy cáº­p DOM ($refs) vÃ¬ chÆ°a render.
	
created() {
  console.log('Component created, data is:', this.myData);
  // Gá»i API
  this.fetchData();
}	
	
	
	
	
	## c. beforeMount 
	
	- Thá»i Ä‘iá»ƒm: Gá»i ngay trÆ°á»›c khi component Ä‘Æ°á»£c gáº¯n (mount) vÃ o DOM, template Ä‘Ã£ Ä‘Æ°á»£c biÃªn dá»‹ch nhÆ°ng chÆ°a render.
	
	- á»¨ng dá»¥ng: Hiáº¿m dÃ¹ng, nhÆ°ng cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ Ä‘iá»u chá»‰nh logic trÆ°á»›c khi DOM Ä‘Æ°á»£c táº¡o.
	
	- LÆ°u Ã½: Váº«n chÆ°a truy cáº­p Ä‘Æ°á»£c DOM.	
	
beforeMount() {
  console.log('Component is about to be mounted');
}	
	
	
	## d. mounted
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi component Ä‘Æ°á»£c gáº¯n vÃ o DOM, template Ä‘Ã£ Ä‘Æ°á»£c render.
	
	- á»¨ng dá»¥ng: LÃ½ tÆ°á»Ÿng Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i DOM (nhÆ° focus input, Ä‘o kÃ­ch thÆ°á»›c), khá»Ÿi táº¡o thÆ° viá»‡n bÃªn thá»© ba (nhÆ° Chart.js), hoáº·c gá»i API cáº§n DOM.
	
	- LÆ°u Ã½: CÃ³ thá»ƒ truy cáº­p $refs vÃ  DOM.	


mounted() {
  console.log('Component mounted, DOM is ready');
  this.$refs.myInput.focus(); // Focus input
}



	## e. beforeUpdate 
	- Thá»i Ä‘iá»ƒm: Gá»i ngay trÆ°á»›c khi component Ä‘Æ°á»£c cáº­p nháº­t do thay Ä‘á»•i dá»¯ liá»‡u reactive (nhÆ° data hoáº·c computed).
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ lÆ°u tráº¡ng thÃ¡i hiá»‡n táº¡i hoáº·c thá»±c hiá»‡n logic trÆ°á»›c khi DOM re-render.
	
	- LÆ°u Ã½: DOM chÆ°a Ä‘Æ°á»£c cáº­p nháº­t táº¡i thá»i Ä‘iá»ƒm nÃ y.

beforeUpdate() {
  console.log('Component is about to update');
}



	## f. updated
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi component Ä‘Æ°á»£c cáº­p nháº­t vÃ  DOM Ä‘Ã£ Ä‘Æ°á»£c re-render.
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ thá»±c hiá»‡n logic sau khi DOM thay Ä‘á»•i (nhÆ° cáº­p nháº­t thÆ° viá»‡n bÃªn thá»© ba).
	
	- LÆ°u Ã½: TrÃ¡nh thay Ä‘á»•i dá»¯ liá»‡u reactive trong updated Ä‘á»ƒ trÃ¡nh vÃ²ng láº·p vÃ´ háº¡n.

updated() {
  console.log('Component updated, DOM is refreshed');
}



	## g. beforeUnmount (Vue 3) / beforeDestroy (Vue 2) 
	
	- Thá»i Ä‘iá»ƒm: Gá»i ngay trÆ°á»›c khi component bá»‹ há»§y (unmount), nhÆ°ng instance váº«n cÃ²n hoáº¡t Ä‘á»™ng.
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ dá»n dáº¹p (nhÆ° há»§y timer, gá»¡ event listener, hoáº·c há»§y subscription).
	
	- LÆ°u Ã½: Váº«n cÃ³ thá»ƒ truy cáº­p data, methods, vÃ  DOM.

beforeUnmount() {
  console.log('Component is about to be unmounted');
  clearInterval(this.timer); // Dá»n dáº¹p timer
}




	## h. unmounted (Vue 3) / destroyed (Vue 2) 
	- Thá»i Ä‘iá»ƒm: Gá»i sau khi component bá»‹ há»§y hoÃ n toÃ n, khÃ´ng cÃ²n trong DOM.
	
	- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ xÃ¡c nháº­n dá»n dáº¹p hoáº·c ghi log.
	
	- LÆ°u Ã½: KhÃ´ng thá»ƒ truy cáº­p DOM hoáº·c instance táº¡i Ä‘Ã¢y.

unmounted() {
  console.log('Component has been unmounted');
}


	## errorCaptured  / onErrorCaptured(Vue 3)
		lÃ  má»™t hook Ä‘Æ°á»£c sá»­ dá»¥ng trong Options API Ä‘á»ƒ báº¯t vÃ  xá»­ lÃ½ lá»—i xáº£y ra trong cÃ¢y component con (bao gá»“m lá»—i trong lifecycle, phÆ°Æ¡ng thá»©c, hoáº·c render cá»§a component con).
		KÃ­ch hoáº¡t: Gá»i khi má»™t lá»—i Ä‘Æ°á»£c nÃ©m ra tá»« báº¥t ká»³ component con nÃ o trong cÃ¢y component cá»§a component hiá»‡n táº¡i.
	
		Tham sá»‘: Nháº­n 3 tham sá»‘ : 
			- err: Lá»—i Ä‘Æ°á»£c nÃ©m (Error object).
			- instance: Component instance nÆ¡i lá»—i xáº£y ra.
			- info: Chuá»—i mÃ´ táº£ nguá»“n gá»‘c lá»—i (vÃ­ dá»¥: render, watcher).

		Tráº£ vá»: Tráº£ vá» false Ä‘á»ƒ ngÄƒn lá»—i lan truyá»n lÃªn component cha hoáº·c global error handler.

<script>
export default {
  errorCaptured(err, instance, info) {
    console.log('Error:', err);
    console.log('Component:', instance);
    console.log('Info:', info);
    return false; // NgÄƒn lá»—i lan truyá»n
  }
};
</script>

			Vue 3: Há»— trá»£ trong Options API. Trong Composition API, sá»­ dá»¥ng onErrorCaptured:

import { onErrorCaptured } from 'vue';
onErrorCaptured((err, instance, info) => {
  console.log(err, instance, info);
  return false;
});

		á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ ghi log lá»—i, hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i, hoáº·c ngÄƒn lá»—i phÃ¡ há»§y á»©ng dá»¥ng.
		Háº¡n cháº¿: KhÃ´ng thay tháº¿ global error handling (nhÆ° app.config.errorHandler).




	
	## renderTracked 
		lÃ  má»™t hook trong Composition API Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ theo dÃµi cÃ¡c phá»¥ thuá»™c (dependencies) Ä‘Æ°á»£c thu tháº­p trong quÃ¡ trÃ¬nh render cá»§a component. NÃ³ giÃºp debug báº±ng cÃ¡ch ghi láº¡i khi nÃ o vÃ  táº¡i sao má»™t component Ä‘Æ°á»£c render láº¡i.
		
		Gá»i má»—i khi component thu tháº­p má»™t phá»¥ thuá»™c pháº£n há»“i (reactive dependency) trong quÃ¡ trÃ¬nh render, cháº³ng háº¡n nhÆ° ref, reactive, hoáº·c computed.
		
		Tham sá»‘: Nháº­n má»™t object chá»©a thÃ´ng tin vá» phá»¥ thuá»™c:
			
				- key: TÃªn hoáº·c chá»‰ sá»‘ cá»§a phá»¥ thuá»™c.
				- target: Äá»‘i tÆ°á»£ng pháº£n há»“i (reactive object) chá»©a phá»¥ thuá»™c.
				- type: Loáº¡i hÃ nh Ä‘á»™ng (vÃ­ dá»¥: get khi truy cáº­p giÃ¡ trá»‹).
		Má»¥c Ä‘Ã­ch: Chá»§ yáº¿u dÃ¹ng Ä‘á»ƒ debug, giÃºp xÃ¡c Ä‘á»‹nh phá»¥ thuá»™c nÃ o gÃ¢y ra viá»‡c render láº¡i.
		
<script setup>
import { ref, onRenderTracked } from 'vue';

const count = ref(0);

onRenderTracked(({ key, target, type }) => {
  console.log('Tracked:', { key, target, type });
});
</script>

<template>
  <div>{{ count }}</div>
  <button @click="count++">Increment</button>
</template>		
		
	Má»—i khi count Ä‘Æ°á»£c truy cáº­p trong template, onRenderTracked ghi láº¡i thÃ´ng tin phá»¥ thuá»™c (vÃ­ dá»¥: { key: 'value', target: RefImpl, type: 'get' }).
	Khi nháº¥n nÃºt, count thay Ä‘á»•i, component render láº¡i, vÃ  onRenderTracked bÃ¡o cÃ¡o cÃ¡c phá»¥ thuá»™c Ä‘Æ°á»£c thu tháº­p.	


		- Chá»‰ trong Composition API: renderTracked khÃ´ng cÃ³ trong Options API (khÃ¡c vá»›i errorCaptured).
		- Debug: Chá»§ yáº¿u dÃ¹ng Ä‘á»ƒ phÃ¢n tÃ­ch hiá»‡u suáº¥t vÃ  tá»‘i Æ°u render, khÃ´ng nÃªn dÃ¹ng trong production.
		- Háº¡n cháº¿: Chá»‰ theo dÃµi phá»¥ thuá»™c trong quÃ¡ trÃ¬nh render, khÃ´ng bao gá»“m cÃ¡c tÃ¡c vá»¥ khÃ¡c nhÆ° watchers.
		- Káº¿t há»£p vá»›i onRenderTriggered: ThÆ°á»ng dÃ¹ng cÃ¹ng onRenderTriggered Ä‘á»ƒ debug lÃ½ do render láº¡i.



	## renderTriggered 
		lifecycle hook renderTriggered trong Composition API Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ theo dÃµi nguyÃªn nhÃ¢n khiáº¿n component render láº¡i. NÃ³ giÃºp debug báº±ng cÃ¡ch ghi láº¡i khi má»™t phá»¥ thuá»™c pháº£n há»“i (reactive dependency) thay Ä‘á»•i vÃ  gÃ¢y ra viá»‡c render láº¡i.
		Gá»i má»—i khi má»™t phá»¥ thuá»™c pháº£n há»“i (nhÆ° ref, reactive, hoáº·c computed) thay Ä‘á»•i, dáº«n Ä‘áº¿n viá»‡c component render láº¡i.
		
		Tham sá»‘: Nháº­n má»™t object chá»©a thÃ´ng tin vá» sá»± kiá»‡n kÃ­ch hoáº¡t

			- key: TÃªn hoáº·c chá»‰ sá»‘ cá»§a phá»¥ thuá»™c thay Ä‘á»•i.
			- target: Äá»‘i tÆ°á»£ng pháº£n há»“i chá»©a phá»¥ thuá»™c.
			- type: Loáº¡i hÃ nh Ä‘á»™ng (vÃ­ dá»¥: set khi giÃ¡ trá»‹ thay Ä‘á»•i).
			- newValue: GiÃ¡ trá»‹ má»›i cá»§a phá»¥ thuá»™c.
			- oldValue: GiÃ¡ trá»‹ cÅ© cá»§a phá»¥ thuá»™c.
		Má»¥c Ä‘Ã­ch: Chá»§ yáº¿u dÃ¹ng Ä‘á»ƒ debug, giÃºp xÃ¡c Ä‘á»‹nh phá»¥ thuá»™c nÃ o gÃ¢y ra viá»‡c render láº¡i.
		
<script setup>
import { ref, onRenderTriggered } from 'vue';

const count = ref(0);

onRenderTriggered(({ key, target, type, newValue, oldValue }) => {
  console.log('Triggered:', { key, target, type, newValue, oldValue });
});
</script>

<template>
  <div>{{ count }}</div>
  <button @click="count++">Increment</button>
</template>		

		Khi nháº¥n nÃºt, count thay Ä‘á»•i (vÃ­ dá»¥: tá»« 0 thÃ nh 1), onRenderTriggered ghi láº¡i thÃ´ng tin: { key: 'value', target: RefImpl, type: 'set', newValue: 1, oldValue: 0 }.
		Hook nÃ y giÃºp xÃ¡c Ä‘á»‹nh chÃ­nh xÃ¡c phá»¥ thuá»™c nÃ o (count) gÃ¢y ra viá»‡c render láº¡i.



		- Chá»‰ trong Composition API: renderTriggered khÃ´ng cÃ³ trong Options API.
		- Debug: DÃ¹ng Ä‘á»ƒ phÃ¢n tÃ­ch nguyÃªn nhÃ¢n render, khÃ´ng nÃªn dÃ¹ng trong production.
		- Káº¿t há»£p vá»›i onRenderTracked: onRenderTracked theo dÃµi phá»¥ thuá»™c Ä‘Æ°á»£c thu tháº­p, cÃ²n onRenderTriggered xÃ¡c Ä‘á»‹nh phá»¥ thuá»™c nÃ o gÃ¢y render láº¡i.
		- Háº¡n cháº¿: Chá»‰ ghi láº¡i cÃ¡c thay Ä‘á»•i dáº«n Ä‘áº¿n render, khÃ´ng bao gá»“m cÃ¡c tÃ¡c vá»¥ khÃ¡c nhÆ° watchers.




	## activated 
		lifecycle hook activated lÃ  má»™t hook Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ logic khi má»™t component Ä‘Æ°á»£c kÃ­ch hoáº¡t (trá»Ÿ láº¡i tráº¡ng thÃ¡i hoáº¡t Ä‘á»™ng) trong má»™t <KeepAlive> component. DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch cÃ´ Ä‘á»ng vá» activated trong Composition API:
		
		Gá»i khi component Ä‘Æ°á»£c lÆ°u trá»¯ trong bá»™ nhá»› cache bá»Ÿi <KeepAlive> Ä‘Æ°á»£c Ä‘Æ°a trá»Ÿ láº¡i DOM (vÃ­ dá»¥: khi chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c route hoáº·c tab).
		
		Má»¥c Ä‘Ã­ch: Thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ nhÆ° cáº­p nháº­t dá»¯ liá»‡u hoáº·c khá»Ÿi táº¡o láº¡i tráº¡ng thÃ¡i khi component Ä‘Æ°á»£c kÃ­ch hoáº¡t láº¡i.
		
		Trong Composition API, sá»­ dá»¥ng onActivated Ä‘á»ƒ Ä‘Äƒng kÃ½ hook activated.
		
		Hook nÃ y chá»‰ hoáº¡t Ä‘á»™ng khi component náº±m trong <KeepAlive>, Ä‘áº£m báº£o component khÃ´ng bá»‹ há»§y mÃ  Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  tÃ¡i sá»­ dá»¥ng.
		
<script setup>
import { ref, onActivated } from 'vue';

const count = ref(0);

onActivated(() => {
  console.log('Component activated');
  count.value++; // TÄƒng count má»—i khi component Ä‘Æ°á»£c kÃ­ch hoáº¡t
});
</script>

<template>
  <div>Count: {{ count }}</div>
</template>		
		
		
		Component Ä‘Æ°á»£c bao bá»c bá»Ÿi <KeepAlive> (trong component cha).
		Má»—i khi component Ä‘Æ°á»£c kÃ­ch hoáº¡t láº¡i (vÃ­ dá»¥: chuyá»ƒn tá»« route khÃ¡c vá»), onActivated cháº¡y vÃ  tÄƒng count.

	

		### Component cha (Parent.vue) 

<script setup>
import { ref } from 'vue';
import ChildComponent from './ChildComponent.vue';

const show = ref(true);
</script>

<template>
  <button @click="show = !show">Toggle</button>
  <KeepAlive>
    <ChildComponent v-if="show" />
  </KeepAlive>
</template>


		## deactivated 
			lifecycle hook deactivated trong Composition API Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xá»­ lÃ½ logic khi má»™t component trong <KeepAlive> bá»‹ vÃ´ hiá»‡u hÃ³a (táº¡m thá»i khÃ´ng hiá»ƒn thá»‹ nhÆ°ng váº«n Ä‘Æ°á»£c lÆ°u trá»¯ trong bá»™ nhá»› cache).
			
			KÃ­ch hoáº¡t: Gá»i khi component trong <KeepAlive> bá»‹ loáº¡i khá»i DOM nhÆ°ng váº«n Ä‘Æ°á»£c giá»¯ trong cache, khÃ´ng bá»‹ há»§y.
			
			Má»¥c Ä‘Ã­ch: Thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ nhÆ° lÆ°u tráº¡ng thÃ¡i, dá»«ng cÃ¡c tÃ¡c vá»¥ ná»n (nhÆ° interval), hoáº·c ghi log khi component khÃ´ng cÃ²n hiá»ƒn thá»‹.
			
			Trong Composition API, sá»­ dá»¥ng onDeactivated Ä‘á»ƒ Ä‘Äƒng kÃ½ hook deactivated.
			Hook nÃ y chá»‰ hoáº¡t Ä‘á»™ng khi component náº±m trong <KeepAlive>.
			
			
<script setup>
import { ref, onDeactivated } from 'vue';

const count = ref(0);

onDeactivated(() => {
  console.log('Component deactivated');
  // VÃ­ dá»¥: LÆ°u tráº¡ng thÃ¡i hoáº·c dá»«ng interval
});
</script>

<template>
  <div>Count: {{ count }}</div>
</template>			
			
Component cha (Parent.vue):

<script setup>
import { ref } from 'vue';
import ChildComponent from './ChildComponent.vue';

const show = ref(true);
</script>

<template>
  <button @click="show = !show">Toggle</button>
  <KeepAlive>
    <ChildComponent v-if="show" />
  </KeepAlive>
</template>
			
			
		Khi show chuyá»ƒn thÃ nh false, ChildComponent bá»‹ vÃ´ hiá»‡u hÃ³a (khÃ´ng hiá»ƒn thá»‹), onDeactivated cháº¡y vÃ  ghi log "Component deactivated".
		Component váº«n Ä‘Æ°á»£c lÆ°u trong cache, khÃ´ng bá»‹ há»§y.	
			
		### LÆ°u Ã½	
			
			- Chá»‰ trong <KeepAlive>: onDeactivated chá»‰ hoáº¡t Ä‘á»™ng khi component Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi <KeepAlive>.
			- Composition API: Sá»­ dá»¥ng onDeactivated thay vÃ¬ deactivated (trong Options API).
			- Káº¿t há»£p vá»›i onActivated: ThÆ°á»ng dÃ¹ng cÃ¹ng onActivated Ä‘á»ƒ xá»­ lÃ½ tráº¡ng thÃ¡i kÃ­ch hoáº¡t/vÃ´ hiá»‡u hÃ³a.
			- á»¨ng dá»¥ng: DÃ¹ng Ä‘á»ƒ dá»«ng cÃ¡c tÃ¡c vá»¥ (nhÆ° timers, listeners) hoáº·c lÆ°u tráº¡ng thÃ¡i khi component khÃ´ng cÃ²n hiá»ƒn thá»‹.			
			
			
			
		

		## serverPrefetch 
		lifecycle hook serverPrefetch lÃ  má»™t hook trong Options API vÃ  Composition API Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thá»±c hiá»‡n táº£i trÆ°á»›c dá»¯ liá»‡u (prefetching) trÃªn phÃ­a server trong cÃ¡c á»©ng dá»¥ng Server-Side Rendering (SSR). DÆ°á»›i Ä‘Ã¢y lÃ  giáº£i thÃ­ch cÃ´ Ä‘á»ng vá» serverPrefetch trong Composition API:
		
		KÃ­ch hoáº¡t: Gá»i trÃªn server trÆ°á»›c khi component Ä‘Æ°á»£c render trong quÃ¡ trÃ¬nh SSR, cho phÃ©p táº£i dá»¯ liá»‡u trÆ°á»›c khi gá»­i HTML vá» client.
		
		Má»¥c Ä‘Ã­ch: Tá»‘i Æ°u hiá»‡u suáº¥t báº±ng cÃ¡ch láº¥y dá»¯ liá»‡u cáº§n thiáº¿t (nhÆ° API calls) trÆ°á»›c khi render, Ä‘áº£m báº£o HTML Ä‘Æ°á»£c gá»­i vá» client Ä‘Ã£ cÃ³ dá»¯ liá»‡u.
		
		Trong Composition API, sá»­ dá»¥ng onServerPrefetch Ä‘á»ƒ Ä‘Äƒng kÃ½ hook serverPrefetch.
		Hook nÃ y tráº£ vá» má»™t Promise, cho phÃ©p xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™ (async) vÃ  chá» dá»¯ liá»‡u hoÃ n táº¥t trÆ°á»›c khi render.
		
		
<script setup>
import { ref, onServerPrefetch } from 'vue';

const data = ref(null);

onServerPrefetch(async () => {
  // Giáº£ láº­p gá»i API
  data.value = await fetchDataFromAPI();
});

async function fetchDataFromAPI() {
  return new Promise((resolve) => {
    setTimeout(() => resolve('Data from server'), 1000);
  });
}
</script>

<template>
  <div>{{ data }}</div>
</template>		
		
		
		onServerPrefetch cháº¡y trÃªn server, gá»i fetchDataFromAPI Ä‘á»ƒ láº¥y dá»¯ liá»‡u vÃ  gÃ¡n vÃ o data.
		HTML Ä‘Æ°á»£c render vá»›i dá»¯ liá»‡u Ä‘Ã£ táº£i, gá»­i vá» client mÃ  khÃ´ng cáº§n client pháº£i gá»i láº¡i API.
		
		Chá»‰ trong SSR: onServerPrefetch chá»‰ hoáº¡t Ä‘á»™ng trong mÃ´i trÆ°á»ng SSR, khÃ´ng cháº¡y trÃªn client-side rendering.
		Composition API: Sá»­ dá»¥ng onServerPrefetch thay vÃ¬ serverPrefetch (trong Options API).
		Báº¥t Ä‘á»“ng bá»™: Hook pháº£i tráº£ vá» Promise Ä‘á»ƒ Vue chá» dá»¯ liá»‡u hoÃ n táº¥t trÆ°á»›c khi render.
		á»¨ng dá»¥ng: LÃ½ tÆ°á»Ÿng cho viá»‡c táº£i dá»¯ liá»‡u tá»« API, cÆ¡ sá»Ÿ dá»¯ liá»‡u, hoáº·c cÃ¡c nguá»“n khÃ¡c trong SSR Ä‘á»ƒ cáº£i thiá»‡n tá»‘c Ä‘á»™ vÃ  SEO.
		Háº¡n cháº¿: KhÃ´ng cháº¡y trong cÃ¡c á»©ng dá»¥ng SPA thÃ´ng thÆ°á»ng, chá»‰ Ã¡p dá»¥ng khi dÃ¹ng framework nhÆ° Nuxt.js hoáº·c Vue SSR.		
			
			


# 3. Lifecycle Hooks trong Composition API (Vue 3) 

	Trong Composition API, báº¡n sá»­ dá»¥ng cÃ¡c lifecycle hooks báº±ng cÃ¡ch import tá»« vue vÃ  gá»i chÃºng trong setup(). TÃªn hook tÆ°Æ¡ng tá»± Options API nhÆ°ng báº¯t Ä‘áº§u báº±ng on (trá»« beforeCreate vÃ  created khÃ´ng cáº§n).

	## VÃ­ dá»¥ Composition API 
		
<template>
  <div>
    <p>{{ message }}</p>
    <button @click="updateMessage">Update</button>
  </div>
</template>

<script>
import { ref, onMounted, onUpdated, onUnmounted } from 'vue';

export default {
  setup() {
    const message = ref('Hello Vue!');

    // Mounted hook
    onMounted(() => {
      console.log('Component mounted');
    });

    // Updated hook
    onUpdated(() => {
      console.log('Component updated');
    });

    // Unmounted hook
    onUnmounted(() => {
      console.log('Component unmounted');
    });

    const updateMessage = () => {
      message.value = 'Updated!';
    };

    return {
      message,
      updateMessage
    };
  }
};
</script>


	## Giáº£i thÃ­ch 
	
	- onMounted: Thay cho mounted, cháº¡y khi component Ä‘Æ°á»£c gáº¯n vÃ o DOM.
	- onUpdated: Thay cho updated, cháº¡y sau khi DOM cáº­p nháº­t.
	- onUnmounted: Thay cho unmounted, cháº¡y khi component bá»‹ há»§y.
	- KhÃ´ng cÃ³ beforeCreate vÃ  created: VÃ¬ setup() thay tháº¿ vai trÃ² cá»§a chÃºng, báº¡n cÃ³ thá»ƒ viáº¿t logic trá»±c tiáº¿p trong setup().



# 4. VÃ­ dá»¥ thá»±c táº¿

	## Gá»i API khi component Ä‘Æ°á»£c táº¡o 
	
<template>
  <div>
    <ul>
      <li v-for="user in users" :key="user.id">{{ user.name }}</li>
    </ul>
  </div>
</template>

<script>
import axios from 'axios';
import { ref, onMounted } from 'vue';

export default {
  setup() {
    const users = ref([]);

    onMounted(async () => {
      try {
        const response = await axios.get('https://jsonplaceholder.typicode.com/users');
        users.value = response.data;
      } catch (error) {
        console.error('Error fetching users:', error);
      }
    });

    return { users };
  }
};
</script>

	Giáº£i thÃ­ch: Gá»i API trong onMounted Ä‘á»ƒ láº¥y danh sÃ¡ch ngÆ°á»i dÃ¹ng vÃ  cáº­p nháº­t users.




	## Dá»n dáº¹p Timer 
<template>
  <div>
    <p>Time: {{ time }}</p>
  </div>
</template>

<script>
import { ref, onMounted, onUnmounted } from 'vue';

export default {
  setup() {
    const time = ref(0);
    let timer;

    onMounted(() => {
      timer = setInterval(() => {
        time.value++;
      }, 1000);
    });

    onUnmounted(() => {
      clearInterval(timer); // Dá»n dáº¹p timer
    });

    return { time };
  }
};
</script>	

	Giáº£i thÃ­ch: Táº¡o timer trong onMounted vÃ  dá»n dáº¹p trong onUnmounted Ä‘á»ƒ trÃ¡nh memory leak.



# 5. LÆ°u Ã½ quan trá»ng 

	## TrÃ¡nh láº¡m dá»¥ng hooks: 
		Chá»‰ sá»­ dá»¥ng hook khi cáº§n, vÃ­ dá»¥ mounted cho DOM, unmounted cho dá»n dáº¹p.
		Logic Ä‘Æ¡n giáº£n nÃªn Ä‘áº·t trong setup() hoáº·c methods.


	## VÃ²ng láº·p vÃ´ háº¡n 
		TrÃ¡nh thay Ä‘á»•i dá»¯ liá»‡u reactive trong updated Ä‘á»ƒ khÃ´ng gÃ¢y re-render liÃªn tá»¥c. 
		
	## 	Vue 2 vs Vue 3 
	
		Vue 2 dÃ¹ng beforeDestroy vÃ  destroyed, Vue 3 dÃ¹ng beforeUnmount vÃ  unmounted.
		Composition API (Vue 3) dÃ¹ng on* hooks thay vÃ¬ Ä‘á»‹nh nghÄ©a trá»±c tiáº¿p trong Options API.

	## Async trong hooks: 
		CÃ³ thá»ƒ dÃ¹ng async/await trong hooks nhÆ° onMounted, nhÆ°ng Ä‘áº£m báº£o xá»­ lÃ½ lá»—i.
		
	## 	Thá»© tá»± hooks: 
		CÃ¡c hooks cháº¡y theo thá»© tá»± vÃ²ng Ä‘á»i: beforeCreate â†’ created â†’ beforeMount â†’ mounted â†’ (thay Ä‘á»•i dá»¯ liá»‡u) â†’ beforeUpdate â†’ updated â†’ (há»§y) â†’ beforeUnmount â†’ unmounted.

# 6. á»¨ng dá»¥ng thá»±c táº¿
	
	- Khá»Ÿi táº¡o: Gá»i API, thiáº¿t láº­p dá»¯ liá»‡u (created, onMounted).
	- TÆ°Æ¡ng tÃ¡c DOM: Focus input, khá»Ÿi táº¡o thÆ° viá»‡n UI (mounted).
	- Dá»n dáº¹p: Há»§y timer, gá»¡ event listener, há»§y subscription (beforeUnmount, unmounted).
	- Theo dÃµi cáº­p nháº­t: Äá»“ng bá»™ hÃ³a vá»›i thÆ° viá»‡n bÃªn thá»© ba sau khi DOM thay Ä‘á»•i (updated).


</pre><a id='backBottom' href='../vue-js-learning-list.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>