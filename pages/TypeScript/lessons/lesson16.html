<html><head><title>Lesson 16 == Keyof ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../type-script-learning-list.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 16 -- Keyof -//</h1><pre>
# 1. keyof Operator l√† g√¨?

	keyof l√† m·ªôt to√°n t·ª≠ trong TypeScript d√πng ƒë·ªÉ l·∫•y t·∫•t c·∫£ c√°c kh√≥a (keys) c·ªßa m·ªôt ki·ªÉu (type) d∆∞·ªõi d·∫°ng m·ªôt union type (t·∫≠p h·ª£p c√°c gi√° tr·ªã literal). N√≥ r·∫•t h·ªØu √≠ch khi b·∫°n mu·ªën l√†m vi·ªác v·ªõi c√°c thu·ªôc t√≠nh c·ªßa m·ªôt ƒë·ªëi t∆∞·ª£ng m·ªôt c√°ch an to√†n v·ªÅ ki·ªÉu.

V√≠ d·ª•:

interface Person {
  name: string;
  age: number;
  address: string;
}

type PersonKeys = keyof Person;
// T∆∞∆°ng ƒë∆∞∆°ng v·ªõi: "name" | "age" | "address"


	keyof Person tr·∫£ v·ªÅ m·ªôt union type ch·ª©a c√°c t√™n thu·ªôc t√≠nh c·ªßa Person: "name" | "age" | "address".

# 2. T·∫°i sao c·∫ßn keyof?

	- An to√†n ki·ªÉu: keyof gi√∫p b·∫°n truy c·∫≠p c√°c thu·ªôc t√≠nh c·ªßa m·ªôt ƒë·ªëi t∆∞·ª£ng m√† kh√¥ng c·∫ßn d√πng chu·ªói c·ª©ng (hard-coded strings), tr√°nh l·ªói g√µ sai t√™n thu·ªôc t√≠nh.
	- T√≠nh linh ho·∫°t: Cho ph√©p vi·∫øt m√£ t·ªïng qu√°t, l√†m vi·ªác v·ªõi c√°c thu·ªôc t√≠nh ƒë·ªông (dynamic properties) c·ªßa m·ªôt ki·ªÉu.
	- T√°i s·ª≠ d·ª•ng: K·∫øt h·ª£p v·ªõi generics v√† c√°c Utility Types, keyof gi√∫p t·∫°o c√°c h√†m ho·∫∑c ki·ªÉu t√°i s·ª≠ d·ª•ng ƒë∆∞·ª£c cho nhi·ªÅu ƒë·ªëi t∆∞·ª£ng.


	## V√≠ d·ª• kh√¥ng d√πng keyof (d·ªÖ sai): 
	
function getProperty(obj: Person, key: string) {
  return obj[key]; // L·ªói: TypeScript kh√¥ng bi·∫øt key c√≥ h·ª£p l·ªá kh√¥ng
}

	## D√πng keyof (an to√†n h∆°n):

function getProperty(obj: Person, key: keyof Person) {
  return obj[key]; // OK, key ch·ªâ c√≥ th·ªÉ l√† "name", "age", ho·∫∑c "address"
}


# 	3. C√°ch s·ª≠ d·ª•ng keyof

	## a. L·∫•y kh√≥a c·ªßa m·ªôt Interface/Type
	
interface Person {
  name: string;
  age: number;
}

type PersonKeys = keyof Person;
// PersonKeys = "name" | "age"

let key: PersonKeys = "name"; // OK
key = "email"; // L·ªói: Type '"email"' is not assignable to type '"name" | "age"'
	
	
	keyof li·ªát k√™ t·∫•t c·∫£ c√°c kh√≥a c·ªßa Person th√†nh m·ªôt union type.
	

	## b. K·∫øt h·ª£p v·ªõi h√†m
		D√πng keyof ƒë·ªÉ ƒë·∫£m b·∫£o tham s·ªë key ch·ªâ nh·∫≠n c√°c gi√° tr·ªã h·ª£p l·ªá:

function getProperty<T, K extends keyof T>(obj: T, key: K): T[K] {
  return obj[key];
}

const person: Person = { name: "Alice", age: 25 };
console.log(getProperty(person, "name")); // Output: Alice
console.log(getProperty(person, "age")); // Output: 25
console.log(getProperty(person, "email")); // L·ªói: Argument of type '"email"' is not assignable to parameter of type '"name" | "age"'



		T l√† ki·ªÉu c·ªßa ƒë·ªëi t∆∞·ª£ng, K extends keyof T ƒë·∫£m b·∫£o key ch·ªâ l√† c√°c thu·ªôc t√≠nh c·ªßa T.
		T[K] l√† ki·ªÉu c·ªßa gi√° tr·ªã t·∫°i kh√≥a key.



	## c. K·∫øt h·ª£p v·ªõi Union Types
		Khi l√†m vi·ªác v·ªõi union types, keyof tr·∫£ v·ªÅ c√°c kh√≥a chung c·ªßa t·∫•t c·∫£ c√°c ki·ªÉu trong union:
	
interface Person {
  name: string;
  age: number;
}

interface Employee {
  name: string;
  id: number;
}

type UnionKeys = keyof (Person | Employee);
// UnionKeys = "name" (v√¨ "name" l√† thu·ªôc t√≠nh chung duy nh·∫•t)	
	
	
	## 	d. K·∫øt h·ª£p v·ªõi Utility Types
		keyof th∆∞·ªùng ƒë∆∞·ª£c d√πng v·ªõi c√°c Utility Types nh∆∞ Pick, Omit, ho·∫∑c Record:
	
interface Person {
  name: string;
  age: number;
  address: string;
}

type PersonSubset = Pick<Person, keyof Person>;
// T∆∞∆°ng ƒë∆∞∆°ng v·ªõi Person: { name: string; age: number; address: string }	
	
	
interface Person {
  name: string;
  age: number;
  address: string;
}

type PersonSubset = Pick<Person, keyof Person>;
// T∆∞∆°ng ƒë∆∞∆°ng v·ªõi Person: { name: string; age: number; address: string }	
	


# 4. Hi·ªÉu s√¢u h∆°n v·ªÅ keyof

	ƒê·ªÉ hi·ªÉu s√¢u v·ªÅ keyof, h√£y nghƒ© n√≥ nh∆∞ m·ªôt c√°ch "truy v·∫•n metadata" c·ªßa m·ªôt ki·ªÉu:

		- Vai tr√≤ c·ªßa keyof: N√≥ cung c·∫•p m·ªôt danh s√°ch c√°c kh√≥a (·ªü d·∫°ng literal types) m√† TypeScript c√≥ th·ªÉ d√πng ƒë·ªÉ ki·ªÉm tra t√≠nh h·ª£p l·ªá khi truy c·∫≠p thu·ªôc t√≠nh.
		- So s√°nh v·ªõi JavaScript: Trong JavaScript, b·∫°n c√≥ th·ªÉ d√πng Object.keys(obj) ƒë·ªÉ l·∫•y danh s√°ch kh√≥a, nh∆∞ng n√≥ tr·∫£ v·ªÅ string[] v√† kh√¥ng an to√†n v·ªÅ ki·ªÉu. keyof trong TypeScript tr·∫£ v·ªÅ m·ªôt union type ch√≠nh x√°c, ƒë·∫£m b·∫£o an to√†n ki·ªÉu.


// JavaScript
const keys = Object.keys({ name: "Alice", age: 25 }); // string[]

// TypeScript v·ªõi keyof
type Keys = keyof { name: string; age: number }; // "name" | "age"

# ·ª®ng d·ª•ng th·ª±c t·∫ø:

	## X·ª≠ l√Ω ƒë·ªëi t∆∞·ª£ng ƒë·ªông: Khi l√†m vi·ªác v·ªõi API ho·∫∑c d·ªØ li·ªáu ƒë·ªông, keyof gi√∫p b·∫°n truy c·∫≠p thu·ªôc t√≠nh an to√†n.
	## React props: D√πng keyof ƒë·ªÉ gi·ªõi h·∫°n c√°c props ƒë∆∞·ª£c truy·ªÅn v√†o component


interface Props {
  color: string;
  size: number;
}

function setStyle<K extends keyof Props>(style: Props, key: K, value: Props[K]) {
  style[key] = value;
}




	## K·∫øt h·ª£p v·ªõi Generics: keyof tr·ªü n√™n m·∫°nh m·∫Ω h∆°n khi d√πng v·ªõi generics, cho ph√©p vi·∫øt c√°c h√†m t·ªïng qu√°t:

function updateProperty<T>(obj: T, key: keyof T, value: T[keyof T]) {
  obj[key] = value;
}


# 5. C·∫£nh b√°o khi s·ª≠ d·ª•ng keyof

	Kh√≥a kh√¥ng t·ªìn t·∫°i: N·∫øu b·∫°n c·ªë truy c·∫≠p m·ªôt kh√≥a kh√¥ng c√≥ trong ki·ªÉu, TypeScript s·∫Ω b√°o l·ªói ngay trong l√∫c bi√™n d·ªãch, gi√∫p tr√°nh l·ªói runtime.
	
	Union types h·∫°n ch·∫ø: V·ªõi union types, keyof ch·ªâ tr·∫£ v·ªÅ c√°c kh√≥a chung, c√≥ th·ªÉ kh√¥ng ƒë·ªß cho c√°c tr∆∞·ªùng h·ª£p ph·ª©c t·∫°p.
	
type A = { name: string; age: number };
type B = { name: string; id: number };
type Keys = keyof (A | B); // Ch·ªâ l√† "name"	
	
	
	Runtime limitation: keyof ch·ªâ ho·∫°t ƒë·ªông trong l√∫c bi√™n d·ªãch. N·∫øu b·∫°n c·∫ßn danh s√°ch kh√≥a khi ch·∫°y, ph·∫£i d√πng Object.keys().
	
	
# 6. M·∫πo s·ª≠ d·ª•ng keyof hi·ªáu qu·∫£

	- K·∫øt h·ª£p v·ªõi extends: D√πng K extends keyof T ƒë·ªÉ gi·ªõi h·∫°n key trong c√°c h√†m generic.
	- D√πng v·ªõi mapped types: T·∫°o c√°c ki·ªÉu ƒë·ªông d·ª±a tr√™n kh√≥a: 

type OptionalPerson = { [K in keyof Person]?: Person[K] };
// T∆∞∆°ng ƒë∆∞∆°ng v·ªõi Partial<Person>

	- Ki·ªÉm tra ki·ªÉu ƒë·ªông: K·∫øt h·ª£p keyof v·ªõi type guard ƒë·ªÉ x·ª≠ l√Ω d·ªØ li·ªáu kh√¥ng ch·∫Øc ch·∫Øn: 
function isKey<T>(obj: T, key: string): key is keyof T {
  return key in obj;
}	
	
	- T√°i s·ª≠ d·ª•ng trong API: Khi l√†m vi·ªác v·ªõi d·ªØ li·ªáu API, d√πng keyof ƒë·ªÉ ƒë·∫£m b·∫£o b·∫°n ch·ªâ truy c·∫≠p c√°c tr∆∞·ªùng h·ª£p l·ªá.
	
	
# 7. K·∫øt lu·∫≠n


	- keyof l√† m·ªôt to√°n t·ª≠ m·∫°nh m·∫Ω trong TypeScript, cho ph√©p l·∫•y c√°c kh√≥a c·ªßa m·ªôt ki·ªÉu d∆∞·ªõi d·∫°ng union type, gi√∫p truy c·∫≠p thu·ªôc t√≠nh an to√†n v√† linh ho·∫°t.
	- N√≥ ƒë·∫∑c bi·ªát h·ªØu √≠ch khi k·∫øt h·ª£p v·ªõi generics v√† Utility Types, gi√∫p vi·∫øt m√£ t·ªïng qu√°t v√† t√°i s·ª≠ d·ª•ng.
	- keyof l√† c√¥ng c·ª• c·ªët l√µi ƒë·ªÉ l√†m vi·ªác v·ªõi c√°c thu·ªôc t√≠nh ƒë·ªông, ƒë·∫∑c bi·ªát trong c√°c d·ª± √°n l·ªõn nh∆∞ React, API, ho·∫∑c h·ªá th·ªëng ph·ª©c t·∫°p.


	https://www.w3schools.com/typescript/typescript_null.php


</pre><a id='backBottom' href='../type-script-learning-list.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>