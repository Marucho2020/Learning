<html><head><title>Lesson 17 == NodeJs Script ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../NodeJS-learning.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 17 -- NodeJs Script -//</h1><pre>

# 1. NPM Scripts L√† G√¨? (What are NPM Scripts?)

	NPM Scripts l√† m·ªôt t√≠nh nƒÉng c·ªßa NPM (Node Package Manager), c√¥ng c·ª• qu·∫£n l√Ω package m·∫∑c ƒë·ªãnh c·ªßa Node.js. Ch√∫ng kh√¥ng ph·∫£i l√† "script" theo nghƒ©a vi·∫øt code ri√™ng l·∫ª, m√† l√† c√°c l·ªánh (commands) b·∫°n ƒë·ªãnh nghƒ©a trong file package.json ƒë·ªÉ ch·∫°y c√°c t√°c v·ª• t·ª± ƒë·ªông. H√£y t∆∞·ªüng t∆∞·ª£ng ch√∫ng nh∆∞ "ph√≠m t·∫Øt" ƒë·ªÉ th·ª±c hi·ªán c√°c c√¥ng vi·ªác l·∫∑p l·∫°i, thay v√¨ g√µ l·ªánh d√†i d√≤ng m·ªói l·∫ßn.

	ƒê·ªãnh nghƒ©a c∆° b·∫£n: NPM Scripts l√† c√°c l·ªánh t√πy ch·ªânh m√† b·∫°n ƒë·ªãnh nghƒ©a trong ph·∫ßn "scripts" c·ªßa file package.json. Ch√∫ng cho ph√©p b·∫°n t·ª± ƒë·ªông h√≥a c√°c nhi·ªám v·ª• ph·ªï bi·∫øn nh∆∞ ch·∫°y ·ª©ng d·ª•ng, ki·ªÉm tra code, build d·ª± √°n, ho·∫∑c d·ªçn d·∫πp file. Thay v√¨ g√µ l·ªánh th·ªß c√¥ng tr√™n terminal (nh∆∞ node index.js), b·∫°n ch·ªâ c·∫ßn ch·∫°y npm run <t√™n-script> ‚Äì ƒë∆°n gi·∫£n v√† nh·∫•t qu√°n cho c·∫£ team.


	## L·ª£i √≠ch s√¢u s·∫Øc
		
			- T·ª± ƒë·ªông h√≥a: Gi√∫p tr√°nh l·ªói con ng∆∞·ªùi, ƒë·∫∑c bi·ªát trong m√¥i tr∆∞·ªùng ph√°t tri·ªÉn l·ªõn.
		
			- Cross-platform: L·ªánh ch·∫°y gi·ªëng nhau tr√™n Windows, macOS, Linux (NPM x·ª≠ l√Ω s·ª± kh√°c bi·ªát v·ªÅ shell).
		
			- T√≠ch h·ª£p c√¥ng c·ª•: D·ªÖ k·∫øt h·ª£p v·ªõi c√°c tool b√™n th·ª© ba nh∆∞ Nodemon (t·ª± ƒë·ªông reload code), Webpack (bundle JS), ESLint (ki·ªÉm tra code style), ho·∫∑c Jest (testing).
		
			- Qu·∫£n l√Ω lifecycle: NPM c√≥ c∆° ch·∫ø "pre" v√† "post" hooks ƒë·ªÉ ch·∫°y script tr∆∞·ªõc/sau m·ªôt script ch√≠nh, gi√∫p x√¢y d·ª±ng quy tr√¨nh ph·ª©c t·∫°p (v√≠ d·ª•: ki·ªÉm tra code tr∆∞·ªõc khi deploy).
		
			- So s√°nh v·ªõi c√¥ng c·ª• kh√°c: Kh√¥ng nh∆∞ Makefile (trong C/C++) hay Rake (Ruby), NPM Scripts t·∫≠n d·ª•ng shell commands tr·ª±c ti·∫øp, n√™n ƒë∆°n gi·∫£n h∆°n nh∆∞ng v·∫´n m·∫°nh m·∫Ω. N·∫øu d·ª± √°n ph·ª©c t·∫°p, b·∫°n c√≥ th·ªÉ k·∫øt h·ª£p v·ªõi tools nh∆∞ Gulp ho·∫∑c Grunt, nh∆∞ng NPM Scripts th∆∞·ªùng ƒë·ªß d√πng v√† nh·∫π h∆°n.


		V√≠ d·ª• th·ª±c t·∫ø: Trong m·ªôt d·ª± √°n web API v·ªõi Node.js, b·∫°n c√≥ th·ªÉ d√πng script ƒë·ªÉ start server, run tests, v√† deploy l√™n Heroku ‚Äì t·∫•t c·∫£ ch·ªâ v·ªõi v√†i l·ªánh npm.


# 2. C√°ch ƒê·ªãnh Nghƒ©a Scripts Trong package.json (Defining Scripts in package.json)


{
  "scripts": {
    "start": "node index.js",  // Ch·∫°y file index.js b·∫±ng Node.js
    "test": "echo \"Running tests...\" && exit 0",  // In ra th√¥ng b√°o v√† k·∫øt th√∫c th√†nh c√¥ng
    "dev": "nodemon index.js"  // S·ª≠ d·ª•ng Nodemon ƒë·ªÉ theo d√µi thay ƒë·ªïi v√† reload
  }
}


	## Gi·∫£i th√≠ch chi ti·∫øt:

		- "start": Script ƒë·∫∑c bi·ªát ƒë·ªÉ ch·∫°y ·ª©ng d·ª•ng ch√≠nh.
		- "test": Script ƒë·∫∑c bi·ªát cho testing, th∆∞·ªùng d√πng v·ªõi framework nh∆∞ Mocha ho·∫∑c Jest.
		- "dev": T√πy ch·ªânh, d√πng Nodemon (c·∫ßn install tr∆∞·ªõc: npm install --save-dev nodemon).
		- L·ªánh c√≥ th·ªÉ k·∫øt h·ª£p nhi·ªÅu ph·∫ßn b·∫±ng && (ch·∫°y n·ªëi ti·∫øp n·∫øu th√†nh c√¥ng) ho·∫∑c & (ch·∫°y song song). V√≠ d·ª•: "build": "rm -rf dist && webpack" ‚Äì x√≥a th∆∞ m·ª•c dist tr∆∞·ªõc khi build.
	

	## M·∫πo chuy√™n gia:


		- Environment variables: B·∫°n c√≥ th·ªÉ truy·ªÅn bi·∫øn m√¥i tr∆∞·ªùng v√†o script, v√≠ d·ª•: "start": "NODE_ENV=production node index.js".
		- Pre v√† Post hooks: NPM t·ª± ƒë·ªông h·ªó tr·ª£. N·∫øu b·∫°n c√≥ script "test", th√¨ "pretest" s·∫Ω ch·∫°y tr∆∞·ªõc, "posttest" ch·∫°y sau. V√≠ d·ª•:


		- ƒêi·ªÅu n√†y h·ªØu √≠ch cho quy tr√¨nh CI/CD (Continuous Integration/Deployment), nh∆∞ ki·ªÉm tra code tr∆∞·ªõc khi test.
		- Script d√†i ph·ª©c t·∫°p: N·∫øu l·ªánh qu√° d√†i, h√£y t√°ch ra file shell ri√™ng (v√≠ d·ª•: build.sh) v√† g·ªçi "build": "./build.sh".
		- L·ªói ph·ªï bi·∫øn: ƒê·∫£m b·∫£o install dependencies tr∆∞·ªõc (v√≠ d·ª•: Nodemon ph·∫£i l√† devDependency). N·∫øu script fail, NPM s·∫Ω exit v·ªõi code 1.


# 3. C√°ch Ch·∫°y NPM Scripts (Running NPM Scripts)

	C√∫ ph√°p c∆° b·∫£n: npm run <t√™n-script>. V√≠ d·ª•: npm run dev.

	## Script ƒë·∫∑c bi·ªát (kh√¥ng c·∫ßn "run"):

		- npm start: Ch·∫°y "start".
		- npm test: Ch·∫°y "test".
		- npm install: T·ª± ƒë·ªông ch·∫°y "preinstall" v√† "postinstall" n·∫øu c√≥.
		- npm publish: Ch·∫°y "prepublish", "publish", "postpublish".

	T√πy ch·ªçn n√¢ng cao:
	
		- Truy·ªÅn arguments: npm run build -- --mode=production (hai d·∫•u -- ƒë·ªÉ truy·ªÅn args cho script).
		- Ch·∫°y song song: S·ª≠ d·ª•ng c√¥ng c·ª• nh∆∞ npm-run-all (install ri√™ng): "all": "npm-run-all --parallel lint test".
		- Debug: Ch·∫°y v·ªõi --inspect ƒë·ªÉ debug Node.js, v√≠ d·ª•: "dev": "node --inspect index.js".	
		Trong VS Code: T√≠ch h·ª£p v·ªõi tasks.json ƒë·ªÉ ch·∫°y script b·∫±ng ph√≠m t·∫Øt.
	
		S√¢u s·∫Øc h∆°n: Khi ch·∫°y, NPM s·ª≠ d·ª•ng shell c·ªßa h·ªá th·ªëng (cmd.exe tr√™n Windows, bash tr√™n Unix). N·∫øu c√≥ v·∫•n ƒë·ªÅ cross-platform, d√πng cross-env ƒë·ªÉ set variables (v√≠ d·ª•: cross-env NODE_ENV=dev node index.js).
	
	
# 	4. C√°c ·ª®ng D·ª•ng Ph·ªï Bi·∫øn C·ªßa NPM Scripts (Common Uses for NPM Scripts)
	
	
		-	Start app: "start": "node server.js" ‚Äì Ch·∫°y server production.
		-	Development mode: "dev": "nodemon server.js" ‚Äì T·ª± reload khi code thay ƒë·ªïi.
		-	Testing: "test": "jest --coverage" ‚Äì Ch·∫°y test v√† generate report.
		-	Build/Bundle: "build": "webpack --config webpack.config.js" ‚Äì Bundle code cho deployment.
		-	Lint/Format: "lint": "eslint ." ho·∫∑c "format": "prettier --write .".
		-	Clean up: "clean": "rm -rf dist" ‚Äì X√≥a file t·∫°m.
		-	Deploy: "deploy": "npm run build && git push heroku main" ‚Äì Build r·ªìi deploy.	
	
	
	## ·ª®ng d·ª•ng chuy√™n s√¢u: 
	
		- Microservices: Trong d·ª± √°n l·ªõn, d√πng script ƒë·ªÉ start nhi·ªÅu service: "start-all": "npm run start-api & npm run start-worker".
		- Performance: K·∫øt h·ª£p v·ªõi pm2 (process manager): "prod": "pm2 start ecosystem.config.js".
		- Security: "audit": "npm audit" ‚Äì Ki·ªÉm tra vulnerabilities trong dependencies.
		- Real-world example: Trong d·ª± √°n Express.js, script c√≥ th·ªÉ l√†: "start": "node dist/server.js", "build": "tsc", "dev": "concurrently \"tsc -w\" \"nodemon dist/server.js\"" (d√πng concurrently ƒë·ªÉ ch·∫°y nhi·ªÅu l·ªánh song song).
	
	
# 5. T√≥m T·∫Øt V√† L·ªùi Khuy√™n Chuy√™n Gia (Summary)	
	
	NPM Scripts l√† c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÉ t·ª± ƒë·ªông h√≥a workflow trong Node.js, gi√∫p d·ª± √°n c·ªßa b·∫°n chuy√™n nghi·ªáp h∆°n. Ch√∫ng ƒë∆°n gi·∫£n ƒë·ªÉ b·∫Øt ƒë·∫ßu nh∆∞ng c√≥ th·ªÉ m·ªü r·ªông cho c√°c quy tr√¨nh ph·ª©c t·∫°p nh∆∞ CI/CD (v√≠ d·ª•: t√≠ch h·ª£p v·ªõi GitHub Actions). T·ª´ b√†i W3Schools, b·∫°n th·∫•y ch√∫ng c∆° b·∫£n, nh∆∞ng s√¢u h∆°n, ch√∫ng l√† n·ªÅn t·∫£ng cho best practices: gi·ªØ code clean, testable, v√† deployable.
	
	
	

</pre><a id='backBottom' href='../NodeJS-learning.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>