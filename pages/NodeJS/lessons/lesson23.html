<html><head><title>Lesson 23 == path ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../NodeJS-learning.html'>üîô Quay l·∫°i danh s√°ch</a><br><h1>Lesson 23 -- path -//</h1><pre>	
# 	1. What is the Path Module?

	ƒê·ªãnh nghƒ©a: Built-in module cung c·∫•p tools ƒë·ªÉ manipulate paths: normalize, join, extract components. Gi√∫p code cross-platform m√† kh√¥ng lo separator kh√°c nhau.


	## Key Benefits (m·ªü r·ªông):
	
		Cross-platform: T·ª± ƒë·ªông handle \ vs /.
		Normalization: X·ª≠ l√Ω redundant slashes, .., . (e.g., /foo/../bar ‚Üí /bar).
		Extraction: L·∫•y basename, extname, dirname d·ªÖ d√†ng.
		Resolution: Chuy·ªÉn relative th√†nh absolute paths.
		Security: Gi√∫p tr√°nh path traversal attacks (../..) khi validate user input.	
			
		S√¢u s·∫Øc: Trong real apps (e.g., Express file serving), Path ngƒÉn ch·∫∑n vulnerabilities nh∆∞ CVE-2023-XYZ (path injection). NƒÉm 2025, v·ªõi containerized apps (Docker), cross-platform c√†ng critical v√¨ dev tr√™n macOS, deploy tr√™n Linux.
	
	
#	2. Using the Path Module
	
	Import (no install needed):
	
const path = require('path');  // CommonJS
// Destructure: const { join, resolve } = require('path');

// ESM (package.json: "type": "module")
import path from 'path';
// Ho·∫∑c import { join, resolve } from 'path';	
	
	Best Practice: Import specific methods cho tree-shaking (gi·∫£m bundle size trong bundlers nh∆∞ Webpack). Node 22+ khuy·∫øn kh√≠ch ESM cho modern code.
	
	
# 	3. Path Module Methods
	basename(): L·∫•y ph·∫ßn cu·ªëi path (filename).

const path = require('path');
console.log(path.basename('/users/docs/file.txt'));  // 'file.txt'
console.log(path.basename('/users/docs/file.txt', '.txt'));  // 'file' (b·ªè ext)

	S√¢u: Gi·ªëng Unix basename, nh∆∞ng cross-platform. D√πng cho logging filenames.


	## dirname(): L·∫•y directory part.
console.log(path.dirname('/users/docs/file.txt'));  // '/users/docs'



	## extname(): L·∫•y extension (t·ª´ last .). 
	
console.log(path.extname('file.txt'));  // '.txt'
console.log(path.extname('index.coffee.md'));  // '.md' (last ext)
console.log(path.extname('.hidden'));  // '' (dotfile)	
	
	M·∫πo: K·∫øt h·ª£p v·ªõi basename ƒë·ªÉ parse full filename.


	## join(): Join segments v·ªõi separator ƒë√∫ng OS, normalize.

console.log(path.join('/users', 'docs', 'file.txt'));  // '/users/docs/file.txt'
console.log(path.join('/users', '../system', './logs', 'file.txt'));  // '/system/logs/file.txt' (handle .. v√† .)
console.log(path.join('users', '//docs', 'file.txt'));  // 'users/docs/file.txt' (normalize slashes)

	Chuy√™n gia: ∆Øu ti√™n join() thay + '/' ƒë·ªÉ tr√°nh Windows errors. Useful cho dynamic paths (e.g., user uploads).
	
	## resolve(): Resolve th√†nh absolute path, t·ª´ right-to-left.

console.log(path.resolve('file.txt'));  // Absolute t·ª´ cwd
console.log(path.resolve('/first', '/second', 'third'));  // '/second/third'
console.log(path.resolve(__dirname, 'config/app.json'));  // Module-relative



	## normalize(): Normalize path (x√≥a redundant, resolve ..).
		console.log(path.normalize('/foo/bar//baz/asdf/quux/..'));  // '/foo/bar/baz/asdf'



	## isAbsolute(): Check absolute path.
console.log(path.isAbsolute('/foo/bar'));  // true
console.log(path.isAbsolute('foo/bar'));  // false	
	
	
	## relative(): T√≠nh relative path t·ª´ from ƒë·∫øn to.
	
console.log(path.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb'));  // '../../impl/bbb'	
	
	## parse() / format(): Parse path th√†nh object, v√† ng∆∞·ª£c l·∫°i.
	
const parsed = path.parse('/home/user/dir/file.txt');
// { root: '/', dir: '/home/user/dir', base: 'file.txt', ext: '.txt', name: 'file' }
console.log(path.format(parsed));  // '/home/user/dir/file.txt'	
	
	Useful: Cho manipulate components (e.g., ƒë·ªïi ext: parsed.ext = '.json'; path.format(parsed)).

	sep / delimiter: Platform-specific separator (/ or ) v√† delimiter (: cho PATH env).
	
	
	
# 	4. __dirname and __filename

	## CommonJS:
console.log(__dirname);  // Dir c·ªßa module
console.log(__filename);  // Full path c·ªßa module
const configPath = path.join(__dirname, 'config/app.json');	
	
	
	## ESM (Node 14+):
	
import { fileURLToPath } from 'url';
import { dirname } from 'path';
const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);	
	
	
	C·∫≠p nh·∫≠t 2025: Node 22+ c√≥ import.meta.dirname v√† import.meta.filename experimental ‚Äì theo d√µi docs ƒë·ªÉ update.
	Best Practices: D√πng ƒë·ªÉ build relative paths (e.g., static files trong Express). Tr√°nh hardcode absolute paths.
	
	
	
# 5. Advanced Path Handling Patterns	
	
	Path Utilities (class nh∆∞ v√≠ d·ª•): Temp dir, user home, ensure dir, safe path (tr√°nh traversal), unique filename.	
	
// V√≠ d·ª• safeJoin ƒë·ªÉ prevent traversal
function safeJoin(base, ...paths) {
  const target = path.join(base, ...paths);
  if (!path.normalize(target).startsWith(path.resolve(base))) throw Error('Traversal detected');
  return target;
}	
	
	
	https://www.w3schools.com/nodejs/nodejs_os.asp
	
	
</pre><a id='backBottom' href='../NodeJS-learning.html' style='display:none;'>üîô Quay l·∫°i danh s√°ch</a><br><button onclick='toggleTheme()'>üåô Chuy·ªÉn giao di·ªán</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>