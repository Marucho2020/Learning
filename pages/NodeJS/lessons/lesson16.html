<html><head><title>Lesson 16 == Package json ==========//</title><style>body { font-family: Arial, sans-serif; transition: background 0.3s, color 0.3s; }.dark-mode { background-color: #121212; color: #e0e0e0; }.light-mode { background-color: #ffffff; color: #333333; }h1 { text-align: center; color: #73d9f5; }pre { padding: 15px; border-radius: 5px;       white-space: pre-wrap; word-wrap: break-word;       overflow-x: auto; max-width: 100%;       transition: background 0.3s, color 0.3s; }.dark-mode pre { background: #1e1e1e; color: #e0e0e0; }.light-mode pre { background: #f5f5f5; color: #333333; }#backTop, #backBottom {    font-size: 2em; padding: 20px 40px;    background: #bb86fc; color: white; text-decoration: none;    border-radius: 10px; display: inline-block; text-align: center; }#backTop:hover, #backBottom:hover { background: #9b67e2; }button { font-size: 1.5em; padding: 15px 30px;    background: #03dac6; color: #121212; border: none;    cursor: pointer; border-radius: 5px; display: block; margin: 10px auto; }button:hover { background: #02b8a3; }.dark-mode a { color: #03dac6; } .light-mode a { color: #007bff; }</style></head><body onload='applyTheme(); checkPageHeight()'><div class='container'><a id='backTop' href='../NodeJS-learning.html'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><h1>Lesson 16 -- Package json -//</h1><pre>
# package.json lÃ  gÃ¬?

	package.json lÃ  má»™t file JSON náº±m á»Ÿ thÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n Node.js, chá»©a:

		- Metadata: TÃªn, phiÃªn báº£n, mÃ´ táº£, tÃ¡c giáº£, giáº¥y phÃ©p, v.v.
		- Dependencies: Danh sÃ¡ch cÃ¡c package cáº§n cho dá»± Ã¡n.
		- Scripts: CÃ¡c lá»‡nh tÃ¹y chá»‰nh Ä‘á»ƒ cháº¡y, build, test, hoáº·c deploy á»©ng dá»¥ng.
		- Cáº¥u hÃ¬nh khÃ¡c: NhÆ° loáº¡i module (CommonJS hay ESM), yÃªu cáº§u phiÃªn báº£n Node.js, hoáº·c thÃ´ng tin repository.

	File nÃ y giÃºp:

		- Quáº£n lÃ½ dá»± Ã¡n: NPM dÃ¹ng package.json Ä‘á»ƒ cÃ i Ä‘áº·t phá»¥ thuá»™c vÃ  cháº¡y script.
		- Chia sáº» dá»± Ã¡n: NgÆ°á»i khÃ¡c cÃ³ thá»ƒ cháº¡y npm install Ä‘á»ƒ tÃ¡i táº¡o mÃ´i trÆ°á»ng dá»± Ã¡n.
		- Tá»± Ä‘á»™ng hÃ³a: CÃ¡c script trong package.json giÃºp tá»± Ä‘á»™ng hÃ³a task nhÆ° test, build.

	Insight: package.json khÃ´ng chá»‰ lÃ  file cáº¥u hÃ¬nh mÃ  cÃ²n lÃ  "há»£p Ä‘á»“ng" giá»¯a dá»± Ã¡n vÃ  cÃ¡c cÃ´ng cá»¥ nhÆ° NPM, Yarn, hoáº·c CI/CD systems. Má»™t package.json Ä‘Æ°á»£c cáº¥u hÃ¬nh tá»‘t giÃºp dá»± Ã¡n dá»… scale vÃ  maintain.


# Táº¡o package.json

	Äá»ƒ táº¡o package.json, báº¡n cháº¡y lá»‡nh sau trong thÆ° má»¥c dá»± Ã¡n:
	
	npm init

	Lá»‡nh nÃ y há»i báº¡n má»™t loáº¡t cÃ¢u há»i (tÃªn, phiÃªn báº£n, mÃ´ táº£, v.v.) Ä‘á»ƒ táº¡o file.
	VÃ­ dá»¥ (khi cháº¡y npm init vÃ  tráº£ lá»i):

		name: my-app
		version: 1.0.0
		description: A simple Node.js app
		main: index.js

	Táº¡o nhanh vá»›i giÃ¡ trá»‹ máº·c Ä‘á»‹nh:
		npm init -y

	Táº¡o file 	package.json vá»›i cÃ¡c giÃ¡ trá»‹ máº·c Ä‘á»‹nh, khÃ´ng cáº§n tráº£ lá»i cÃ¢u há»i.
	Output (file package.json):

{
  "name": "my-app",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}

Insight: npm init -y tiáº¿t kiá»‡m thá»i gian cho dá»± Ã¡n nhá», nhÆ°ng vá»›i dá»± Ã¡n lá»›n, hÃ£y tráº£ lá»i Ä‘áº§y Ä‘á»§ cÃ¢u há»i hoáº·c chá»‰nh sá»­a package.json sau Ä‘á»ƒ thÃªm metadata nhÆ° keywords, repository.


# VÃ­ dá»¥ package.json

	DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n tá»« bÃ i há»c:
{
  "name": "my-node-app",
  "version": "1.0.0",
  "description": "A simple Node.js app",
  "main": "index.js",
  "scripts": {
    "start": "node index.js"
  },
  "author": "Your Name",
  "license": "ISC"
}


	- name: TÃªn dá»± Ã¡n, pháº£i unique náº¿u publish lÃªn npmjs.com.
	- version: PhiÃªn báº£n dá»± Ã¡n (theo chuáº©n Semantic Versioning: major.minor.patch).
	- description: MÃ´ táº£ ngáº¯n gá»n vá» dá»± Ã¡n.
	- main: File chÃ­nh (entry point) cá»§a dá»± Ã¡n, thÆ°á»ng lÃ  index.js.
	- scripts: Äá»‹nh nghÄ©a lá»‡nh npm start Ä‘á»ƒ cháº¡y node index.js.
	- author: TÃªn ngÆ°á»i táº¡o dá»± Ã¡n.
	- license: Loáº¡i giáº¥y phÃ©p (ISC lÃ  máº·c Ä‘á»‹nh, tÆ°Æ¡ng tá»± MIT).

	Insight: Äáº£m báº£o name khÃ´ng trÃ¹ng vá»›i package trÃªn npmjs.com náº¿u báº¡n Ä‘á»‹nh publish. main ráº¥t quan trá»ng khi dá»± Ã¡n Ä‘Æ°á»£c dÃ¹ng nhÆ° má»™t package (e.g., require('my-node-app') sáº½ load file index.js).




# ThÃªm Dependencies

	Khi cÃ i package báº±ng NPM, nÃ³ tá»± Ä‘á»™ng Ä‘Æ°á»£c thÃªm vÃ o package.json.
	VÃ­ dá»¥: CÃ i Express
		npm install express

	Output trong package.json:
{
  "dependencies": {
    "express": "^5.1.0"
  }
}

express: Package Ä‘Æ°á»£c cÃ i.
^5.1.0: PhiÃªn báº£n, cho phÃ©p cáº­p nháº­t minor/patch (e.g., 5.x.x, nhÆ°ng khÃ´ng lÃªn 6.0.0).


	Insight: LuÃ´n kiá»ƒm tra package.json sau khi cÃ i package Ä‘á»ƒ Ä‘áº£m báº£o version Ä‘Ãºng. DÃ¹ng npm install trong thÆ° má»¥c cÃ³ package.json Ä‘á»ƒ cÃ i láº¡i táº¥t cáº£ phá»¥ thuá»™c, ráº¥t há»¯u Ã­ch khi clone dá»± Ã¡n tá»« Git.


# CÃ¡c trÆ°á»ng phá»• biáº¿n trong package.json

	## 1. Basic Metadata

{
  "name": "my-package",
  "version": "1.0.0",
  "description": "A brief description of your package",
  "main": "index.js",
  "type": "module",
  "keywords": ["example", "package", "node"],
  "author": "Your Name <email@example.com>",
  "license": "MIT",
  "homepage": "https://example.com/my-package"
}

type: "module" (ESM) hoáº·c "commonjs" (máº·c Ä‘á»‹nh). Quyáº¿t Ä‘á»‹nh cÃ¡ch Node.js xá»­ lÃ½ file .js.
keywords: Tá»« khÃ³a giÃºp tÃ¬m kiáº¿m package trÃªn npmjs.com.
homepage: URL trang chá»§ cá»§a dá»± Ã¡n.



	## 2. Scripts
		Äá»‹nh nghÄ©a cÃ¡c lá»‡nh cháº¡y báº±ng npm run <script-name>.

{
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "jest",
    "build": "webpack --mode production",
    "lint": "eslint .",
    "prepare": "husky install"
  }
}


	start: Cháº¡y server báº±ng npm start.
	dev: DÃ¹ng nodemon Ä‘á»ƒ tá»± Ä‘á»™ng restart khi code thay Ä‘á»•i.
	test: Cháº¡y test vá»›i Jest.
	build: Build code vá»›i Webpack.
	lint: Kiá»ƒm tra code style vá»›i ESLint.
	prepare: Cháº¡y khi cÃ i package, thÆ°á»ng dÃ¹ng cho Git hooks (Husky).

	Insight: Scripts lÃ  nÆ¡i tá»± Ä‘á»™ng hÃ³a workflow. VÃ­ dá»¥, thÃªm "pretest": "npm run lint" Ä‘á»ƒ cháº¡y linter trÆ°á»›c khi test. Trong dá»± Ã¡n lá»›n, tá»• chá»©c scripts theo nhÃ³m (e.g., test:unit, test:integration).


	## 3. Dependencies
		Liá»‡t kÃª package cáº§n cho runtime.

{
  "dependencies": {
    "express": "^4.18.2",
    "mongoose": "~7.0.0",
    "lodash": "4.17.21"
  }
}



	## 4. Dev Dependencies
		Package chá»‰ dÃ¹ng trong phÃ¡t triá»ƒn (khÃ´ng cÃ i á»Ÿ production).

{
  "devDependencies": {
    "nodemon": "^2.0.22",
    "jest": "^29.5.0",
    "eslint": "^8.38.0"
  }
}


	## 5. Version Ranges

		^4.17.21: Cáº­p nháº­t minor/patch (4.x.x, khÃ´ng lÃªn 5.0.0).
		~4.17.21: Chá»‰ cáº­p nháº­t patch (4.17.x).
		4.17.21: Version cá»‘ Ä‘á»‹nh.
		latest: LuÃ´n láº¥y version má»›i nháº¥t.
		git+https://...: Láº¥y tá»« Git repository.

		Insight: DÃ¹ng ^ cho dá»± Ã¡n phÃ¡t triá»ƒn, nhÆ°ng cá»‘ Ä‘á»‹nh version (4.17.21) cho production Ä‘á»ƒ Ä‘áº£m báº£o á»•n Ä‘á»‹nh. Check breaking changes trong changelog trÆ°á»›c khi update major version.
		
		
	## 	6. Engines
		
		Chá»‰ Ä‘á»‹nh phiÃªn báº£n Node.js vÃ  NPM.
		
{
  "engines": {
    "node": ">=14.0.0 <17.0.0",
    "npm": ">=6.0.0"
  }
}		
		Insight: engines giÃºp Ä‘áº£m báº£o dá»± Ã¡n cháº¡y trÃªn Ä‘Ãºng phiÃªn báº£n. CI/CD pipeline thÆ°á»ng kiá»ƒm tra engines Ä‘á»ƒ trÃ¡nh lá»—i mÃ´i trÆ°á»ng.
		
		
		
	## 7. Repository vÃ  Bugs	
		
{
  "repository": {
    "type": "git",
    "url": "https://github.com/username/repo.git"
  },
  "bugs": {
    "url": "https://github.com/username/repo/issues"
  }
}		
		
		Insight: ThÃªm repository vÃ  bugs Ä‘á»ƒ ngÆ°á»i dÃ¹ng biáº¿t nÆ¡i bÃ¡o lá»—i hoáº·c xem source code. Äiá»u nÃ y Ä‘áº·c biá»‡t quan trá»ng khi publish gÃ³i lÃªn npmjs.com.
		
		
# LÃ m viá»‡c vá»›i package.json		
		
	ThÃªm Dependencies	
	
		CÃ i vÃ  lÆ°u vÃ o dependencies:
			npm install express
		
		CÃ i vÃ o devDependencies	
			npm install --save-dev nodemon
		
		CÃ i version cá»¥ thá»ƒ
			npm install express@4.18.2	
		
		
		
	Cáº­p nháº­t Dependencies
			Cáº­p nháº­t package cá»¥ thá»ƒ:
				npm update express
		
			Cáº­p nháº­t táº¥t cáº£:
				npm update
		
			Kiá»ƒm tra package lá»—i thá»i:
				npm outdated
		
		
	Cháº¡y Scripts
		Cháº¡y script tÃ¹y chá»‰nh:
			npm run dev

		Cháº¡y script máº·c Ä‘á»‹nh:

			npm start
			npm test

		Insight: Script start vÃ  test khÃ´ng cáº§n run. Trong CI/CD, dÃ¹ng npm ci thay vÃ¬ npm install Ä‘á»ƒ cÃ i phá»¥ thuá»™c dá»±a trÃªn package-lock.json, Ä‘áº£m báº£o build nháº¥t quÃ¡n



# Best Practices

	Cá»‘ Ä‘á»‹nh version cho production:
		"express": "4.18.2"
		TrÃ¡nh lá»—i do update tá»± Ä‘á»™ng.


	DÃ¹ng npm ci trong CI/CD
		npm ci
		CÃ i chÃ­nh xÃ¡c version tá»« package-lock.json.

	Commit package-lock.json:
		File nÃ y khÃ³a version phá»¥ thuá»™c, Ä‘áº£m báº£o táº¥t cáº£ mÃ´i trÆ°á»ng dÃ¹ng cÃ¹ng version.
		LuÃ´n thÃªm vÃ o Git.

	DÃ¹ng .npmignore

		Khi publish package, táº¡o file .npmignore Ä‘á»ƒ loáº¡i bá» file khÃ´ng cáº§n (e.g., node_modules, tests).
		VÃ­ dá»¥ .npmignore:

			node_modules
			tests
			.gitignore
			

	Cáº­p nháº­t thÆ°á»ng xuyÃªn

		Cháº¡y npm outdated Ä‘á»‹nh ká»³ Ä‘á»ƒ kiá»ƒm tra báº£n cáº­p nháº­t, Ä‘áº·c biá»‡t lÃ  security patches.
		DÃ¹ng cÃ´ng cá»¥ nhÆ° npm audit Ä‘á»ƒ phÃ¡t hiá»‡n lá»— há»•ng báº£o máº­t.

		Insight: Trong dá»± Ã¡n lá»›n, dÃ¹ng Dependabot (GitHub) hoáº·c Snyk Ä‘á»ƒ tá»± Ä‘á»™ng kiá»ƒm tra vÃ  Ä‘á» xuáº¥t cáº­p nháº­t. LuÃ´n test ká»¹ sau khi update Ä‘á»ƒ trÃ¡nh breaking changes.



https://www.w3schools.com/nodejs/nodejs_scripts.asp

</pre><a id='backBottom' href='../NodeJS-learning.html' style='display:none;'>ğŸ”™ Quay láº¡i danh sÃ¡ch</a><br><button onclick='toggleTheme()'>ğŸŒ™ Chuyá»ƒn giao diá»‡n</button></div><script>function toggleTheme() {   let mode = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';   document.body.className = mode; localStorage.setItem('theme', mode);   syncTheme();}function applyTheme() {   let savedTheme = localStorage.getItem('theme') || 'dark-mode';   document.body.className = savedTheme;   syncTheme();}function syncTheme() {   let preElement = document.querySelector('pre');   if (document.body.classList.contains('dark-mode')) { preElement.style.background = '#1e1e1e'; preElement.style.color = '#e0e0e0'; }   else { preElement.style.background = '#f5f5f5'; preElement.style.color = '#333333'; }}function checkPageHeight() {   let contentHeight = document.body.scrollHeight;   let windowHeight = window.innerHeight;   if (contentHeight > windowHeight * 1.2) {       document.getElementById('backBottom').style.display = 'block';   } else {       document.getElementById('backBottom').style.display = 'none';   }}</script></body></html>